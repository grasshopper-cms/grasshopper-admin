var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){return t&&eachProp(t,function(t,r){(n||!hasProp(e,r))&&(!i||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[r]=t:(e[r]||(e[r]={}),mixin(e[r],t,n,i)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,i){var r=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return r.requireType=e,r.requireModules=i,n&&(r.originalError=n),r}function newContext(e){function t(e){var t,n;for(t=0;t<e.length;t++)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(0===t||1==t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,i){var r,o,s,a,l,d,c,u,h,f,p,m,v=n&&n.split("/"),g=C.map,y=g&&g["*"];if(e&&(e=e.split("/"),c=e.length-1,C.nodeIdCompat&&jsSuffixRegExp.test(e[c])&&(e[c]=e[c].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&v&&(m=v.slice(0,v.length-1),e=m.concat(e)),t(e),e=e.join("/")),i&&g&&(v||y)){s=e.split("/");e:for(a=s.length;a>0;a-=1){if(d=s.slice(0,a).join("/"),v)for(l=v.length;l>0;l-=1)if(o=getOwn(g,v.slice(0,l).join("/")),o&&(o=getOwn(o,d))){u=o,h=a;break e}!f&&y&&getOwn(y,d)&&(f=getOwn(y,d),p=a)}!u&&f&&(u=f,h=p),u&&(s.splice(0,h,u),e=s.join("/"))}return r=getOwn(C.pkgs,e),r?r:e}function i(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===w.contextName?(t.parentNode.removeChild(t),!0):void 0})}function r(e){var t=getOwn(C.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),w.require.undef(e),w.makeRequire(null,{skipMap:!0})([e]),!0):void 0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function s(e,t,i,r){var s,a,l,d,c=null,u=t?t.name:null,h=e,f=!0,p="";return e||(f=!1,e="_@r"+(F+=1)),d=o(e),c=d[0],e=d[1],c&&(c=n(c,u,r),a=getOwn(M,c)),e&&(c?p=a&&a.normalize?a.normalize(e,function(e){return n(e,u,r)}):-1===e.indexOf("!")?n(e,u,r):e:(p=n(e,u,r),d=o(p),c=d[0],p=d[1],i=!0,s=w.nameToUrl(p))),l=!c||a||i?"":"_unnormalized"+(j+=1),{prefix:c,name:p,parentMap:t,unnormalized:!!l,url:s,originalName:h,isDefine:f,id:(c?c+"!"+p:p)+l}}function a(e){var t=e.id,n=getOwn(k,t);return n||(n=k[t]=new w.Module(e)),n}function l(e,t,n){var i=e.id,r=getOwn(k,i);!hasProp(M,i)||r&&!r.defineEmitComplete?(r=a(e),r.error&&"error"===t?n(r.error):r.on(t,n)):"defined"===t&&n(M[i])}function d(e,t){var n=e.requireModules,i=!1;t?t(e):(each(n,function(t){var n=getOwn(k,t);n&&(n.error=e,n.events.error&&(i=!0,n.emit("error",e)))}),i||req.onError(e))}function c(){globalDefQueue.length&&(apsp.apply(S,[S.length,0].concat(globalDefQueue)),globalDefQueue=[])}function u(e){delete k[e],delete _[e]}function h(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,each(e.depMaps,function(i,r){var o=i.id,s=getOwn(k,o);!s||e.depMatched[r]||n[o]||(getOwn(t,o)?(e.defineDep(r,M[o]),e.check()):h(s,t,n))}),n[i]=!0)}function f(){var e,t,n=1e3*C.waitSeconds,o=n&&w.startTime+n<(new Date).getTime(),s=[],a=[],l=!1,c=!0;if(!y){if(y=!0,eachProp(_,function(e){var n=e.map,d=n.id;if(e.enabled&&(n.isDefine||a.push(e),!e.error))if(!e.inited&&o)r(d)?(t=!0,l=!0):(s.push(d),i(d));else if(!e.inited&&e.fetched&&n.isDefine&&(l=!0,!n.prefix))return c=!1}),o&&s.length)return e=makeError("timeout","Load timeout for modules: "+s,null,s),e.contextName=w.contextName,d(e);c&&each(a,function(e){h(e,{},{})}),o&&!t||!l||!isBrowser&&!isWebWorker||T||(T=setTimeout(function(){T=0,f()},50)),y=!1}}function p(e){hasProp(M,e[0])||a(s(e[0],null,!0)).init(e[1],e[2])}function m(e,t,n,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(n,t,!1)}function v(e){var t=e.currentTarget||e.srcElement;return m(t,w.onScriptLoad,"load","onreadystatechange"),m(t,w.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function g(){var e;for(c();S.length;){if(e=S.shift(),null===e[0])return d(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));p(e)}}var y,b,w,x,T,C={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},k={},_={},D={},S=[],M={},A={},E={},F=1,j=1;return x={require:function(e){return e.require?e.require:e.require=w.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?M[e.map.id]=e.exports:e.exports=M[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(C.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},b=function(e){this.events=getOwn(D,e.id)||{},this.map=e,this.shim=getOwn(C.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},b.prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,w.startTime=(new Date).getTime();var e=this.map;return this.shim?void w.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;A[e]||(A[e]=!0,w.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,i=this.depExports,r=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{r=w.execCb(n,o,i,r)}catch(s){e=s}else r=w.execCb(n,o,i,r);if(this.map.isDefine&&void 0===r&&(t=this.module,t?r=t.exports:this.usingExports&&(r=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",d(this.error=e)}else r=o;this.exports=r,this.map.isDefine&&!this.ignore&&(M[n]=r,req.onResourceLoad&&req.onResourceLoad(w,this.map,this.depMaps)),u(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,i=s(e.prefix);this.depMaps.push(i),l(i,"defined",bind(this,function(i){var r,o,c,h=getOwn(E,this.map.id),f=this.map.name,p=this.map.parentMap?this.map.parentMap.name:null,m=w.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(f=i.normalize(f,function(e){return n(e,p,!0)})||""),o=s(e.prefix+"!"+f,this.map.parentMap),l(o,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),c=getOwn(k,o.id),void(c&&(this.depMaps.push(o),this.events.error&&c.on("error",bind(this,function(e){this.emit("error",e)})),c.enable()))):h?(this.map.url=w.nameToUrl(h),void this.load()):(r=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),r.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(k,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&u(e.map.id)}),d(e)}),r.fromText=bind(this,function(n,i){var o=e.name,l=s(o),c=useInteractive;i&&(n=i),c&&(useInteractive=!1),a(l),hasProp(C.config,t)&&(C.config[o]=C.config[t]);try{req.exec(n)}catch(u){return d(makeError("fromtexteval","fromText eval for "+t+" failed: "+u,u,[t]))}c&&(useInteractive=!0),this.depMaps.push(l),w.completeLoad(o),m([o],r)}),void i.load(e.name,m,r,C))})),w.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){_[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,i,r;if("string"==typeof e){if(e=s(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,r=getOwn(x,e.id))return void(this.depExports[t]=r(this));this.depCount+=1,l(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&l(e,"error",bind(this,this.errback))}n=e.id,i=k[n],hasProp(x,n)||!i||i.enabled||w.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(k,e.id);t&&!t.enabled&&w.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},w={config:C,contextName:e,registry:k,defined:M,urlFetched:A,defQueue:S,Module:b,makeModuleMap:s,nextTick:req.nextTick,onError:d,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=C.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(C[t]||(C[t]={}),mixin(C[t],e,!0,!0)):C[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(E[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=w.makeShimExports(e)),t[n]=e}),C.shim=t),e.packages&&each(e.packages,function(e){var t,n;e="string"==typeof e?{name:e}:e,n=e.name,t=e.location,t&&(C.paths[n]=e.location),C.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(k,function(e,t){e.inited||e.map.unnormalized||(e.map=s(t))}),(e.deps||e.callback)&&w.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,r){function o(n,i,l){var c,u,h;return r.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof n?isFunction(i)?d(makeError("requireargs","Invalid require call"),l):t&&hasProp(x,n)?x[n](k[t.id]):req.get?req.get(w,n,t,o):(u=s(n,t,!1,!0),c=u.id,hasProp(M,c)?M[c]:d(makeError("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(g(),w.nextTick(function(){g(),h=a(s(null,t)),h.skipMap=r.skipMap,h.init(n,i,l,{enabled:!0}),f()}),o)}return r=r||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var i,r=e.lastIndexOf("."),o=e.split("/")[0],s="."===o||".."===o;return-1!==r&&(!s||r>1)&&(i=e.substring(r,e.length),e=e.substring(0,r)),w.nameToUrl(n(e,t&&t.id,!0),i,!0)},defined:function(e){return hasProp(M,s(e,t,!1,!0).id)},specified:function(e){return e=s(e,t,!1,!0).id,hasProp(M,e)||hasProp(k,e)}}),t||(o.undef=function(e){c();var n=s(e,t,!0),r=getOwn(k,e);i(e),delete M[e],delete A[n.url],delete D[e],eachReverse(S,function(t,n){t[0]===e&&S.splice(n,1)}),r&&(r.events.defined&&(D[e]=r.events),u(e))}),o},enable:function(e){var t=getOwn(k,e.id);t&&a(e).enable()},completeLoad:function(e){var t,n,i,o=getOwn(C.shim,e)||{},s=o.exports;for(c();S.length;){if(n=S.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);p(n)}if(i=getOwn(k,e),!t&&!hasProp(M,e)&&i&&!i.inited){if(!(!C.enforceDefine||s&&getGlobal(s)))return r(e)?void 0:d(makeError("nodefine","No define call for "+e,null,[e]));p([e,o.deps||[],o.exportsFn])}f()},nameToUrl:function(e,t,n){var i,r,o,s,a,l,d,c=getOwn(C.pkgs,e);if(c&&(e=c),d=getOwn(E,e))return w.nameToUrl(d,t,n);if(req.jsExtRegExp.test(e))a=e+(t||"");else{for(i=C.paths,r=e.split("/"),o=r.length;o>0;o-=1)if(s=r.slice(0,o).join("/"),l=getOwn(i,s)){isArray(l)&&(l=l[0]),r.splice(0,o,l);break}a=r.join("/"),a+=t||(/^data\:|\?/.test(a)||n?"":".js"),a=("/"===a.charAt(0)||a.match(/^[\w\+\.\-]+:/)?"":C.baseUrl)+a}return C.urlArgs?a+((-1===a.indexOf("?")?"?":"&")+C.urlArgs):a},load:function(e,t){req.load(w,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=v(e);w.completeLoad(t.id)}},onScriptError:function(e){var t=v(e);return r(t.id)?void 0:d(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},w.require=w.makeRequire(),w}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.14",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,i){var r,o,s=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=i):e=[]),o&&o.context&&(s=o.context),r=getOwn(contexts,s),r||(r=contexts[s]=req.s.newContext(s)),o&&r.configure(o),r.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},req.load=function(e,t,n){var i,r=e&&e.config||{};if(isBrowser)return i=req.createNode(r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,n){var i,r;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript(),i&&(e||(e=i.getAttribute("data-requiremodule")),r=contexts[i.getAttribute("data-requirecontext")])),(r?r.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("vendor/requirejs/require.js",function(){}),define("underscore/arrays/compact",[],function(){function e(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var r=e[t];r&&i.push(r)}return i}return e}),define("underscore/internals/baseIndexOf",[],function(){function e(e,t,n){for(var i=(n||0)-1,r=e?e.length:0;++i<r;)if(e[i]===t)return i;return-1}return e}),define("underscore/internals/baseDifference",["./baseIndexOf"],function(e){function t(t,n){for(var i=-1,r=e,o=t?t.length:0,s=[];++i<o;){var a=t[i];r(n,a)<0&&s.push(a)}return s}return t}),define("underscore/objects/isArguments",[],function(){function e(e){return e&&"object"==typeof e&&"number"==typeof e.length&&i.call(e)==t||!1}var t="[object Arguments]",n=Object.prototype,i=n.toString,r=n.hasOwnProperty,o=n.propertyIsEnumerable;return e(arguments)||(e=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&r.call(e,"callee")&&!o.call(e,"callee")||!1}),e}),define("underscore/internals/isNative",[],function(){function e(e){return"function"==typeof e&&i.test(e)}var t=Object.prototype,n=t.toString,i=RegExp("^"+String(n).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");return e}),define("underscore/objects/isArray",["../internals/isNative"],function(e){var t="[object Array]",n=Object.prototype,i=n.toString,r=e(r=Array.isArray)&&r,o=r||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&i.call(e)==t||!1};return o}),define("underscore/internals/baseFlatten",["../objects/isArguments","../objects/isArray"],function(e,t){function n(i,r,o,s){for(var a=(s||0)-1,l=i?i.length:0,d=[];++a<l;){var c=i[a];if(c&&"object"==typeof c&&"number"==typeof c.length&&(t(c)||e(c))){r||(c=n(c,r,o));var u=-1,h=c.length,f=d.length;for(d.length+=h;++u<h;)d[f++]=c[u]}else o||d.push(c)}return d}return n}),define("underscore/arrays/difference",["../internals/baseDifference","../internals/baseFlatten"],function(e,t){function n(n){return e(n,t(arguments,!0,!0,1))}return n}),define("underscore/internals/objectTypes",[],function(){var e={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};return e}),define("underscore/objects/isObject",["../internals/objectTypes"],function(e){function t(t){return!(!t||!e[typeof t])}return t}),define("underscore/utilities/noop",[],function(){function e(){}return e}),define("underscore/internals/baseCreate",["./isNative","../objects/isObject","../utilities/noop"],function(e,t){function n(e){return t(e)?i(e):{}}var i=e(i=Object.create)&&i;return i||(n=function(){function e(){}return function(n){if(t(n)){e.prototype=n;var i=new e;e.prototype=null}return i||window.Object()}}()),n}),define("underscore/internals/slice",[],function(){function e(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var i=-1,r=n-t||0,o=Array(0>r?0:r);++i<r;)o[i]=e[t+i];return o}return e}),define("underscore/internals/baseBind",["./baseCreate","../objects/isObject","./slice"],function(e,t,n){function i(i){function r(){if(a){var i=n(a);o.apply(i,arguments)}if(this instanceof r){var d=e(s.prototype),c=s.apply(d,i||arguments);return t(c)?c:d}return s.apply(l,i||arguments)}var s=i[0],a=i[2],l=i[4];return r}var r=[],o=r.push;return i}),define("underscore/internals/baseCreateWrapper",["./baseCreate","../objects/isObject","./slice"],function(e,t,n){function i(r){function s(){var r=f?u:this;if(d){var y=n(d);o.apply(y,arguments)}if((c||m)&&(y||(y=n(arguments)),c&&o.apply(y,c),m&&y.length<h))return l|=16,i([a,v?l:-4&l,y,null,u,h]);if(y||(y=arguments),p&&(a=r[g]),this instanceof s){r=e(a.prototype);var b=a.apply(r,y);return t(b)?b:r}return a.apply(r,y)}var a=r[0],l=r[1],d=r[2],c=r[3],u=r[4],h=r[5],f=1&l,p=2&l,m=4&l,v=8&l,g=a;return s}var r=[],o=r.push;return i}),define("underscore/objects/isFunction",[],function(){function e(e){return"function"==typeof e}var t="[object Function]",n=Object.prototype,i=n.toString;return e(/x/)&&(e=function(e){return"function"==typeof e&&i.call(e)==t}),e}),define("underscore/internals/createWrapper",["./baseBind","./baseCreateWrapper","../objects/isFunction","./slice"],function(e,t,n){function i(i,r,o,s,a,l){var d=2&r,c=16&r,u=32&r;if(!d&&!n(i))throw new TypeError;c&&!o.length&&(r&=-17,c=o=!1),u&&!s.length&&(r&=-33,u=s=!1);var h=1==r||17===r?e:t;return h([i,r,o,s,a,l])}return i}),define("underscore/functions/bind",["../internals/createWrapper","../internals/slice"],function(e,t){function n(n,i){return arguments.length>2?e(n,17,t(arguments,2),null,i):e(n,1,null,null,i)}return n}),define("underscore/utilities/identity",[],function(){function e(e){return e}return e}),define("underscore/internals/baseCreateCallback",["../functions/bind","../utilities/identity"],function(e,t){function n(n,i,r){if("function"!=typeof n)return t;if("undefined"==typeof i||!("prototype"in n))return n;switch(r){case 1:return function(e){return n.call(i,e)};case 2:return function(e,t){return n.call(i,e,t)};case 3:return function(e,t,r){return n.call(i,e,t,r)};case 4:return function(e,t,r,o){return n.call(i,e,t,r,o)}}return e(n,i)}return n}),define("underscore/internals/shimKeys",["./objectTypes"],function(e){var t=Object.prototype,n=t.hasOwnProperty,i=function(t){var i,r=t,o=[];if(!r)return o;if(!e[typeof t])return o;for(i in r)n.call(r,i)&&o.push(i);return o};return i}),define("underscore/objects/keys",["../internals/isNative","./isObject","../internals/shimKeys"],function(e,t,n){var i=e(i=Object.keys)&&i,r=i?function(e){return t(e)?i(e):[]}:n;return r}),define("underscore/utilities/property",[],function(){function e(e){return function(t){return t[e]}}return e}),define("underscore/functions/createCallback",["../internals/baseCreateCallback","../objects/keys","../utilities/property"],function(e,t,n){function i(i,r,o){var s=typeof i;if(null==i||"function"==s)return e(i,r,o);if("object"!=s)return n(i);var a=t(i);return function(e){for(var t=a.length,n=!1;t--&&(n=e[a[t]]===i[a[t]]););return n}}return i}),define("underscore/arrays/first",["../functions/createCallback","../internals/slice"],function(e,t){function n(n,s,a){var l=0,d=n?n.length:0;if("number"!=typeof s&&null!=s){var c=-1;for(s=e(s,a,3);++c<d&&s(n[c],c,n);)l++}else if(l=s,null==l||a)return n?n[0]:i;return t(n,0,o(r(0,l),d))}var i,r=Math.max,o=Math.min;return n}),define("underscore/arrays/flatten",["../internals/baseFlatten"],function(e){function t(t,n){return e(t,n)}return t}),define("underscore/arrays/sortedIndex",["../functions/createCallback","../utilities/identity"],function(e,t){function n(n,i,r,o){var s=0,a=n?n.length:s;for(r=r?e(r,o,1):t,i=r(i);a>s;){var l=s+a>>>1;r(n[l])<i?s=l+1:a=l}return s}return n}),define("underscore/arrays/indexOf",["../internals/baseIndexOf","./sortedIndex"],function(e,t){function n(n,r,o){if("number"==typeof o){var s=n?n.length:0;o=0>o?i(0,s+o):o||0}else if(o){var a=t(n,r);return n[a]===r?a:-1}return e(n,r,o)}var i=Math.max;return n}),define("underscore/arrays/initial",["../functions/createCallback","../internals/slice"],function(e,t){function n(n,o,s){var a=0,l=n?n.length:0;if("number"!=typeof o&&null!=o){var d=l;for(o=e(o,s,3);d--&&o(n[d],d,n);)a++}else a=null==o||s?1:o||a;return t(n,0,r(i(0,l-a),l))}var i=Math.max,r=Math.min;return n}),define("underscore/arrays/intersection",["../internals/baseIndexOf","../objects/isArguments","../objects/isArray"],function(e,t,n){function i(){for(var i=[],r=-1,o=arguments.length;++r<o;){var s=arguments[r];(n(s)||t(s))&&i.push(s)}var a=i[0],l=-1,d=e,c=a?a.length:0,u=[];e:for(;++l<c;)if(s=a[l],d(u,s)<0){for(var r=o;--r;)if(d(i[r],s)<0)continue e;u.push(s)}return u}return i}),define("underscore/arrays/last",["../functions/createCallback","../internals/slice"],function(e,t){function n(n,o,s){var a=0,l=n?n.length:0;if("number"!=typeof o&&null!=o){var d=l;for(o=e(o,s,3);d--&&o(n[d],d,n);)a++}else if(a=o,null==a||s)return n?n[l-1]:i;return t(n,r(0,l-a))}var i,r=Math.max;return n}),define("underscore/arrays/lastIndexOf",[],function(){function e(e,i,r){var o=e?e.length:0;for("number"==typeof r&&(o=(0>r?t(0,o+r):n(r,o-1))+1);o--;)if(e[o]===i)return o;return-1}var t=Math.max,n=Math.min;return e}),define("underscore/arrays/range",[],function(){function e(e,i,r){e=+e||0,r=+r||1,null==i&&(i=e,e=0);for(var o=-1,s=n(0,t((i-e)/r)),a=Array(s);++o<s;)a[o]=e,e+=r;return a}var t=Math.ceil,n=Math.max;return e}),define("underscore/arrays/rest",["../functions/createCallback","../internals/slice"],function(e,t){function n(n,r,o){if("number"!=typeof r&&null!=r){var s=0,a=-1,l=n?n.length:0;for(r=e(r,o,3);++a<l&&r(n[a],a,n);)s++}else s=null==r||o?1:i(0,r);return t(n,s)}var i=Math.max;return n}),define("underscore/internals/baseUniq",["./baseIndexOf"],function(e){function t(t,n,i){for(var r=-1,o=e,s=t?t.length:0,a=[],l=i?[]:a;++r<s;){var d=t[r],c=i?i(d,r,t):d;(n?!r||l[l.length-1]!==c:o(l,c)<0)&&(i&&l.push(c),a.push(d))}return a}return t}),define("underscore/arrays/union",["../internals/baseFlatten","../internals/baseUniq"],function(e,t){function n(){return t(e(arguments,!0,!0))}return n}),define("underscore/arrays/uniq",["../internals/baseUniq","../functions/createCallback"],function(e,t){function n(n,i,r,o){return"boolean"!=typeof i&&null!=i&&(o=r,r="function"!=typeof i&&o&&o[i]===n?null:i,i=!1),null!=r&&(r=t(r,o,3)),e(n,i,r)}return n}),define("underscore/arrays/without",["../internals/baseDifference","../internals/slice"],function(e,t){function n(n){return e(n,t(arguments,1))}return n}),define("underscore/internals/indicatorObject",[],function(){var e={};return e}),define("underscore/objects/forOwn",["../internals/baseCreateCallback","../internals/indicatorObject","./keys","../internals/objectTypes"],function(e,t,n,i){var r=Object.prototype,o=r.hasOwnProperty,s=function(e,n){var r,s=e,a=s;if(!s)return a;if(!i[typeof s])return a;for(r in s)if(o.call(s,r)&&n(s[r],r,e)===t)return a;return a};return s}),define("underscore/collections/forEach",["../internals/baseCreateCallback","../objects/forOwn","../internals/indicatorObject"],function(e,t,n){function i(i,r,o){var s=-1,a=i?i.length:0;if(r=r&&"undefined"==typeof o?r:e(r,o,3),"number"==typeof a)for(;++s<a&&r(i[s],s,i)!==n;);else t(i,r)}return i}),define("underscore/collections/max",["../functions/createCallback","./forEach","../objects/forOwn"],function(e,t){function n(n,i,r){var o=-1/0,s=o;"function"!=typeof i&&r&&r[i]===n&&(i=null);var a=-1,l=n?n.length:0;if(null==i&&"number"==typeof l)for(;++a<l;){var d=n[a];d>s&&(s=d)}else i=e(i,r,3),t(n,function(e,t,n){var r=i(e,t,n);r>o&&(o=r,s=e)});return s}return n}),define("underscore/collections/map",["../functions/createCallback","../objects/forOwn"],function(e,t){function n(n,i,r){var o=-1,s=n?n.length:0;if(i=e(i,r,3),"number"==typeof s)for(var a=Array(s);++o<s;)a[o]=i(n[o],o,n);else a=[],t(n,function(e,t,n){a[++o]=i(e,t,n)});return a}return n}),define("underscore/collections/pluck",["./map"],function(e){var t=e;return t}),define("underscore/arrays/zip",["../collections/max","../collections/pluck"],function(e,t){function n(){for(var n=-1,i=e(t(arguments,"length")),r=Array(0>i?0:i);++n<i;)r[n]=t(arguments,n);return r}return n}),define("underscore/arrays/zipObject",["../objects/isArray"],function(e){function t(t,n){var i=-1,r=t?t.length:0,o={};for(n||!r||e(t[0])||(n=[]);++i<r;){var s=t[i];n?o[s]=n[i]:s&&(o[s[0]]=s[1])}return o}return t}),define("underscore/arrays",["./arrays/compact","./arrays/difference","./arrays/first","./arrays/flatten","./arrays/indexOf","./arrays/initial","./arrays/intersection","./arrays/last","./arrays/lastIndexOf","./arrays/range","./arrays/rest","./arrays/sortedIndex","./arrays/union","./arrays/uniq","./arrays/without","./arrays/zip","./arrays/zipObject"],function(e,t,n,i,r,o,s,a,l,d,c,u,h,f,p,m,v){return{compact:e,difference:t,drop:c,first:n,flatten:i,head:n,indexOf:r,initial:o,intersection:s,last:a,lastIndexOf:l,object:v,range:d,rest:c,sortedIndex:u,tail:c,take:n,union:h,uniq:f,unique:f,unzip:m,without:p,zip:m,zipObject:v}}),define("underscore/internals/lodashWrapper",[],function(){function e(e,t){this.__chain__=!!t,this.__wrapped__=e}return e}),define("underscore/chaining/chain",["../internals/lodashWrapper"],function(e){function t(t){return t=new e(t),t.__chain__=!0,t}return t}),define("underscore/chaining/tap",[],function(){function e(e,t){return t(e),e}return e}),define("underscore/chaining/wrapperChain",[],function(){function e(){return this.__chain__=!0,this}return e}),define("underscore/support",["./internals/isNative"],function(){var e=[],t={};return function(){var n={0:1,length:1};t.spliceObjects=(e.splice.call(n,0,1),!n[0])}(1),t}),define("underscore/chaining/wrapperValueOf",["../collections/forEach","../support"],function(){function e(){return this.__wrapped__}return e}),define("underscore/chaining",["./chaining/chain","./chaining/tap","./chaining/wrapperChain","./chaining/wrapperValueOf"],function(e,t,n,i){return{chain:e,tap:t,value:i,wrapperChain:n,wrapperValueOf:i}}),define("underscore/collections/contains",["../internals/baseIndexOf","../objects/forOwn","../internals/indicatorObject"],function(e,t,n){function i(i,r){var o=e,s=i?i.length:0,a=!1;return s&&"number"==typeof s?a=o(i,r)>-1:t(i,function(e){return(a=e===r)&&n}),a}return i}),define("underscore/internals/createAggregator",["../functions/createCallback","../objects/forOwn","../objects/isArray"],function(e,t){function n(n){return function(i,r,o){var s={};r=e(r,o,3);var a=-1,l=i?i.length:0;if("number"==typeof l)for(;++a<l;){var d=i[a];n(s,d,r(d,a,i),i)}else t(i,function(e,t,i){n(s,e,r(e,t,i),i)});return s}}return n}),define("underscore/collections/countBy",["../internals/createAggregator"],function(e){var t=Object.prototype,n=t.hasOwnProperty,i=e(function(e,t,i){n.call(e,i)?e[i]++:e[i]=1});return i}),define("underscore/collections/every",["../functions/createCallback","../objects/forOwn","../internals/indicatorObject"],function(e,t,n){function i(i,r,o){var s=!0;r=e(r,o,3);var a=-1,l=i?i.length:0;if("number"==typeof l)for(;++a<l&&(s=!!r(i[a],a,i)););else t(i,function(e,t,i){return!(s=!!r(e,t,i))&&n});return s}return i}),define("underscore/collections/filter",["../functions/createCallback","../objects/forOwn"],function(e,t){function n(n,i,r){var o=[];i=e(i,r,3);var s=-1,a=n?n.length:0;if("number"==typeof a)for(;++s<a;){var l=n[s];i(l,s,n)&&o.push(l)}else t(n,function(e,t,n){i(e,t,n)&&o.push(e)});return o}return n}),define("underscore/collections/find",["../functions/createCallback","../objects/forOwn","../internals/indicatorObject"],function(e,t,n){function i(i,r,o){r=e(r,o,3);var s=-1,a=i?i.length:0;if("number"!=typeof a){var l;return t(i,function(e,t,i){return r(e,t,i)?(l=e,n):void 0}),l}for(;++s<a;){var d=i[s];if(r(d,s,i))return d}}return i}),define("underscore/objects/isString",[],function(){function e(e){return"string"==typeof e||e&&"object"==typeof e&&i.call(e)==t||!1}var t="[object String]",n=Object.prototype,i=n.toString;return e}),define("underscore/objects/isEmpty",["./isArray","./isString"],function(e,t){function n(n){if(!n)return!0;if(e(n)||t(n))return!n.length;for(var i in n)if(r.call(n,i))return!1;return!0}var i=Object.prototype,r=i.hasOwnProperty;return n}),define("underscore/collections/where",["./filter","./find","../objects/isEmpty"],function(e,t,n){function i(i,o,s){return s&&n(o)?r:(s?t:e)(i,o)
}var r;return i}),define("underscore/collections/findWhere",["./where"],function(e){function t(t,n){return e(t,n,!0)}return t}),define("underscore/collections/forEachRight",["../internals/baseCreateCallback","../objects/forOwn","../internals/indicatorObject","../objects/isArray","../objects/isString","../objects/keys"],function(e,t,n,i,r,o){function s(e,i){var r=e?e.length:0;if("number"==typeof r)for(;r--&&i(e[r],r,e)!==!1;);else{var s=o(e);r=s.length,t(e,function(e,t,o){return t=s?s[--r]:--r,i(o[t],t,o)===!1&&n})}}return s}),define("underscore/collections/groupBy",["../internals/createAggregator"],function(e){var t=Object.prototype,n=t.hasOwnProperty,i=e(function(e,t,i){(n.call(e,i)?e[i]:e[i]=[]).push(t)});return i}),define("underscore/collections/indexBy",["../internals/createAggregator"],function(e){var t=e(function(e,t,n){e[n]=t});return t}),define("underscore/collections/invoke",["./forEach","../internals/slice"],function(e,t){function n(n,i){var r=t(arguments,2),o=-1,s="function"==typeof i,a=n?n.length:0,l=Array("number"==typeof a?a:0);return e(n,function(e){l[++o]=(s?i:e[i]).apply(e,r)}),l}return n}),define("underscore/collections/min",["../functions/createCallback","./forEach","../objects/forOwn"],function(e,t){function n(n,i,r){var o=1/0,s=o;"function"!=typeof i&&r&&r[i]===n&&(i=null);var a=-1,l=n?n.length:0;if(null==i&&"number"==typeof l)for(;++a<l;){var d=n[a];s>d&&(s=d)}else i=e(i,r,3),t(n,function(e,t,n){var r=i(e,t,n);o>r&&(o=r,s=e)});return s}return n}),define("underscore/collections/reduce",["../functions/createCallback","../objects/forOwn"],function(e,t){function n(n,i,r,o){if(!n)return r;var s=arguments.length<3;i=e(i,o,4);var a=-1,l=n.length;if("number"==typeof l)for(s&&(r=n[++a]);++a<l;)r=i(r,n[a],a,n);else t(n,function(e,t,n){r=s?(s=!1,e):i(r,e,t,n)});return r}return n}),define("underscore/collections/reduceRight",["../functions/createCallback","./forEachRight"],function(e,t){function n(n,i,r,o){var s=arguments.length<3;return i=e(i,o,4),t(n,function(e,t,n){r=s?(s=!1,e):i(r,e,t,n)}),r}return n}),define("underscore/collections/reject",["../functions/createCallback","./filter"],function(e,t){function n(n,i,r){return i=e(i,r,3),t(n,function(e,t,n){return!i(e,t,n)})}return n}),define("underscore/internals/baseRandom",[],function(){function e(e,i){return e+t(n()*(i-e+1))}var t=Math.floor,n=Math.random;return e}),define("underscore/collections/shuffle",["../internals/baseRandom","./forEach"],function(e,t){function n(n){var i=-1,r=n?n.length:0,o=Array("number"==typeof r?r:0);return t(n,function(t){var n=e(0,++i);o[i]=o[n],o[n]=t}),o}return n}),define("underscore/objects/values",["./keys"],function(e){function t(t){for(var n=-1,i=e(t),r=i.length,o=Array(r);++n<r;)o[n]=t[i[n]];return o}return t}),define("underscore/collections/sample",["../internals/baseRandom","../objects/isString","./shuffle","../objects/values"],function(e,t,n,i){function r(t,r,l){if(t&&"number"!=typeof t.length&&(t=i(t)),null==r||l)return t?t[e(0,t.length-1)]:o;var d=n(t);return d.length=a(s(0,r),d.length),d}var o,s=Math.max,a=Math.min;return r}),define("underscore/collections/size",["../objects/keys"],function(e){function t(t){var n=t?t.length:0;return"number"==typeof n?n:e(t).length}return t}),define("underscore/collections/some",["../functions/createCallback","../objects/forOwn","../internals/indicatorObject","../objects/isArray"],function(e,t,n){function i(i,r,o){var s;r=e(r,o,3);var a=-1,l=i?i.length:0;if("number"==typeof l)for(;++a<l&&!(s=r(i[a],a,i)););else t(i,function(e,t,i){return(s=r(e,t,i))&&n});return!!s}return i}),define("underscore/internals/compareAscending",[],function(){function e(e,t){for(var n=e.criteria,i=t.criteria,r=-1,o=n.length;++r<o;){var s=n[r],a=i[r];if(s!==a){if(s>a||"undefined"==typeof s)return 1;if(a>s||"undefined"==typeof a)return-1}}return e.index-t.index}return e}),define("underscore/collections/sortBy",["../internals/compareAscending","../functions/createCallback","./forEach","../objects/isArray","./map"],function(e,t,n){function i(i,r,o){var s=-1,a=i?i.length:0,l=Array("number"==typeof a?a:0);for(r=t(r,o,3),n(i,function(e,t,n){l[++s]={criteria:[r(e,t,n)],index:s,value:e}}),a=l.length,l.sort(e);a--;)l[a]=l[a].value;return l}return i}),define("underscore/collections/toArray",["../objects/isArray","./map","../internals/slice","../objects/values"],function(e,t,n,i){function r(r){return e(r)?n(r):r&&"number"==typeof r.length?t(r):i(r)}return r}),define("underscore/collections",["./collections/contains","./collections/countBy","./collections/every","./collections/filter","./collections/find","./collections/findWhere","./collections/forEach","./collections/forEachRight","./collections/groupBy","./collections/indexBy","./collections/invoke","./collections/map","./collections/max","./collections/min","./collections/pluck","./collections/reduce","./collections/reduceRight","./collections/reject","./collections/sample","./collections/shuffle","./collections/size","./collections/some","./collections/sortBy","./collections/toArray","./collections/where"],function(e,t,n,i,r,o,s,a,l,d,c,u,h,f,p,m,v,g,y,b,w,x,T,C,k){return{all:n,any:x,collect:u,contains:e,countBy:t,detect:r,each:s,eachRight:a,every:n,filter:i,find:r,findWhere:o,foldl:m,foldr:v,forEach:s,forEachRight:a,groupBy:l,include:e,indexBy:d,inject:m,invoke:c,map:u,max:h,min:f,pluck:p,reduce:m,reduceRight:v,reject:g,sample:y,select:i,shuffle:b,size:w,some:x,sortBy:T,toArray:C,where:k}}),define("underscore/functions/after",["../objects/isFunction"],function(e){function t(t,n){if(!e(n))throw new TypeError;return function(){return--t<1?n.apply(this,arguments):void 0}}return t}),define("underscore/objects/forIn",["../internals/baseCreateCallback","../internals/indicatorObject","../internals/objectTypes"],function(e,t,n){var i=function(e,i){var r,o=e,s=o;if(!o)return s;if(!n[typeof o])return s;for(r in o)if(i(o[r],r,e)===t)return s;return s};return i}),define("underscore/objects/functions",["./forIn","./isFunction"],function(e,t){function n(n){var i=[];return e(n,function(e,n){t(e)&&i.push(n)}),i.sort()}return n}),define("underscore/functions/bindAll",["../internals/baseFlatten","../internals/createWrapper","../objects/functions"],function(e,t,n){function i(i){for(var r=arguments.length>1?e(arguments,!0,!1,1):n(i),o=-1,s=r.length;++o<s;){var a=r[o];i[a]=t(i[a],1,null,null,i)}return i}return i}),define("underscore/functions/compose",["../objects/isFunction"],function(e){function t(){for(var t=arguments,n=t.length;n--;)if(!e(t[n]))throw new TypeError;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}return t}),define("underscore/utilities/now",["../internals/isNative"],function(e){var t=e(t=Date.now)&&t||function(){return(new Date).getTime()};return t}),define("underscore/functions/debounce",["../objects/isFunction","../objects/isObject","../utilities/now"],function(e,t,n){function i(i,s,a){var l,d,c,u,h,f,p,m=0,v=!1,g=!0;if(!e(i))throw new TypeError;if(s=o(0,s)||0,a===!0){var y=!0;g=!1}else t(a)&&(y=a.leading,v="maxWait"in a&&(o(s,a.maxWait)||0),g="trailing"in a?a.trailing:g);var b=function(){var e=s-(n()-u);if(0>=e){d&&clearTimeout(d);var t=p;d=f=p=r,t&&(m=n(),c=i.apply(h,l),f||d||(l=h=null))}else f=setTimeout(b,e)},w=function(){f&&clearTimeout(f),d=f=p=r,(g||v!==s)&&(m=n(),c=i.apply(h,l),f||d||(l=h=null))};return function(){if(l=arguments,u=n(),h=this,p=g&&(f||!y),v===!1)var e=y&&!f;else{d||y||(m=u);var t=v-(u-m),r=0>=t;r?(d&&(d=clearTimeout(d)),m=u,c=i.apply(h,l)):d||(d=setTimeout(w,t))}return r&&f?f=clearTimeout(f):f||s===v||(f=setTimeout(b,s)),e&&(r=!0,c=i.apply(h,l)),!r||f||d||(l=h=null),c}}var r,o=Math.max;return i}),define("underscore/functions/defer",["../objects/isFunction","../internals/slice"],function(e,t){function n(n){if(!e(n))throw new TypeError;var r=t(arguments,1);return setTimeout(function(){n.apply(i,r)},1)}var i;return n}),define("underscore/functions/delay",["../objects/isFunction","../internals/slice"],function(e,t){function n(n,r){if(!e(n))throw new TypeError;var o=t(arguments,2);return setTimeout(function(){n.apply(i,o)},r)}var i;return n}),define("underscore/internals/keyPrefix",[],function(){var e=+new Date+"";return e}),define("underscore/functions/memoize",["../objects/isFunction","../internals/keyPrefix"],function(e,t){function n(e,n){var i={};return function(){var o=n?n.apply(this,arguments):t+arguments[0];return r.call(i,o)?i[o]:i[o]=e.apply(this,arguments)}}var i=Object.prototype,r=i.hasOwnProperty;return n}),define("underscore/functions/once",["../objects/isFunction"],function(e){function t(t){var n,i;if(!e(t))throw new TypeError;return function(){return n?i:(n=!0,i=t.apply(this,arguments),t=null,i)}}return t}),define("underscore/functions/partial",["../internals/createWrapper","../internals/slice"],function(e,t){function n(n){return e(n,16,t(arguments,1))}return n}),define("underscore/functions/throttle",["./debounce","../objects/isFunction","../objects/isObject"],function(e,t,n){function i(i,r,o){var s=!0,a=!0;if(!t(i))throw new TypeError;return o===!1?s=!1:n(o)&&(s="leading"in o?o.leading:s,a="trailing"in o?o.trailing:a),o={},o.leading=s,o.maxWait=r,o.trailing=a,e(i,r,o)}return i}),define("underscore/functions/wrap",["../internals/createWrapper"],function(e){function t(t,n){return e(n,16,[t])}return t}),define("underscore/functions",["./functions/after","./functions/bind","./functions/bindAll","./functions/compose","./functions/createCallback","./functions/debounce","./functions/defer","./functions/delay","./functions/memoize","./functions/once","./functions/partial","./functions/throttle","./functions/wrap"],function(e,t,n,i,r,o,s,a,l,d,c,u,h){return{after:e,bind:t,bindAll:n,compose:i,createCallback:r,debounce:o,defer:s,delay:a,memoize:l,once:d,partial:c,throttle:u,wrap:h}}),define("underscore/objects/assign",["../internals/baseCreateCallback","./keys","../internals/objectTypes"],function(){function e(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var i=arguments[t];if(i)for(var r in i)e[r]=i[r]}return e}return e}),define("underscore/objects/clone",["./assign","../internals/baseCreateCallback","./isArray","./isObject","../internals/slice"],function(e,t,n,i,r){function o(t){return i(t)?n(t)?r(t):e({},t):t}return o}),define("underscore/objects/defaults",["./keys","../internals/objectTypes"],function(){function e(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var i=arguments[t];if(i)for(var r in i)"undefined"==typeof e[r]&&(e[r]=i[r])}return e}return e}),define("underscore/objects/has",[],function(){function e(e,t){return e?n.call(e,t):!1}var t=Object.prototype,n=t.hasOwnProperty;return e}),define("underscore/objects/invert",["./keys"],function(e){function t(t){for(var n=-1,i=e(t),r=i.length,o={};++n<r;){var s=i[n];o[t[s]]=s}return o}return t}),define("underscore/objects/isBoolean",[],function(){function e(e){return e===!0||e===!1||e&&"object"==typeof e&&i.call(e)==t||!1}var t="[object Boolean]",n=Object.prototype,i=n.toString;return e}),define("underscore/objects/isDate",[],function(){function e(e){return e&&"object"==typeof e&&i.call(e)==t||!1}var t="[object Date]",n=Object.prototype,i=n.toString;return e}),define("underscore/objects/isElement",[],function(){function e(e){return e&&1===e.nodeType||!1}return e}),define("underscore/internals/baseIsEqual",["../objects/forIn","./indicatorObject","../objects/isFunction","./objectTypes"],function(e,t,n,i){function r(h,m,v,g){if(h===m)return 0!==h||1/h==1/m;var y=typeof h,b=typeof m;if(!(h!==h||h&&i[y]||m&&i[b]))return!1;if(null==h||null==m)return h===m;var w=f.call(h),x=f.call(m);if(w!=x)return!1;switch(w){case s:case a:return+h==+m;case l:return h!=+h?m!=+m:0==h?1/h==1/m:h==+m;case c:case u:return h==String(m)}var T=w==o;if(!T){var C=p.call(h,"__wrapped__"),k=p.call(m,"__wrapped__");if(C||k)return r(C?h.__wrapped__:h,k?m.__wrapped__:m,v,g);if(w!=d)return!1;var _=h.constructor,D=m.constructor;if(_!=D&&!(n(_)&&_ instanceof _&&n(D)&&D instanceof D)&&"constructor"in h&&"constructor"in m)return!1}v||(v=[]),g||(g=[]);for(var S=v.length;S--;)if(v[S]==h)return g[S]==m;var M=!0,A=0;if(v.push(h),g.push(m),T){if(A=m.length,M=A==h.length)for(;A--&&(M=r(h[A],m[A],v,g)););}else e(m,function(e,n,i){return p.call(i,n)?(A++,!(M=p.call(h,n)&&r(h[n],e,v,g))&&t):void 0}),M&&e(h,function(e,n,i){return p.call(i,n)?!(M=--A>-1)&&t:void 0});return v.pop(),g.pop(),M}var o="[object Array]",s="[object Boolean]",a="[object Date]",l="[object Number]",d="[object Object]",c="[object RegExp]",u="[object String]",h=Object.prototype,f=h.toString,p=h.hasOwnProperty;return r}),define("underscore/objects/isEqual",["../internals/baseIsEqual"],function(e){function t(t,n){return e(t,n)}return t}),define("underscore/objects/isFinite",[],function(){function e(e){return t(e)&&!n(parseFloat(e))}var t=window.isFinite,n=window.isNaN;return e}),define("underscore/objects/isNumber",[],function(){function e(e){return"number"==typeof e||e&&"object"==typeof e&&i.call(e)==t||!1}var t="[object Number]",n=Object.prototype,i=n.toString;return e}),define("underscore/objects/isNaN",["./isNumber"],function(e){function t(t){return e(t)&&t!=+t}return t}),define("underscore/objects/isNull",[],function(){function e(e){return null===e}return e}),define("underscore/objects/isRegExp",["../internals/objectTypes"],function(e){function t(t){return t&&e[typeof t]&&r.call(t)==n||!1}var n="[object RegExp]",i=Object.prototype,r=i.toString;return t}),define("underscore/objects/isUndefined",[],function(){function e(e){return"undefined"==typeof e}return e}),define("underscore/objects/omit",["../internals/baseDifference","../internals/baseFlatten","./forIn"],function(e,t,n){function i(i){var r=[];n(i,function(e,t){r.push(t)}),r=e(r,t(arguments,!0,!1,1));for(var o=-1,s=r.length,a={};++o<s;){var l=r[o];a[l]=i[l]}return a}return i}),define("underscore/objects/pairs",["./keys"],function(e){function t(t){for(var n=-1,i=e(t),r=i.length,o=Array(r);++n<r;){var s=i[n];o[n]=[s,t[s]]}return o}return t}),define("underscore/objects/pick",["../internals/baseFlatten"],function(e){function t(t){for(var n=-1,i=e(arguments,!0,!1,1),r=i.length,o={};++n<r;){var s=i[n];s in t&&(o[s]=t[s])}return o}return t}),define("underscore/objects",["./objects/assign","./objects/clone","./objects/defaults","./objects/forIn","./objects/forOwn","./objects/functions","./objects/has","./objects/invert","./objects/isArguments","./objects/isArray","./objects/isBoolean","./objects/isDate","./objects/isElement","./objects/isEmpty","./objects/isEqual","./objects/isFinite","./objects/isFunction","./objects/isNaN","./objects/isNull","./objects/isNumber","./objects/isObject","./objects/isRegExp","./objects/isString","./objects/isUndefined","./objects/keys","./objects/omit","./objects/pairs","./objects/pick","./objects/values"],function(e,t,n,i,r,o,s,a,l,d,c,u,h,f,p,m,v,g,y,b,w,x,T,C,k,_,D,S,M){return{assign:e,clone:t,defaults:n,extend:e,forIn:i,forOwn:r,functions:o,has:s,invert:a,isArguments:l,isArray:d,isBoolean:c,isDate:u,isElement:h,isEmpty:f,isEqual:p,isFinite:m,isFunction:v,isNaN:g,isNull:y,isNumber:b,isObject:w,isRegExp:x,isString:T,isUndefined:C,keys:k,methods:o,omit:_,pairs:D,pick:S,values:M}}),define("underscore/internals/htmlEscapes",[],function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};return e}),define("underscore/internals/escapeHtmlChar",["./htmlEscapes"],function(e){function t(t){return e[t]}return t}),define("underscore/internals/reUnescapedHtml",["./htmlEscapes","../objects/keys"],function(e,t){var n=RegExp("["+t(e).join("")+"]","g");return n}),define("underscore/utilities/escape",["../internals/escapeHtmlChar","../objects/keys","../internals/reUnescapedHtml"],function(e,t,n){function i(t){return null==t?"":String(t).replace(n,e)}return i}),define("underscore/utilities/mixin",["../collections/forEach","../objects/functions","../objects/isFunction"],function(e,t,n){function i(i,r){var s=i,a=n(s);e(t(r),function(e){var t=i[e]=r[e];a&&(s.prototype[e]=function(){var e=[this.__wrapped__];o.apply(e,arguments);var n=t.apply(i,e);return this.__chain__&&(n=new s(n),n.__chain__=!0),n})})}var r=[],o=r.push;return i}),define("underscore/utilities/noConflict",[],function(){function e(){return window._=t,this}var t=window._;return e}),define("underscore/utilities/random",["../internals/baseRandom"],function(){function e(e,i){return null==e&&null==i&&(i=1),e=+e||0,null==i?(i=e,e=0):i=+i||0,e+t(n()*(i-e+1))}var t=Math.floor,n=Math.random;return e}),define("underscore/utilities/result",["../objects/isFunction"],function(e){function t(t,n){if(t){var i=t[n];return e(i)?t[n]():i}}return t}),define("underscore/internals/escapeStringChar",[],function(){function e(e){return"\\"+t[e]}var t={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};return e}),define("underscore/internals/reInterpolate",[],function(){var e=/<%=([\s\S]+?)%>/g;return e}),define("underscore/utilities/templateSettings",["./escape","../internals/reInterpolate"],function(e,t){var n={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:t,variable:"",imports:{_:{escape:e}}};return n}),define("underscore/utilities/template",["../objects/defaults","./escape","../internals/escapeStringChar","../internals/reInterpolate","./templateSettings"],function(e,t,n,i,r){function o(t,i,o){var l=r.imports._,d=l.templateSettings||r;t=String(t||""),o=e({},o,d);var c=0,u="__p += '",h=o.variable,f=RegExp((o.escape||s).source+"|"+(o.interpolate||s).source+"|"+(o.evaluate||s).source+"|$","g");t.replace(f,function(e,i,r,o,s){return u+=t.slice(c,s).replace(a,n),i&&(u+="' +\n_.escape("+i+") +\n'"),o&&(u+="';\n"+o+";\n__p += '"),r&&(u+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=s+e.length,e}),u+="';\n",h||(h="obj",u="with ("+h+" || {}) {\n"+u+"\n}\n"),u="function("+h+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+u+"return __p\n}";try{var p=Function("_","return "+u)(l)}catch(m){throw m.source=u,m}return i?p(i):(p.source=u,p)}var s=/($^)/,a=/['\n\r\t\u2028\u2029\\]/g;return o}),define("underscore/utilities/times",["../internals/baseCreateCallback"],function(e){function t(t,n,i){t=(t=+t)>-1?t:0;var r=-1,o=Array(t);for(n=e(n,i,1);++r<t;)o[r]=n(r);return o}return t}),define("underscore/internals/htmlUnescapes",["./htmlEscapes","../objects/invert"],function(e,t){var n=t(e);return n}),define("underscore/internals/reEscapedHtml",["./htmlUnescapes","../objects/keys"],function(e,t){var n=RegExp("("+t(e).join("|")+")","g");return n}),define("underscore/internals/unescapeHtmlChar",["./htmlUnescapes"],function(e){function t(t){return e[t]}return t}),define("underscore/utilities/unescape",["../objects/keys","../internals/reEscapedHtml","../internals/unescapeHtmlChar"],function(e,t,n){function i(e){return null==e?"":String(e).replace(t,n)}return i}),define("underscore/utilities/uniqueId",[],function(){function e(e){var n=++t+"";return e?e+n:n}var t=0;return e}),define("underscore/utilities",["./functions/createCallback","./utilities/escape","./utilities/identity","./utilities/mixin","./utilities/noConflict","./utilities/noop","./utilities/now","./utilities/property","./utilities/random","./utilities/result","./utilities/template","./utilities/templateSettings","./utilities/times","./utilities/unescape","./utilities/uniqueId"],function(e,t,n,i,r,o,s,a,l,d,c,u,h,f,p){return{createCallback:e,escape:t,identity:n,mixin:i,noConflict:r,noop:o,now:s,property:a,random:l,result:d,template:c,templateSettings:u,times:h,unescape:f,uniqueId:p}}),define("underscore/main",["./arrays","./chaining","./collections","./functions","./objects","./utilities","./collections/forEach","./objects/forOwn","./internals/lodashWrapper","./utilities/mixin","./support","./utilities/templateSettings"],function(e,t,n,i,r,o,s,a,l,d,c){function u(e){return e instanceof u?e:new l(e)}var h=[];return l.prototype=u.prototype,d=function(e){return function(t,n){return n||(n=t,t=u),e(t,n)}}(d),u.after=i.after,u.bind=i.bind,u.bindAll=i.bindAll,u.chain=t.chain,u.compact=e.compact,u.compose=i.compose,u.countBy=n.countBy,u.debounce=i.debounce,u.defaults=r.defaults,u.defer=i.defer,u.delay=i.delay,u.difference=e.difference,u.filter=n.filter,u.flatten=e.flatten,u.forEach=s,u.functions=r.functions,u.groupBy=n.groupBy,u.indexBy=n.indexBy,u.initial=e.initial,u.intersection=e.intersection,u.invert=r.invert,u.invoke=n.invoke,u.keys=r.keys,u.map=n.map,u.max=n.max,u.memoize=i.memoize,u.min=n.min,u.omit=r.omit,u.once=i.once,u.pairs=r.pairs,u.partial=i.partial,u.pick=r.pick,u.pluck=n.pluck,u.range=e.range,u.reject=n.reject,u.rest=e.rest,u.shuffle=n.shuffle,u.sortBy=n.sortBy,u.tap=t.tap,u.throttle=i.throttle,u.times=o.times,u.toArray=n.toArray,u.union=e.union,u.uniq=e.uniq,u.values=r.values,u.where=n.where,u.without=e.without,u.wrap=i.wrap,u.zip=e.zip,u.collect=n.map,u.drop=e.rest,u.each=s,u.extend=r.assign,u.methods=r.functions,u.object=e.zipObject,u.select=n.filter,u.tail=e.rest,u.unique=e.uniq,u.clone=r.clone,u.contains=n.contains,u.escape=o.escape,u.every=n.every,u.find=n.find,u.has=r.has,u.identity=o.identity,u.indexOf=e.indexOf,u.isArguments=r.isArguments,u.isArray=r.isArray,u.isBoolean=r.isBoolean,u.isDate=r.isDate,u.isElement=r.isElement,u.isEmpty=r.isEmpty,u.isEqual=r.isEqual,u.isFinite=r.isFinite,u.isFunction=r.isFunction,u.isNaN=r.isNaN,u.isNull=r.isNull,u.isNumber=r.isNumber,u.isObject=r.isObject,u.isRegExp=r.isRegExp,u.isString=r.isString,u.isUndefined=r.isUndefined,u.lastIndexOf=e.lastIndexOf,u.mixin=d,u.noConflict=o.noConflict,u.random=o.random,u.reduce=n.reduce,u.reduceRight=n.reduceRight,u.result=o.result,u.size=n.size,u.some=n.some,u.sortedIndex=e.sortedIndex,u.template=o.template,u.unescape=o.unescape,u.uniqueId=o.uniqueId,u.all=n.every,u.any=n.some,u.detect=n.find,u.findWhere=n.findWhere,u.foldl=n.reduce,u.foldr=n.reduceRight,u.include=n.contains,u.inject=n.reduce,u.first=e.first,u.last=e.last,u.sample=n.sample,u.take=e.first,u.head=e.first,d(u),u.VERSION="2.4.1",u.prototype.chain=t.wrapperChain,u.prototype.value=t.wrapperValueOf,s(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=h[e];u.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),c.spliceObjects||0!==e.length||delete e[0],this}}),s(["concat","join","slice"],function(e){var t=h[e];u.prototype[e]=function(){var e=this.__wrapped__,n=t.apply(e,arguments);return this.__chain__&&(n=new l(n),n.__chain__=!0),n}}),u.support=c,(u.templateSettings=o.templateSettings).imports._=u,u}),define("underscore",["underscore/main"],function(e){return e}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=Q.type(e);return"function"===n||Q.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(Q.isFunction(t))return Q.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return Q.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(at.test(t))return Q.filter(t,e,n);t=Q.filter(t,e)}return Q.grep(e,function(e){return Y.call(t,e)>=0!==n})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=pt[e]={};return Q.each(e.match(ft)||[],function(e,n){t[n]=!0}),t}function s(){Z.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1),Q.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Q.expando+Math.random()}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(wt,"-$1").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:bt.test(n)?Q.parseJSON(n):n}catch(r){}yt.set(e,t,n)}else n=void 0;return n}function d(){return!0}function c(){return!1}function u(){try{return Z.activeElement}catch(e){}}function h(e,t){return Q.nodeName(e,"table")&&Q.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function f(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function p(e){var t=Pt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var n=0,i=e.length;i>n;n++)gt.set(e[n],"globalEval",!t||gt.get(t[n],"globalEval"))}function v(e,t){var n,i,r,o,s,a,l,d;if(1===t.nodeType){if(gt.hasData(e)&&(o=gt.access(e),s=gt.set(t,o),d=o.events)){delete s.handle,s.events={};for(r in d)for(n=0,i=d[r].length;i>n;n++)Q.event.add(t,r,d[r][n])}yt.hasData(e)&&(a=yt.access(e),l=Q.extend({},a),yt.set(t,l))}}function g(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Q.nodeName(e,t)?Q.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&kt.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function b(t,n){var i,r=Q(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(r[0]))?i.display:Q.css(r[0],"display");return r.detach(),o}function w(e){var t=Z,n=Lt[e];return n||(n=b(e,t),"none"!==n&&n||(Bt=(Bt||Q("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Bt[0].contentDocument,t.write(),t.close(),n=b(e,t),Bt.detach()),Lt[e]=n),n}function x(e,t,n){var i,r,o,s,a=e.style;return n=n||Wt(e),n&&(s=n.getPropertyValue(t)||n[t]),n&&(""!==s||Q.contains(e.ownerDocument,e)||(s=Q.style(e,t)),Ht.test(s)&&qt.test(t)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function T(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function C(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),i=t,r=Jt.length;r--;)if(t=Jt[r]+n,t in e)return t;return i}function k(e,t,n){var i=Ut.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function _(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=Q.css(e,n+Tt[o],!0,r)),i?("content"===n&&(s-=Q.css(e,"padding"+Tt[o],!0,r)),"margin"!==n&&(s-=Q.css(e,"border"+Tt[o]+"Width",!0,r))):(s+=Q.css(e,"padding"+Tt[o],!0,r),"padding"!==n&&(s+=Q.css(e,"border"+Tt[o]+"Width",!0,r)));return s}function D(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=Wt(e),s="border-box"===Q.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=x(e,t,o),(0>r||null==r)&&(r=e.style[t]),Ht.test(r))return r;i=s&&(X.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+_(e,t,n||(s?"border":"content"),i,o)+"px"}function S(e,t){for(var n,i,r,o=[],s=0,a=e.length;a>s;s++)i=e[s],i.style&&(o[s]=gt.get(i,"olddisplay"),n=i.style.display,t?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&Ct(i)&&(o[s]=gt.access(i,"olddisplay",w(i.nodeName)))):(r=Ct(i),"none"===n&&r||gt.set(i,"olddisplay",r?n:Q.css(i,"display"))));for(s=0;a>s;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function M(e,t,n,i,r){return new M.prototype.init(e,t,n,i,r)}function A(){return setTimeout(function(){Xt=void 0}),Xt=Q.now()}function E(e,t){var n,i=0,r={height:e};for(t=t?1:0;4>i;i+=2-t)n=Tt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function F(e,t,n){for(var i,r=(nn[t]||[]).concat(nn["*"]),o=0,s=r.length;s>o;o++)if(i=r[o].call(n,t,e))return i}function j(e,t,n){var i,r,o,s,a,l,d,c,u=this,h={},f=e.style,p=e.nodeType&&Ct(e),m=gt.get(e,"fxshow");n.queue||(a=Q._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,Q.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],d=Q.css(e,"display"),c="none"===d?gt.get(e,"olddisplay")||w(e.nodeName):d,"inline"===c&&"none"===Q.css(e,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",u.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],Kt.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;p=!0}h[i]=m&&m[i]||Q.style(e,i)}else d=void 0;if(Q.isEmptyObject(h))"inline"===("none"===d?w(e.nodeName):d)&&(f.display=d);else{m?"hidden"in m&&(p=m.hidden):m=gt.access(e,"fxshow",{}),o&&(m.hidden=!p),p?Q(e).show():u.done(function(){Q(e).hide()}),u.done(function(){var t;gt.remove(e,"fxshow");for(t in h)Q.style(e,t,h[t])});for(i in h)s=F(p?m[i]:0,i,u),i in m||(m[i]=s.start,p&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function O(e,t){var n,i,r,o,s;for(n in e)if(i=Q.camelCase(n),r=t[i],o=e[n],Q.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),s=Q.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function N(e,t,n){var i,r,o=0,s=tn.length,a=Q.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Xt||A(),n=Math.max(0,d.startTime+d.duration-t),i=n/d.duration||0,o=1-i,s=0,l=d.tweens.length;l>s;s++)d.tweens[s].run(o);return a.notifyWith(e,[d,o,n]),1>o&&l?n:(a.resolveWith(e,[d]),!1)},d=a.promise({elem:e,props:Q.extend({},t),opts:Q.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xt||A(),duration:n.duration,tweens:[],createTween:function(t,n){var i=Q.Tween(e,d.opts,t,n,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(i),i},stop:function(t){var n=0,i=t?d.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)d.tweens[n].run(1);return t?a.resolveWith(e,[d,t]):a.rejectWith(e,[d,t]),this}}),c=d.props;for(O(c,d.opts.specialEasing);s>o;o++)if(i=tn[o].call(d,e,c,d.opts))return i;return Q.map(c,F,d),Q.isFunction(d.opts.start)&&d.opts.start.call(e,d),Q.fx.timer(Q.extend(l,{elem:e,anim:d,queue:d.opts.queue})),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always)}function I(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(ft)||[];if(Q.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function P(e,t,n,i){function r(a){var l;return o[a]=!0,Q.each(e[a]||[],function(e,a){var d=a(t,n,i);return"string"!=typeof d||s||o[d]?s?!(l=d):void 0:(t.dataTypes.unshift(d),r(d),!1)}),l}var o={},s=e===Tn;return r(t.dataTypes[0])||!o["*"]&&r("*")}function R(e,t){var n,i,r=Q.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&Q.extend(!0,e,i),e}function V(e,t,n){for(var i,r,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function B(e,t,n,i){var r,o,s,a,l,d={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)d[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=d[l+" "+o]||d["* "+o],!s)for(r in d)if(a=r.split(" "),a[1]===o&&(s=d[l+" "+a[0]]||d["* "+a[0]])){s===!0?s=d[r]:d[r]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(u){return{state:"parsererror",error:s?u:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function L(e,t,n,i){var r;if(Q.isArray(t))Q.each(t,function(t,r){n||Dn.test(e)?i(e,r):L(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==Q.type(t))i(e,t);else for(r in t)L(e+"["+r+"]",t[r],n,i)}function q(e){return Q.isWindow(e)?e:9===e.nodeType&&e.defaultView
}var H=[],W=H.slice,z=H.concat,U=H.push,Y=H.indexOf,$={},G=$.toString,J=$.hasOwnProperty,X={},Z=e.document,K="2.1.1",Q=function(e,t){return new Q.fn.init(e,t)},et=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,tt=/^-ms-/,nt=/-([\da-z])/gi,it=function(e,t){return t.toUpperCase()};Q.fn=Q.prototype={jquery:K,constructor:Q,selector:"",length:0,toArray:function(){return W.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:W.call(this)},pushStack:function(e){var t=Q.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Q.each(this,e,t)},map:function(e){return this.pushStack(Q.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(W.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:H.sort,splice:H.splice},Q.extend=Q.fn.extend=function(){var e,t,n,i,r,o,s=arguments[0]||{},a=1,l=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[a]||{},a++),"object"==typeof s||Q.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],i=e[t],s!==i&&(d&&i&&(Q.isPlainObject(i)||(r=Q.isArray(i)))?(r?(r=!1,o=n&&Q.isArray(n)?n:[]):o=n&&Q.isPlainObject(n)?n:{},s[t]=Q.extend(d,o,i)):void 0!==i&&(s[t]=i));return s},Q.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Q.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Q.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"!==Q.type(e)||e.nodeType||Q.isWindow(e)?!1:e.constructor&&!J.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?$[G.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=Q.trim(e),e&&(1===e.indexOf("use strict")?(t=Z.createElement("script"),t.text=e,Z.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(tt,"ms-").replace(nt,it)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,o=0,s=e.length,a=n(e);if(i){if(a)for(;s>o&&(r=t.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],i),r===!1)break}else if(a)for(;s>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(et,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?Q.merge(i,"string"==typeof e?[e]:e):U.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:Y.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,s=e.length,a=!n;s>o;o++)i=!t(e[o],o),i!==a&&r.push(e[o]);return r},map:function(e,t,i){var r,o=0,s=e.length,a=n(e),l=[];if(a)for(;s>o;o++)r=t(e[o],o,i),null!=r&&l.push(r);else for(o in e)r=t(e[o],o,i),null!=r&&l.push(r);return z.apply([],l)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(n=e[t],t=e,e=n),Q.isFunction(e)?(i=W.call(arguments,2),r=function(){return e.apply(t||this,i.concat(W.call(arguments)))},r.guid=e.guid=e.guid||Q.guid++,r):void 0},now:Date.now,support:X}),Q.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){$["[object "+t+"]"]=t.toLowerCase()});var rt=function(e){function t(e,t,n,i){var r,o,s,a,l,d,u,f,p,m;if((t?t.ownerDocument||t:L)!==j&&F(t),t=t||j,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(N&&!i){if(r=yt.exec(e))if(s=r[1]){if(9===a){if(o=t.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&V(t,o)&&o.id===s)return n.push(o),n}else{if(r[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((s=r[3])&&x.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(s)),n}if(x.qsa&&(!I||!I.test(e))){if(f=u=B,p=t,m=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(d=_(e),(u=t.getAttribute("id"))?f=u.replace(wt,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",l=d.length;l--;)d[l]=f+h(d[l]);p=bt.test(e)&&c(t.parentNode)||t,m=d.join(",")}if(m)try{return Q.apply(n,p.querySelectorAll(m)),n}catch(v){}finally{u||t.removeAttribute("id")}}}return S(e.replace(lt,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>T.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[B]=!0,e}function r(e){var t=j.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=e.length;i--;)T.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function d(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function c(e){return e&&typeof e.getElementsByTagName!==$&&e}function u(){}function h(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=H++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,s){var a,l,d=[q,o];if(s){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(l=t[B]||(t[B]={}),(a=l[i])&&a[0]===q&&a[1]===o)return d[2]=a[2];if(l[i]=d,d[2]=e(t,n,s))return!0}}}function p(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,o=n.length;o>r;r++)t(e,n[r],i);return i}function v(e,t,n,i,r){for(var o,s=[],a=0,l=e.length,d=null!=t;l>a;a++)(o=e[a])&&(!n||n(o,i,r))&&(s.push(o),d&&t.push(a));return s}function g(e,t,n,r,o,s){return r&&!r[B]&&(r=g(r)),o&&!o[B]&&(o=g(o,s)),i(function(i,s,a,l){var d,c,u,h=[],f=[],p=s.length,g=i||m(t||"*",a.nodeType?[a]:a,[]),y=!e||!i&&t?g:v(g,h,e,a,l),b=n?o||(i?e:p||r)?[]:s:y;if(n&&n(y,b,a,l),r)for(d=v(b,f),r(d,[],a,l),c=d.length;c--;)(u=d[c])&&(b[f[c]]=!(y[f[c]]=u));if(i){if(o||e){if(o){for(d=[],c=b.length;c--;)(u=b[c])&&d.push(y[c]=u);o(null,b=[],d,l)}for(c=b.length;c--;)(u=b[c])&&(d=o?tt.call(i,u):h[c])>-1&&(i[d]=!(s[d]=u))}}else b=v(b===s?b.splice(p,b.length):b),o?o(null,s,b,l):Q.apply(s,b)})}function y(e){for(var t,n,i,r=e.length,o=T.relative[e[0].type],s=o||T.relative[" "],a=o?1:0,l=f(function(e){return e===t},s,!0),d=f(function(e){return tt.call(t,e)>-1},s,!0),c=[function(e,n,i){return!o&&(i||n!==M)||((t=n).nodeType?l(e,n,i):d(e,n,i))}];r>a;a++)if(n=T.relative[e[a].type])c=[f(p(c),n)];else{if(n=T.filter[e[a].type].apply(null,e[a].matches),n[B]){for(i=++a;r>i&&!T.relative[e[i].type];i++);return g(a>1&&p(c),a>1&&h(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(lt,"$1"),n,i>a&&y(e.slice(a,i)),r>i&&y(e=e.slice(i)),r>i&&h(e))}c.push(n)}return p(c)}function b(e,n){var r=n.length>0,o=e.length>0,s=function(i,s,a,l,d){var c,u,h,f=0,p="0",m=i&&[],g=[],y=M,b=i||o&&T.find.TAG("*",d),w=q+=null==y?1:Math.random()||.1,x=b.length;for(d&&(M=s!==j&&s);p!==x&&null!=(c=b[p]);p++){if(o&&c){for(u=0;h=e[u++];)if(h(c,s,a)){l.push(c);break}d&&(q=w)}r&&((c=!h&&c)&&f--,i&&m.push(c))}if(f+=p,r&&p!==f){for(u=0;h=n[u++];)h(m,g,s,a);if(i){if(f>0)for(;p--;)m[p]||g[p]||(g[p]=Z.call(l));g=v(g)}Q.apply(l,g),d&&!i&&g.length>0&&f+n.length>1&&t.uniqueSort(l)}return d&&(q=w,M=y),m};return r?i(s):s}var w,x,T,C,k,_,D,S,M,A,E,F,j,O,N,I,P,R,V,B="sizzle"+-new Date,L=e.document,q=0,H=0,W=n(),z=n(),U=n(),Y=function(e,t){return e===t&&(E=!0),0},$="undefined",G=1<<31,J={}.hasOwnProperty,X=[],Z=X.pop,K=X.push,Q=X.push,et=X.slice,tt=X.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=rt.replace("w","w#"),st="\\["+it+"*("+rt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+it+"*\\]",at=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+st+")*)|.*)\\)|)",lt=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),dt=new RegExp("^"+it+"*,"+it+"*"),ct=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ut=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),ht=new RegExp(at),ft=new RegExp("^"+ot+"$"),pt={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,vt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,wt=/'|\\/g,xt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),Tt=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Q.apply(X=et.call(L.childNodes),L.childNodes),X[L.childNodes.length].nodeType}catch(Ct){Q={apply:X.length?function(e,t){K.apply(e,et.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}x=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},F=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:L,i=n.defaultView;return n!==j&&9===n.nodeType&&n.documentElement?(j=n,O=n.documentElement,N=!k(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){F()},!1):i.attachEvent&&i.attachEvent("onunload",function(){F()})),x.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=r(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=gt.test(n.getElementsByClassName)&&r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),x.getById=r(function(e){return O.appendChild(e).id=B,!n.getElementsByName||!n.getElementsByName(B).length}),x.getById?(T.find.ID=function(e,t){if(typeof t.getElementById!==$&&N){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(e){var t=e.replace(xt,Tt);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(xt,Tt);return function(e){var n=typeof e.getAttributeNode!==$&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=x.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==$?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},T.find.CLASS=x.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==$&&N?t.getElementsByClassName(e):void 0},P=[],I=[],(x.qsa=gt.test(n.querySelectorAll))&&(r(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&I.push("[*^$]="+it+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||I.push("\\["+it+"*(?:value|"+nt+")"),e.querySelectorAll(":checked").length||I.push(":checked")}),r(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&I.push("name"+it+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),I.push(",.*:")})),(x.matchesSelector=gt.test(R=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(e){x.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),P.push("!=",at)}),I=I.length&&new RegExp(I.join("|")),P=P.length&&new RegExp(P.join("|")),t=gt.test(O.compareDocumentPosition),V=t||gt.test(O.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Y=t?function(e,t){if(e===t)return E=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!x.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===L&&V(L,e)?-1:t===n||t.ownerDocument===L&&V(L,t)?1:A?tt.call(A,e)-tt.call(A,t):0:4&i?-1:1)}:function(e,t){if(e===t)return E=!0,0;var i,r=0,o=e.parentNode,a=t.parentNode,l=[e],d=[t];if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:A?tt.call(A,e)-tt.call(A,t):0;if(o===a)return s(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)d.unshift(i);for(;l[r]===d[r];)r++;return r?s(l[r],d[r]):l[r]===L?-1:d[r]===L?1:0},n):j},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==j&&F(e),n=n.replace(ut,"='$1']"),!(!x.matchesSelector||!N||P&&P.test(n)||I&&I.test(n)))try{var i=R.call(e,n);if(i||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,j,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==j&&F(e),V(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==j&&F(e);var n=T.attrHandle[t.toLowerCase()],i=n&&J.call(T.attrHandle,t.toLowerCase())?n(e,t,!N):void 0;return void 0!==i?i:x.attributes||!N?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(E=!x.detectDuplicates,A=!x.sortStable&&e.slice(0),e.sort(Y),E){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return A=null,e},C=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=C(t);return n},T=t.selectors={cacheLength:50,createPseudo:i,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xt,Tt),e[3]=(e[3]||e[4]||e[5]||"").replace(xt,Tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ht.test(n)&&(t=_(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xt,Tt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+it+")"+e+"("+it+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==$&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var d,c,u,h,f,p,m=o!==s?"nextSibling":"previousSibling",v=t.parentNode,g=a&&t.nodeName.toLowerCase(),y=!l&&!a;if(v){if(o){for(;m;){for(u=t;u=u[m];)if(a?u.nodeName.toLowerCase()===g:1===u.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?v.firstChild:v.lastChild],s&&y){for(c=v[B]||(v[B]={}),d=c[e]||[],f=d[0]===q&&d[1],h=d[0]===q&&d[2],u=f&&v.childNodes[f];u=++f&&u&&u[m]||(h=f=0)||p.pop();)if(1===u.nodeType&&++h&&u===t){c[e]=[q,f,h];break}}else if(y&&(d=(t[B]||(t[B]={}))[e])&&d[0]===q)h=d[1];else for(;(u=++f&&u&&u[m]||(h=f=0)||p.pop())&&((a?u.nodeName.toLowerCase()!==g:1!==u.nodeType)||!++h||(y&&((u[B]||(u[B]={}))[e]=[q,h]),u!==t)););return h-=r,h===i||h%i===0&&h/i>=0}}},PSEUDO:function(e,n){var r,o=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[B]?o(n):o.length>1?(r=[e,e,"",n],T.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),s=r.length;s--;)i=tt.call(e,r[s]),e[i]=!(t[i]=r[s])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=D(e.replace(lt,"$1"));return r[B]?i(function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:i(function(e){return ft.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(xt,Tt).toLowerCase(),function(t){var n;do if(n=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===j.activeElement&&(!j.hasFocus||j.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return vt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:d(function(){return[0]}),last:d(function(e,t){return[t-1]}),eq:d(function(e,t,n){return[0>n?n+t:n]}),even:d(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:d(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:d(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:d(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},T.pseudos.nth=T.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})T.pseudos[w]=l(w);return u.prototype=T.filters=T.pseudos,T.setFilters=new u,_=t.tokenize=function(e,n){var i,r,o,s,a,l,d,c=z[e+" "];if(c)return n?0:c.slice(0);for(a=e,l=[],d=T.preFilter;a;){(!i||(r=dt.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),i=!1,(r=ct.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(lt," ")}),a=a.slice(i.length));for(s in T.filter)!(r=pt[s].exec(a))||d[s]&&!(r=d[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):z(e,l).slice(0)},D=t.compile=function(e,t){var n,i=[],r=[],o=U[e+" "];if(!o){for(t||(t=_(e)),n=t.length;n--;)o=y(t[n]),o[B]?i.push(o):r.push(o);o=U(e,b(r,i)),o.selector=e}return o},S=t.select=function(e,t,n,i){var r,o,s,a,l,d="function"==typeof e&&e,u=!i&&_(e=d.selector||e);if(n=n||[],1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&x.getById&&9===t.nodeType&&N&&T.relative[o[1].type]){if(t=(T.find.ID(s.matches[0].replace(xt,Tt),t)||[])[0],!t)return n;d&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=pt.needsContext.test(e)?0:o.length;r--&&(s=o[r],!T.relative[a=s.type]);)if((l=T.find[a])&&(i=l(s.matches[0].replace(xt,Tt),bt.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&h(o),!e)return Q.apply(n,i),n;break}}return(d||D(e,u))(i,t,!N,n,bt.test(e)&&c(t.parentNode)||t),n},x.sortStable=B.split("").sort(Y).join("")===B,x.detectDuplicates=!!E,F(),x.sortDetached=r(function(e){return 1&e.compareDocumentPosition(j.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(nt,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);Q.find=rt,Q.expr=rt.selectors,Q.expr[":"]=Q.expr.pseudos,Q.unique=rt.uniqueSort,Q.text=rt.getText,Q.isXMLDoc=rt.isXML,Q.contains=rt.contains;var ot=Q.expr.match.needsContext,st=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,at=/^.[^:#\[\.,]*$/;Q.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?Q.find.matchesSelector(i,e)?[i]:[]:Q.find.matches(e,Q.grep(t,function(e){return 1===e.nodeType}))},Q.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(Q(e).filter(function(){for(t=0;n>t;t++)if(Q.contains(r[t],this))return!0}));for(t=0;n>t;t++)Q.find(e,r[t],i);return i=this.pushStack(n>1?Q.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&ot.test(e)?Q(e):e||[],!1).length}});var lt,dt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ct=Q.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:dt.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||lt).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Q?t[0]:t,Q.merge(this,Q.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:Z,!0)),st.test(n[1])&&Q.isPlainObject(t))for(n in t)Q.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return i=Z.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=Z,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Q.isFunction(e)?"undefined"!=typeof lt.ready?lt.ready(e):e(Q):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Q.makeArray(e,this))};ct.prototype=Q.fn,lt=Q(Z);var ut=/^(?:parents|prev(?:Until|All))/,ht={children:!0,contents:!0,next:!0,prev:!0};Q.extend({dir:function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&Q(e).is(n))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Q.fn.extend({has:function(e){var t=Q(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(Q.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],s=ot.test(e)||"string"!=typeof e?Q(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&Q.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Q.unique(o):o)},index:function(e){return e?"string"==typeof e?Y.call(Q(e),this[0]):Y.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Q.unique(Q.merge(this.get(),Q(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Q.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Q.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Q.dir(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return Q.dir(e,"nextSibling")},prevAll:function(e){return Q.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Q.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Q.dir(e,"previousSibling",n)},siblings:function(e){return Q.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Q.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Q.merge([],e.childNodes)}},function(e,t){Q.fn[e]=function(n,i){var r=Q.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=Q.filter(i,r)),this.length>1&&(ht[e]||Q.unique(r),ut.test(e)&&r.reverse()),this.pushStack(r)}});var ft=/\S+/g,pt={};Q.Callbacks=function(e){e="string"==typeof e?pt[e]||o(e):Q.extend({},e);var t,n,i,r,s,a,l=[],d=!e.once&&[],c=function(o){for(t=e.memory&&o,n=!0,a=r||0,r=0,s=l.length,i=!0;l&&s>a;a++)if(l[a].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,l&&(d?d.length&&c(d.shift()):t?l=[]:u.disable())},u={add:function(){if(l){var n=l.length;!function o(t){Q.each(t,function(t,n){var i=Q.type(n);"function"===i?e.unique&&u.has(n)||l.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),i?s=l.length:t&&(r=n,c(t))}return this},remove:function(){return l&&Q.each(arguments,function(e,t){for(var n;(n=Q.inArray(t,l,n))>-1;)l.splice(n,1),i&&(s>=n&&s--,a>=n&&a--)}),this},has:function(e){return e?Q.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=d=t=void 0,this},disabled:function(){return!l},lock:function(){return d=void 0,t||u.disable(),this},locked:function(){return!d},fireWith:function(e,t){return!l||n&&!d||(t=t||[],t=[e,t.slice?t.slice():t],i?d.push(t):c(t)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},Q.extend({Deferred:function(e){var t=[["resolve","done",Q.Callbacks("once memory"),"resolved"],["reject","fail",Q.Callbacks("once memory"),"rejected"],["notify","progress",Q.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Q.Deferred(function(n){Q.each(t,function(t,o){var s=Q.isFunction(e[t])&&e[t];r[o[1]](function(){var e=s&&s.apply(this,arguments);e&&Q.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Q.extend(e,i):i}},r={};return i.pipe=i.then,Q.each(t,function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=W.call(arguments),s=o.length,a=1!==s||e&&Q.isFunction(e.promise)?s:0,l=1===a?e:Q.Deferred(),d=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?W.call(arguments):r,i===t?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);s>r;r++)o[r]&&Q.isFunction(o[r].promise)?o[r].promise().done(d(r,i,o)).fail(l.reject).progress(d(r,n,t)):--a;return a||l.resolveWith(i,o),l.promise()}});var mt;Q.fn.ready=function(e){return Q.ready.promise().done(e),this},Q.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Q.readyWait++:Q.ready(!0)},ready:function(e){(e===!0?--Q.readyWait:Q.isReady)||(Q.isReady=!0,e!==!0&&--Q.readyWait>0||(mt.resolveWith(Z,[Q]),Q.fn.triggerHandler&&(Q(Z).triggerHandler("ready"),Q(Z).off("ready"))))}}),Q.ready.promise=function(t){return mt||(mt=Q.Deferred(),"complete"===Z.readyState?setTimeout(Q.ready):(Z.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))),mt.promise(t)},Q.ready.promise();var vt=Q.access=function(e,t,n,i,r,o,s){var a=0,l=e.length,d=null==n;if("object"===Q.type(n)){r=!0;for(a in n)Q.access(e,t,a,n[a],!0,o,s)}else if(void 0!==i&&(r=!0,Q.isFunction(i)||(s=!0),d&&(s?(t.call(e,i),t=null):(d=t,t=function(e,t,n){return d.call(Q(e),n)})),t))for(;l>a;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return r?e:d?t.call(e):l?t(e[0],n):o};Q.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},a.uid=1,a.accepts=Q.acceptData,a.prototype={key:function(e){if(!a.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=a.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,Q.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,r=this.key(e),o=this.cache[r];if("string"==typeof t)o[t]=n;else if(Q.isEmptyObject(o))Q.extend(this.cache[r],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,Q.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,o=this.key(e),s=this.cache[o];if(void 0===t)this.cache[o]={};else{Q.isArray(t)?i=t.concat(t.map(Q.camelCase)):(r=Q.camelCase(t),t in s?i=[t,r]:(i=r,i=i in s?[i]:i.match(ft)||[])),n=i.length;for(;n--;)delete s[i[n]]}},hasData:function(e){return!Q.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var gt=new a,yt=new a,bt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,wt=/([A-Z])/g;Q.extend({hasData:function(e){return yt.hasData(e)||gt.hasData(e)},data:function(e,t,n){return yt.access(e,t,n)},removeData:function(e,t){yt.remove(e,t)},_data:function(e,t,n){return gt.access(e,t,n)},_removeData:function(e,t){gt.remove(e,t)}}),Q.fn.extend({data:function(e,t){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(r=yt.get(o),1===o.nodeType&&!gt.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=Q.camelCase(i.slice(5)),l(o,i,r[i])));gt.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){yt.set(this,e)}):vt(this,function(t){var n,i=Q.camelCase(e);if(o&&void 0===t){if(n=yt.get(o,e),void 0!==n)return n;if(n=yt.get(o,i),void 0!==n)return n;if(n=l(o,i,void 0),void 0!==n)return n}else this.each(function(){var n=yt.get(this,i);yt.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&yt.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){yt.remove(this,e)})}}),Q.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=gt.get(e,t),n&&(!i||Q.isArray(n)?i=gt.access(e,t,Q.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=Q.queue(e,t),i=n.length,r=n.shift(),o=Q._queueHooks(e,t),s=function(){Q.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return gt.get(e,n)||gt.access(e,n,{empty:Q.Callbacks("once memory").add(function(){gt.remove(e,[t+"queue",n])
})})}}),Q.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Q.queue(this[0],e):void 0===t?this:this.each(function(){var n=Q.queue(this,e,t);Q._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Q.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Q.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=Q.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=gt.get(o[s],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var xt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Tt=["Top","Right","Bottom","Left"],Ct=function(e,t){return e=t||e,"none"===Q.css(e,"display")||!Q.contains(e.ownerDocument,e)},kt=/^(?:checkbox|radio)$/i;!function(){var e=Z.createDocumentFragment(),t=e.appendChild(Z.createElement("div")),n=Z.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),X.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",X.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var _t="undefined";X.focusinBubbles="onfocusin"in e;var Dt=/^key/,St=/^(?:mouse|pointer|contextmenu)|click/,Mt=/^(?:focusinfocus|focusoutblur)$/,At=/^([^.]*)(?:\.(.+)|)$/;Q.event={global:{},add:function(e,t,n,i,r){var o,s,a,l,d,c,u,h,f,p,m,v=gt.get(e);if(v)for(n.handler&&(o=n,n=o.handler,r=o.selector),n.guid||(n.guid=Q.guid++),(l=v.events)||(l=v.events={}),(s=v.handle)||(s=v.handle=function(t){return typeof Q!==_t&&Q.event.triggered!==t.type?Q.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(ft)||[""],d=t.length;d--;)a=At.exec(t[d])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f&&(u=Q.event.special[f]||{},f=(r?u.delegateType:u.bindType)||f,u=Q.event.special[f]||{},c=Q.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&Q.expr.match.needsContext.test(r),namespace:p.join(".")},o),(h=l[f])||(h=l[f]=[],h.delegateCount=0,u.setup&&u.setup.call(e,i,p,s)!==!1||e.addEventListener&&e.addEventListener(f,s,!1)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,c):h.push(c),Q.event.global[f]=!0)},remove:function(e,t,n,i,r){var o,s,a,l,d,c,u,h,f,p,m,v=gt.hasData(e)&&gt.get(e);if(v&&(l=v.events)){for(t=(t||"").match(ft)||[""],d=t.length;d--;)if(a=At.exec(t[d])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f){for(u=Q.event.special[f]||{},f=(i?u.delegateType:u.bindType)||f,h=l[f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=h.length;o--;)c=h[o],!r&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(h.splice(o,1),c.selector&&h.delegateCount--,u.remove&&u.remove.call(e,c));s&&!h.length&&(u.teardown&&u.teardown.call(e,p,v.handle)!==!1||Q.removeEvent(e,f,v.handle),delete l[f])}else for(f in l)Q.event.remove(e,f+t[d],n,i,!0);Q.isEmptyObject(l)&&(delete v.handle,gt.remove(e,"events"))}},trigger:function(t,n,i,r){var o,s,a,l,d,c,u,h=[i||Z],f=J.call(t,"type")?t.type:t,p=J.call(t,"namespace")?t.namespace.split("."):[];if(s=a=i=i||Z,3!==i.nodeType&&8!==i.nodeType&&!Mt.test(f+Q.event.triggered)&&(f.indexOf(".")>=0&&(p=f.split("."),f=p.shift(),p.sort()),d=f.indexOf(":")<0&&"on"+f,t=t[Q.expando]?t:new Q.Event(f,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=p.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:Q.makeArray(n,[t]),u=Q.event.special[f]||{},r||!u.trigger||u.trigger.apply(i,n)!==!1)){if(!r&&!u.noBubble&&!Q.isWindow(i)){for(l=u.delegateType||f,Mt.test(l+f)||(s=s.parentNode);s;s=s.parentNode)h.push(s),a=s;a===(i.ownerDocument||Z)&&h.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=h[o++])&&!t.isPropagationStopped();)t.type=o>1?l:u.bindType||f,c=(gt.get(s,"events")||{})[t.type]&&gt.get(s,"handle"),c&&c.apply(s,n),c=d&&s[d],c&&c.apply&&Q.acceptData(s)&&(t.result=c.apply(s,n),t.result===!1&&t.preventDefault());return t.type=f,r||t.isDefaultPrevented()||u._default&&u._default.apply(h.pop(),n)!==!1||!Q.acceptData(i)||d&&Q.isFunction(i[f])&&!Q.isWindow(i)&&(a=i[d],a&&(i[d]=null),Q.event.triggered=f,i[f](),Q.event.triggered=void 0,a&&(i[d]=a)),t.result}},dispatch:function(e){e=Q.event.fix(e);var t,n,i,r,o,s=[],a=W.call(arguments),l=(gt.get(this,"events")||{})[e.type]||[],d=Q.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!d.preDispatch||d.preDispatch.call(this,e)!==!1){for(s=Q.event.handlers.call(this,e,l),t=0;(r=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((Q.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(i=[],n=0;a>n;n++)o=t[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?Q(r,this).index(l)>=0:Q.find(r,this,null,[l]).length),i[r]&&i.push(o);i.length&&s.push({elem:l,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||Z,i=n.documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[Q.expando])return e;var t,n,i,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=St.test(r)?this.mouseHooks:Dt.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new Q.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=Z),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==u()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Q.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Q.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=Q.extend(new Q.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?Q.event.trigger(r,null,t):Q.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},Q.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},Q.Event=function(e,t){return this instanceof Q.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?d:c):this.type=e,t&&Q.extend(this,t),this.timeStamp=e&&e.timeStamp||Q.now(),void(this[Q.expando]=!0)):new Q.Event(e,t)},Q.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=d,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=d,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=d,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Q.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Q.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==i&&!Q.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),X.focusinBubbles||Q.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Q.event.simulate(t,e.target,Q.event.fix(e),!0)};Q.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=gt.access(i,t);r||i.addEventListener(e,n,!0),gt.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=gt.access(i,t)-1;r?gt.access(i,t,r):(i.removeEventListener(e,n,!0),gt.remove(i,t))}}}),Q.fn.extend({on:function(e,t,n,i,r){var o,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=c;else if(!i)return this;return 1===r&&(o=i,i=function(e){return Q().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=Q.guid++)),this.each(function(){Q.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,Q(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=c),this.each(function(){Q.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){Q.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?Q.event.trigger(e,t,n,!0):void 0}});var Et=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ft=/<([\w:]+)/,jt=/<|&#?\w+;/,Ot=/<(?:script|style|link)/i,Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,It=/^$|\/(?:java|ecma)script/i,Pt=/^true\/(.*)/,Rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Vt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Vt.optgroup=Vt.option,Vt.tbody=Vt.tfoot=Vt.colgroup=Vt.caption=Vt.thead,Vt.th=Vt.td,Q.extend({clone:function(e,t,n){var i,r,o,s,a=e.cloneNode(!0),l=Q.contains(e.ownerDocument,e);if(!(X.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Q.isXMLDoc(e)))for(s=g(a),o=g(e),i=0,r=o.length;r>i;i++)y(o[i],s[i]);if(t)if(n)for(o=o||g(e),s=s||g(a),i=0,r=o.length;r>i;i++)v(o[i],s[i]);else v(e,a);return s=g(a,"script"),s.length>0&&m(s,!l&&g(e,"script")),a},buildFragment:function(e,t,n,i){for(var r,o,s,a,l,d,c=t.createDocumentFragment(),u=[],h=0,f=e.length;f>h;h++)if(r=e[h],r||0===r)if("object"===Q.type(r))Q.merge(u,r.nodeType?[r]:r);else if(jt.test(r)){for(o=o||c.appendChild(t.createElement("div")),s=(Ft.exec(r)||["",""])[1].toLowerCase(),a=Vt[s]||Vt._default,o.innerHTML=a[1]+r.replace(Et,"<$1></$2>")+a[2],d=a[0];d--;)o=o.lastChild;Q.merge(u,o.childNodes),o=c.firstChild,o.textContent=""}else u.push(t.createTextNode(r));for(c.textContent="",h=0;r=u[h++];)if((!i||-1===Q.inArray(r,i))&&(l=Q.contains(r.ownerDocument,r),o=g(c.appendChild(r),"script"),l&&m(o),n))for(d=0;r=o[d++];)It.test(r.type||"")&&n.push(r);return c},cleanData:function(e){for(var t,n,i,r,o=Q.event.special,s=0;void 0!==(n=e[s]);s++){if(Q.acceptData(n)&&(r=n[gt.expando],r&&(t=gt.cache[r]))){if(t.events)for(i in t.events)o[i]?Q.event.remove(n,i):Q.removeEvent(n,i,t.handle);gt.cache[r]&&delete gt.cache[r]}delete yt.cache[n[yt.expando]]}}}),Q.fn.extend({text:function(e){return vt(this,function(e){return void 0===e?Q.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?Q.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||Q.cleanData(g(n)),n.parentNode&&(t&&Q.contains(n.ownerDocument,n)&&m(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Q.cleanData(g(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Q.clone(this,e,t)})},html:function(e){return vt(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ot.test(e)&&!Vt[(Ft.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Et,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(Q.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Q.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=z.apply([],e);var n,i,r,o,s,a,l=0,d=this.length,c=this,u=d-1,h=e[0],m=Q.isFunction(h);if(m||d>1&&"string"==typeof h&&!X.checkClone&&Nt.test(h))return this.each(function(n){var i=c.eq(n);m&&(e[0]=h.call(this,n,i.html())),i.domManip(e,t)});if(d&&(n=Q.buildFragment(e,this[0].ownerDocument,!1,this),i=n.firstChild,1===n.childNodes.length&&(n=i),i)){for(r=Q.map(g(n,"script"),f),o=r.length;d>l;l++)s=n,l!==u&&(s=Q.clone(s,!0,!0),o&&Q.merge(r,g(s,"script"))),t.call(this[l],s,l);if(o)for(a=r[r.length-1].ownerDocument,Q.map(r,p),l=0;o>l;l++)s=r[l],It.test(s.type||"")&&!gt.access(s,"globalEval")&&Q.contains(a,s)&&(s.src?Q._evalUrl&&Q._evalUrl(s.src):Q.globalEval(s.textContent.replace(Rt,"")))}return this}}),Q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Q.fn[e]=function(e){for(var n,i=[],r=Q(e),o=r.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),Q(r[s])[t](n),U.apply(i,n.get());return this.pushStack(i)}});var Bt,Lt={},qt=/^margin/,Ht=new RegExp("^("+xt+")(?!px)[a-z%]+$","i"),Wt=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(o);var t=e.getComputedStyle(s,null);n="1%"!==t.top,i="4px"===t.width,r.removeChild(o)}var n,i,r=Z.documentElement,o=Z.createElement("div"),s=Z.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",X.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),e.getComputedStyle&&Q.extend(X,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},reliableMarginRight:function(){var t,n=s.appendChild(Z.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",r.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),r.removeChild(o),t}}))}(),Q.swap=function(e,t,n,i){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=s[o];return r};var zt=/^(none|table(?!-c[ea]).+)/,Ut=new RegExp("^("+xt+")(.*)$","i"),Yt=new RegExp("^([+-])=("+xt+")","i"),$t={position:"absolute",visibility:"hidden",display:"block"},Gt={letterSpacing:"0",fontWeight:"400"},Jt=["Webkit","O","Moz","ms"];Q.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=x(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,a=Q.camelCase(t),l=e.style;return t=Q.cssProps[a]||(Q.cssProps[a]=C(l,a)),s=Q.cssHooks[t]||Q.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:l[t]:(o=typeof n,"string"===o&&(r=Yt.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(Q.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||Q.cssNumber[a]||(n+="px"),X.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(l[t]=n)),void 0)}},css:function(e,t,n,i){var r,o,s,a=Q.camelCase(t);return t=Q.cssProps[a]||(Q.cssProps[a]=C(e.style,a)),s=Q.cssHooks[t]||Q.cssHooks[a],s&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=x(e,t,i)),"normal"===r&&t in Gt&&(r=Gt[t]),""===n||n?(o=parseFloat(r),n===!0||Q.isNumeric(o)?o||0:r):r}}),Q.each(["height","width"],function(e,t){Q.cssHooks[t]={get:function(e,n,i){return n?zt.test(Q.css(e,"display"))&&0===e.offsetWidth?Q.swap(e,$t,function(){return D(e,t,i)}):D(e,t,i):void 0},set:function(e,n,i){var r=i&&Wt(e);return k(e,n,i?_(e,t,i,"border-box"===Q.css(e,"boxSizing",!1,r),r):0)}}}),Q.cssHooks.marginRight=T(X.reliableMarginRight,function(e,t){return t?Q.swap(e,{display:"inline-block"},x,[e,"marginRight"]):void 0}),Q.each({margin:"",padding:"",border:"Width"},function(e,t){Q.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+Tt[i]+t]=o[i]||o[i-2]||o[0];return r}},qt.test(e)||(Q.cssHooks[e+t].set=k)}),Q.fn.extend({css:function(e,t){return vt(this,function(e,t,n){var i,r,o={},s=0;if(Q.isArray(t)){for(i=Wt(e),r=t.length;r>s;s++)o[t[s]]=Q.css(e,t[s],!1,i);return o}return void 0!==n?Q.style(e,t,n):Q.css(e,t)},e,t,arguments.length>1)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ct(this)?Q(this).show():Q(this).hide()})}}),Q.Tween=M,M.prototype={constructor:M,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(Q.cssNumber[n]?"":"px")},cur:function(){var e=M.propHooks[this.prop];return e&&e.get?e.get(this):M.propHooks._default.get(this)},run:function(e){var t,n=M.propHooks[this.prop];return this.pos=t=this.options.duration?Q.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Q.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Q.fx.step[e.prop]?Q.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Q.cssProps[e.prop]]||Q.cssHooks[e.prop])?Q.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Q.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Q.fx=M.prototype.init,Q.fx.step={};var Xt,Zt,Kt=/^(?:toggle|show|hide)$/,Qt=new RegExp("^(?:([+-])=|)("+xt+")([a-z%]*)$","i"),en=/queueHooks$/,tn=[j],nn={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=Qt.exec(t),o=r&&r[3]||(Q.cssNumber[e]?"":"px"),s=(Q.cssNumber[e]||"px"!==o&&+i)&&Qt.exec(Q.css(n.elem,e)),a=1,l=20;if(s&&s[3]!==o){o=o||s[3],r=r||[],s=+i||1;do a=a||".5",s/=a,Q.style(n.elem,e,s+o);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return r&&(s=n.start=+s||+i||0,n.unit=o,n.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),n}]};Q.Animation=Q.extend(N,{tweener:function(e,t){Q.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],nn[n]=nn[n]||[],nn[n].unshift(t)},prefilter:function(e,t){t?tn.unshift(e):tn.push(e)}}),Q.speed=function(e,t,n){var i=e&&"object"==typeof e?Q.extend({},e):{complete:n||!n&&t||Q.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Q.isFunction(t)&&t};return i.duration=Q.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Q.fx.speeds?Q.fx.speeds[i.duration]:Q.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){Q.isFunction(i.old)&&i.old.call(this),i.queue&&Q.dequeue(this,i.queue)},i},Q.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Ct).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=Q.isEmptyObject(e),o=Q.speed(t,n,i),s=function(){var t=N(this,Q.extend({},e),o);(r||gt.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=Q.timers,s=gt.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&en.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));(t||!n)&&Q.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=gt.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=Q.timers,s=i?i.length:0;for(n.finish=!0,Q.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),Q.each(["toggle","show","hide"],function(e,t){var n=Q.fn[t];Q.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(E(t,!0),e,i,r)}}),Q.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Q.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),Q.timers=[],Q.fx.tick=function(){var e,t=0,n=Q.timers;for(Xt=Q.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Q.fx.stop(),Xt=void 0},Q.fx.timer=function(e){Q.timers.push(e),e()?Q.fx.start():Q.timers.pop()},Q.fx.interval=13,Q.fx.start=function(){Zt||(Zt=setInterval(Q.fx.tick,Q.fx.interval))},Q.fx.stop=function(){clearInterval(Zt),Zt=null},Q.fx.speeds={slow:600,fast:200,_default:400},Q.fn.delay=function(e,t){return e=Q.fx?Q.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e=Z.createElement("input"),t=Z.createElement("select"),n=t.appendChild(Z.createElement("option"));e.type="checkbox",X.checkOn=""!==e.value,X.optSelected=n.selected,t.disabled=!0,X.optDisabled=!n.disabled,e=Z.createElement("input"),e.value="t",e.type="radio",X.radioValue="t"===e.value}();var rn,on,sn=Q.expr.attrHandle;Q.fn.extend({attr:function(e,t){return vt(this,Q.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Q.removeAttr(this,e)})}}),Q.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===_t?Q.prop(e,t,n):(1===o&&Q.isXMLDoc(e)||(t=t.toLowerCase(),i=Q.attrHooks[t]||(Q.expr.match.bool.test(t)?on:rn)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=Q.find.attr(e,t),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void Q.removeAttr(e,t))},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(ft);if(o&&1===e.nodeType)for(;n=o[r++];)i=Q.propFix[n]||n,Q.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!X.radioValue&&"radio"===t&&Q.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),on={set:function(e,t,n){return t===!1?Q.removeAttr(e,n):e.setAttribute(n,n),n}},Q.each(Q.expr.match.bool.source.match(/\w+/g),function(e,t){var n=sn[t]||Q.find.attr;sn[t]=function(e,t,i){var r,o;return i||(o=sn[t],sn[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,sn[t]=o),r}});var an=/^(?:input|select|textarea|button)$/i;Q.fn.extend({prop:function(e,t){return vt(this,Q.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Q.propFix[e]||e]})}}),Q.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,r,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!Q.isXMLDoc(e),o&&(t=Q.propFix[t]||t,r=Q.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||an.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),X.optSelected||(Q.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Q.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Q.propFix[this.toLowerCase()]=this});var ln=/[\t\r\n\f]/g;Q.fn.extend({addClass:function(e){var t,n,i,r,o,s,a="string"==typeof e&&e,l=0,d=this.length;if(Q.isFunction(e))return this.each(function(t){Q(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(ft)||[];d>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ln," "):" ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");s=Q.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,i,r,o,s,a=0===arguments.length||"string"==typeof e&&e,l=0,d=this.length;if(Q.isFunction(e))return this.each(function(t){Q(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(ft)||[];d>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ln," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");s=e?Q.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(Q.isFunction(e)?function(n){Q(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,r=Q(this),o=e.match(ft)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===_t||"boolean"===n)&&(this.className&&gt.set(this,"__className__",this.className),this.className=this.className||e===!1?"":gt.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ln," ").indexOf(t)>=0)return!0;return!1}});var dn=/\r/g;Q.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=Q.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,Q(this).val()):e,null==r?r="":"number"==typeof r?r+="":Q.isArray(r)&&(r=Q.map(r,function(e){return null==e?"":e+""})),t=Q.valHooks[this.type]||Q.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=Q.valHooks[r.type]||Q.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(dn,""):null==n?"":n)}}}),Q.extend({valHooks:{option:{get:function(e){var t=Q.find.attr(e,"value");return null!=t?t:Q.trim(Q.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,s=o?null:[],a=o?r+1:i.length,l=0>r?a:o?r:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==r||(X.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Q.nodeName(n.parentNode,"optgroup"))){if(t=Q(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=Q.makeArray(t),s=r.length;s--;)i=r[s],(i.selected=Q.inArray(i.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Q.each(["radio","checkbox"],function(){Q.valHooks[this]={set:function(e,t){return Q.isArray(t)?e.checked=Q.inArray(Q(e).val(),t)>=0:void 0}},X.checkOn||(Q.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Q.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Q.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var cn=Q.now(),un=/\?/;Q.parseJSON=function(e){return JSON.parse(e+"")},Q.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Q.error("Invalid XML: "+e),t};var hn,fn,pn=/#.*$/,mn=/([?&])_=[^&]*/,vn=/^(.*?):[ \t]*([^\r\n]*)$/gm,gn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,yn=/^(?:GET|HEAD)$/,bn=/^\/\//,wn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,xn={},Tn={},Cn="*/".concat("*");try{fn=location.href}catch(kn){fn=Z.createElement("a"),fn.href="",fn=fn.href}hn=wn.exec(fn.toLowerCase())||[],Q.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fn,type:"GET",isLocal:gn.test(hn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Cn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Q.parseJSON,"text xml":Q.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?R(R(e,Q.ajaxSettings),t):R(Q.ajaxSettings,e)},ajaxPrefilter:I(xn),ajaxTransport:I(Tn),ajax:function(e,t){function n(e,t,n,s){var l,c,g,y,w,T=t;2!==b&&(b=2,a&&clearTimeout(a),i=void 0,o=s||"",x.readyState=e>0?4:0,l=e>=200&&300>e||304===e,n&&(y=V(u,x,n)),y=B(u,y,x,l),l?(u.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(Q.lastModified[r]=w),w=x.getResponseHeader("etag"),w&&(Q.etag[r]=w)),204===e||"HEAD"===u.type?T="nocontent":304===e?T="notmodified":(T=y.state,c=y.data,g=y.error,l=!g)):(g=T,(e||!T)&&(T="error",0>e&&(e=0))),x.status=e,x.statusText=(t||T)+"",l?p.resolveWith(h,[c,T,x]):p.rejectWith(h,[x,T,g]),x.statusCode(v),v=void 0,d&&f.trigger(l?"ajaxSuccess":"ajaxError",[x,u,l?c:g]),m.fireWith(h,[x,T]),d&&(f.trigger("ajaxComplete",[x,u]),--Q.active||Q.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,o,s,a,l,d,c,u=Q.ajaxSetup({},t),h=u.context||u,f=u.context&&(h.nodeType||h.jquery)?Q(h):Q.event,p=Q.Deferred(),m=Q.Callbacks("once memory"),v=u.statusCode||{},g={},y={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!s)for(s={};t=vn.exec(o);)s[t[1].toLowerCase()]=t[2];
t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)v[t]=[v[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return i&&i.abort(t),n(0,t),this}};if(p.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,u.url=((e||u.url||fn)+"").replace(pn,"").replace(bn,hn[1]+"//"),u.type=t.method||t.type||u.method||u.type,u.dataTypes=Q.trim(u.dataType||"*").toLowerCase().match(ft)||[""],null==u.crossDomain&&(l=wn.exec(u.url.toLowerCase()),u.crossDomain=!(!l||l[1]===hn[1]&&l[2]===hn[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(hn[3]||("http:"===hn[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=Q.param(u.data,u.traditional)),P(xn,u,t,x),2===b)return x;d=u.global,d&&0===Q.active++&&Q.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!yn.test(u.type),r=u.url,u.hasContent||(u.data&&(r=u.url+=(un.test(r)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=mn.test(r)?r.replace(mn,"$1_="+cn++):r+(un.test(r)?"&":"?")+"_="+cn++)),u.ifModified&&(Q.lastModified[r]&&x.setRequestHeader("If-Modified-Since",Q.lastModified[r]),Q.etag[r]&&x.setRequestHeader("If-None-Match",Q.etag[r])),(u.data&&u.hasContent&&u.contentType!==!1||t.contentType)&&x.setRequestHeader("Content-Type",u.contentType),x.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Cn+"; q=0.01":""):u.accepts["*"]);for(c in u.headers)x.setRequestHeader(c,u.headers[c]);if(u.beforeSend&&(u.beforeSend.call(h,x,u)===!1||2===b))return x.abort();w="abort";for(c in{success:1,error:1,complete:1})x[c](u[c]);if(i=P(Tn,u,t,x)){x.readyState=1,d&&f.trigger("ajaxSend",[x,u]),u.async&&u.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},u.timeout));try{b=1,i.send(g,n)}catch(T){if(!(2>b))throw T;n(-1,T)}}else n(-1,"No Transport");return x},getJSON:function(e,t,n){return Q.get(e,t,n,"json")},getScript:function(e,t){return Q.get(e,void 0,t,"script")}}),Q.each(["get","post"],function(e,t){Q[t]=function(e,n,i,r){return Q.isFunction(n)&&(r=r||i,i=n,n=void 0),Q.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),Q.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Q.fn[t]=function(e){return this.on(t,e)}}),Q._evalUrl=function(e){return Q.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Q.fn.extend({wrapAll:function(e){var t;return Q.isFunction(e)?this.each(function(t){Q(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Q(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(Q.isFunction(e)?function(t){Q(this).wrapInner(e.call(this,t))}:function(){var t=Q(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Q.isFunction(e);return this.each(function(n){Q(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Q.nodeName(this,"body")||Q(this).replaceWith(this.childNodes)}).end()}}),Q.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Q.expr.filters.visible=function(e){return!Q.expr.filters.hidden(e)};var _n=/%20/g,Dn=/\[\]$/,Sn=/\r?\n/g,Mn=/^(?:submit|button|image|reset|file)$/i,An=/^(?:input|select|textarea|keygen)/i;Q.param=function(e,t){var n,i=[],r=function(e,t){t=Q.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Q.ajaxSettings&&Q.ajaxSettings.traditional),Q.isArray(e)||e.jquery&&!Q.isPlainObject(e))Q.each(e,function(){r(this.name,this.value)});else for(n in e)L(n,e[n],t,r);return i.join("&").replace(_n,"+")},Q.fn.extend({serialize:function(){return Q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Q.prop(this,"elements");return e?Q.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Q(this).is(":disabled")&&An.test(this.nodeName)&&!Mn.test(e)&&(this.checked||!kt.test(e))}).map(function(e,t){var n=Q(this).val();return null==n?null:Q.isArray(n)?Q.map(n,function(e){return{name:t.name,value:e.replace(Sn,"\r\n")}}):{name:t.name,value:n.replace(Sn,"\r\n")}}).get()}}),Q.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var En=0,Fn={},jn={0:200,1223:204},On=Q.ajaxSettings.xhr();e.ActiveXObject&&Q(e).on("unload",function(){for(var e in Fn)Fn[e]()}),X.cors=!!On&&"withCredentials"in On,X.ajax=On=!!On,Q.ajaxTransport(function(e){var t;return X.cors||On&&!e.crossDomain?{send:function(n,i){var r,o=e.xhr(),s=++En;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)o[r]=e.xhrFields[r];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)o.setRequestHeader(r,n[r]);t=function(e){return function(){t&&(delete Fn[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?i(o.status,o.statusText):i(jn[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=Fn[s]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}:void 0}),Q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Q.globalEval(e),e}}}),Q.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Q.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=Q("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),Z.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Nn=[],In=/(=)\?(?=&|$)|\?\?/;Q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Nn.pop()||Q.expando+"_"+cn++;return this[e]=!0,e}}),Q.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,s,a=t.jsonp!==!1&&(In.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&In.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=Q.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(In,"$1"+r):t.jsonp!==!1&&(t.url+=(un.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||Q.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){s=arguments},i.always(function(){e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,Nn.push(r)),s&&Q.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),Q.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||Z;var i=st.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=Q.buildFragment([e],t,r),r&&r.length&&Q(r).remove(),Q.merge([],i.childNodes))};var Pn=Q.fn.load;Q.fn.load=function(e,t,n){if("string"!=typeof e&&Pn)return Pn.apply(this,arguments);var i,r,o,s=this,a=e.indexOf(" ");return a>=0&&(i=Q.trim(e.slice(a)),e=e.slice(0,a)),Q.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&Q.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){o=arguments,s.html(i?Q("<div>").append(Q.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},Q.expr.filters.animated=function(e){return Q.grep(Q.timers,function(t){return e===t.elem}).length};var Rn=e.document.documentElement;Q.offset={setOffset:function(e,t,n){var i,r,o,s,a,l,d,c=Q.css(e,"position"),u=Q(e),h={};"static"===c&&(e.style.position="relative"),a=u.offset(),o=Q.css(e,"top"),l=Q.css(e,"left"),d=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,d?(i=u.position(),s=i.top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),Q.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+r),"using"in t?t.using.call(e,h):u.css(h)}},Q.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Q.offset.setOffset(this,e,t)});var t,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,Q.contains(t,i)?(typeof i.getBoundingClientRect!==_t&&(r=i.getBoundingClientRect()),n=q(o),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===Q.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Q.nodeName(e[0],"html")||(i=e.offset()),i.top+=Q.css(e[0],"borderTopWidth",!0),i.left+=Q.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-Q.css(n,"marginTop",!0),left:t.left-i.left-Q.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Rn;e&&!Q.nodeName(e,"html")&&"static"===Q.css(e,"position");)e=e.offsetParent;return e||Rn})}}),Q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i="pageYOffset"===n;Q.fn[t]=function(r){return vt(this,function(t,r,o){var s=q(t);return void 0===o?s?s[n]:t[r]:void(s?s.scrollTo(i?e.pageXOffset:o,i?o:e.pageYOffset):t[r]=o)},t,r,arguments.length,null)}}),Q.each(["top","left"],function(e,t){Q.cssHooks[t]=T(X.pixelPosition,function(e,n){return n?(n=x(e,t),Ht.test(n)?Q(e).position()[t]+"px":n):void 0})}),Q.each({Height:"height",Width:"width"},function(e,t){Q.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){Q.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||r===!0?"margin":"border");return vt(this,function(t,n,i){var r;return Q.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?Q.css(t,n,s):Q.style(t,n,i,s)},t,o?i:void 0,o,null)}})}),Q.fn.size=function(){return this.length},Q.fn.andSelf=Q.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Q});var Vn=e.jQuery,Bn=e.$;return Q.noConflict=function(t){return e.$===Q&&(e.$=Bn),t&&e.jQuery===Q&&(e.jQuery=Vn),Q},typeof t===_t&&(e.jQuery=e.$=Q),Q}),define("jquery",function(){}),function(e,t){"undefined"!=typeof exports?t(e,exports,require("underscore")):"function"==typeof define&&define.amd?define("backbone",["underscore","jquery","exports"],function(n,i,r){e.Backbone=t(e,r,n,i)}):e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,i){{var r=e.Backbone,o=[],s=(o.push,o.slice);o.splice}t.VERSION="1.1.0",t.$=i,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=t.Events={on:function(e,t,n){if(!d(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,i){if(!d(this,"once",e,[t,i])||!t)return this;var r=this,o=n.once(function(){r.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,i)},off:function(e,t,i){var r,o,s,a,l,c,u,h;if(!this._events||!d(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events={},this;for(a=e?[e]:n.keys(this._events),l=0,c=a.length;c>l;l++)if(e=a[l],s=this._events[e]){if(this._events[e]=r=[],t||i)for(u=0,h=s.length;h>u;u++)o=s[u],(t&&t!==o.callback&&t!==o.callback._callback||i&&i!==o.context)&&r.push(o);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!d(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&c(n,t),i&&c(i,arguments),this},stopListening:function(e,t,i){var r=this._listeningTo;if(!r)return this;var o=!t&&!i;i||"object"!=typeof t||(i=this),e&&((r={})[e._listenId]=e);for(var s in r)e=r[s],e.off(t,i,this),(o||n.isEmpty(e._events))&&delete this._listeningTo[s];return this}},l=/\s+/,d=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(l.test(n)){for(var o=n.split(l),s=0,a=o.length;a>s;s++)e[t].apply(e,[o[s]].concat(i));return!1}return!0},c=function(e,t){var n,i=-1,r=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t)}},u={listenTo:"on",listenToOnce:"once"};n.each(u,function(e,t){a[t]=function(t,i,r){var o=this._listeningTo||(this._listeningTo={}),s=t._listenId||(t._listenId=n.uniqueId("l"));return o[s]=t,r||"object"!=typeof i||(r=this),t[e](i,r,this),this}}),a.bind=a.on,a.unbind=a.off,n.extend(t,a);var h=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var r,o,s,a,l,d,c,u;if(null==e)return this;if("object"==typeof e?(o=e,i=t):(o={})[e]=t,i||(i={}),!this._validate(o,i))return!1;s=i.unset,l=i.silent,a=[],d=this._changing,this._changing=!0,d||(this._previousAttributes=n.clone(this.attributes),this.changed={}),u=this.attributes,c=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(r in o)t=o[r],n.isEqual(u[r],t)||a.push(r),n.isEqual(c[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete u[r]:u[r]=t;if(!l){a.length&&(this._pending=!0);for(var h=0,f=a.length;f>h;h++)this.trigger("change:"+a[h],this,u[a[h]],i)}if(d)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,i=!1,r=this._changing?this._previousAttributes:this.attributes;for(var o in e)n.isEqual(r[o],t=e[o])||((i||(i={}))[o]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),void t.trigger("sync",t,n,e)):!1},R(this,e),this.sync("read",this,e)},save:function(e,t,i){var r,o,s,a=this.attributes;if(null==e||"object"==typeof e?(r=e,i=t):(r={})[e]=t,i=n.extend({validate:!0},i),r&&!i.wait){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;r&&i.wait&&(this.attributes=n.extend({},a,r)),void 0===i.parse&&(i.parse=!0);var l=this,d=i.success;return i.success=function(e){l.attributes=a;var t=l.parse(e,i);return i.wait&&(t=n.extend(r||{},t)),n.isObject(t)&&!l.set(t,i)?!1:(d&&d(l,e,i),void l.trigger("sync",l,e,i))},R(this,i),o=this.isNew()?"create":i.patch?"patch":"update","patch"===o&&(i.attrs=r),s=this.sync(o,this,i),r&&i.wait&&(this.attributes=a),s},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&r(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;R(this,e);var o=this.sync("delete",this,e);return e.wait||r(),o},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||P();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1):!0}});var f=["keys","values","pairs","invert","pick","omit"];n.each(f,function(e){h.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var p=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};n.extend(p.prototype,a,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,v))},remove:function(e,t){var i=!n.isArray(e);e=i?[e]:n.clone(e),t||(t={});var r,o,s,a;for(r=0,o=e.length;o>r;r++)a=e[r]=this.get(e[r]),a&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,t.silent||(t.index=s,a.trigger("remove",a,this,t)),this._removeReference(a));return i?e[0]:e},set:function(e,t){t=n.defaults({},t,m),t.parse&&(e=this.parse(e,t));var i=!n.isArray(e);e=i?e?[e]:[]:n.clone(e);var r,o,s,a,l,d,c,u=t.at,f=this.model,p=this.comparator&&null==u&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,g=[],y=[],b={},w=t.add,x=t.merge,T=t.remove,C=!p&&w&&T?[]:!1;for(r=0,o=e.length;o>r;r++){if(l=e[r],s=l instanceof h?a=l:l[f.prototype.idAttribute],d=this.get(s))T&&(b[d.cid]=!0),x&&(l=l===a?a.attributes:l,t.parse&&(l=d.parse(l,t)),d.set(l,t),p&&!c&&d.hasChanged(v)&&(c=!0)),e[r]=d;else if(w){if(a=e[r]=this._prepareModel(l,t),!a)continue;g.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)}C&&C.push(d||a)}if(T){for(r=0,o=this.length;o>r;++r)b[(a=this.models[r]).cid]||y.push(a);y.length&&this.remove(y,t)}if(g.length||C&&C.length)if(p&&(c=!0),this.length+=g.length,null!=u)for(r=0,o=g.length;o>r;r++)this.models.splice(u+r,0,g[r]);else{C&&(this.models.length=0);var k=C||g;for(r=0,o=k.length;o>r;r++)this.models.push(k[r])}if(c&&this.sort({silent:!0}),!t.silent){for(r=0,o=g.length;o>r;r++)(a=g[r]).trigger("add",a,this,t);(c||C&&C.length)&&this.trigger("sort",this,t)}return i?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,r=this.models.length;r>i;i++)this._removeReference(this.models[i]);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return s.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e.id]||this._byId[e.cid]||this._byId[e]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var r=e.reset?"reset":"set";i[r](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},R(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,r=t.success;return t.success=function(e,t,n){n.wait&&i.add(e,n),r&&r(e,t,n)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];n.each(g,function(e){p.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var y=["groupBy","countBy","sortBy"];n.each(y,function(e){p.prototype[e]=function(t,i){var r=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,r,i)}});var b=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var r=t.match(w),o=r[1],s=r[2];i=n.bind(i,this),o+=".delegateEvents"+this.cid,""===s?this.$el.on(o,i):this.$el.on(o,s,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,r){var o=C[e];n.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:o,dataType:"json"};if(r.url||(s.url=n.result(i,"url")||P()),null!=r.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",r.emulateJSON&&(s.data._method=o);var a=r.beforeSend;r.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===s.type||r.emulateJSON||(s.processData=!1),"PATCH"===s.type&&T&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=r.xhr=t.ajax(n.extend(s,r));return i.trigger("request",i,l,r),l};var T=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var k=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},_=/\((.*?)\)/g,D=/(\(\?)?:\w+/g,S=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(k.prototype,a,{initialize:function(){},route:function(e,i,r){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return t.history.route(e,function(n){var s=o._extractParameters(e,n);r&&r.apply(o,s),o.trigger.apply(o,["route:"+i].concat(s)),o.trigger("route",i,s),t.history.trigger("route",o,i,s)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(M,"\\$&").replace(_,"(?:$1)?").replace(D,function(e,t){return t?e:"([^/]+)"}).replace(S,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e){return e?decodeURIComponent(e):null})}});var A=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,j=/msie [\w.]+/,O=/\/$/,N=/[?#].*$/;A.started=!1,n.extend(A.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(O,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(E,"")},start:function(e){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),r=document.documentMode,o=j.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);this.root=("/"+this.root+"/").replace(F,"/"),o&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var s=this.location,a=s.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!a)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&a&&s.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment+s.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),A.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!A.started)return!1;t&&t!==!0||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(N,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new A;var I=function(e,t){var i,r=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,t);var o=function(){this.constructor=i};return o.prototype=r.prototype,i.prototype=new o,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};h.extend=p.extend=k.extend=b.extend=A.extend=I;var P=function(){throw new Error('A "url" property or function must be specified')},R=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t}),define("masseuse/utilities/nameSpace",[],function(){function e(e,t,n){var i,r,o=t.split("."),s=e;for(i=o.length,r=0;i>r;r++)"undefined"==typeof s[o[r]]&&(s[o[r]]=n?n({}):{}),s=s[o[r]];return s}return e}),define("masseuse/utilities/channels",["underscore","backbone","./nameSpace"],function(e,t,n){function i(n){return o?(o.addChannel(n),o):!this instanceof i?new i(n):(e.extend(this,t.Events),this.addChannel(n),o=this,void 0)}function r(n){return e.extend(n,t.Events)}var o;return i.prototype.addChannel=function(t){t&&(e.isArray(t)?e.each(t,this.addChannel.bind(this)):this.channels=n(this,t,r))},i}),define("masseuse/utilities/accessors",["backbone"],function(e){function t(e,t,n){var i;for("string"==typeof t&&(t=t.split("."));"object"==typeof e&&e&&t.length;)i=t.shift(),i in e||!n||(e[i]={}),e=r(e,i);return e}function n(e,t,n){var i;return"string"==typeof t&&(t=t.split(".")),i=t.pop(),e=this.getProperty(e,t,!0),e&&"object"==typeof e?(o(e,i,n),e):void 0}function i(e,t){var n;return"string"==typeof t&&(t=t.split(".")),n=t.pop(),e=this.getProperty(e,t,!0),e&&"object"==typeof e?(s(e,n),e):void 0}function r(t,n){return t instanceof e.Model?t.get(n):t[n]}function o(t,n,i){t instanceof e.Model?(t.set(n,i),i instanceof e.Model&&t.listenTo(i,"change",t.trigger.bind(t,"change"))):t[n]=i}function s(t,n){t instanceof e.Model?t.unset(n):delete t[n]}return{getProperty:t,setProperty:n,unsetProperty:i}}),define("masseuse/views/viewContext",["../utilities/accessors"],function(e){function t(e){return this instanceof t?void(this.field=e):new t(e)}return t.prototype.getBoundFunction=function(t){return e.getProperty(t,this.field)},t}),define("masseuse/views/lifeCycle",["jquery","underscore"],function(e,t){function n(t,n){var a=t.notify.bind(this,l),d=r.bind(this,n),c=s.bind(this,t),u=o.bind(this,t,c),h=t.reject.bind(this);t.progress(this.trigger.bind(this)),e.when(i.call(this,this.beforeRender)).then(a).then(d).then(u,h)}function i(t,n){var i,r,o=Array.prototype.slice.call(arguments);return t?(t.length&&(i=new e.Deferred,o.unshift(i)),n&&o.push(n),r=t.apply(this,o),t.length?i.promise():r):void 0}function r(e){return e?e:void 0}function o(t,n){var r=t.reject.bind(this);e.when(i.call(this,this.render,t)).then(t.notify.bind(this,d)).then(n,r)}function s(e){var t=a.call(this,e),n=e.resolve.bind(this),r=e.reject.bind(this);t.then(i.bind(this,this.afterRender)).then(e.notify.bind(this,c)).then(n,r)}function a(n){var i=[],r=new e.Deferred;return n.progress(function(e){e===d&&r.resolve()}),t(this.children).each(function(e){var t=e.start(r.promise());
i.push(t)}),e.when.apply(e,i)}var l="beforeRenderDone",d="renderDone",c="afterRenderDone";return{runAllMethods:n}}),define("masseuse/utilities/deepExtend",["jquery"],function(e){function t(){for(var n,i,r,o,s,a,l=arguments[0],d=0,c=arguments.length;c>d;++d)if(null!=(n=arguments[d]))for(i in n)r=l[i],o=n[i],l!==o&&(o&&(e.isPlainObject(o)||(s=e.isArray(o)))?(s?(s=!1,a=r&&e.isArray(r)?r:[]):a=r&&e.isPlainObject(r)?r:{},l[i]=t(a,o)):l[i]=o);return l}return t}),define("masseuse/utilities/createOptions",["./deepExtend"],function(e){return function(){var t=Array.prototype.slice.call(arguments,0);return e.apply(null,[{}].concat(t))}}),define("masseuse/models/computedProperty",[],function(){function e(t,n,i){return this instanceof e?(this.listenables=t,this.callback=n,void(this.skipInitialComputation=i)):new e(t,n,i)}return e}),define("masseuse/models/proxyProperty",[],function(){function e(t,n){return this instanceof e?(this.propertyNameOnModel=t,void(this.model=n)):new e(t,n)}return e}),define("masseuse/models/observerProperty",[],function(){function e(t,n){return this instanceof e?(this.propertyNameOnModel=t,void(this.model=n)):new e(t,n)}return e}),define("masseuse/models/masseuseModel",["backbone","jquery","./computedProperty","./proxyProperty","./observerProperty","../utilities/accessors","underscore"],function(e,t,n,i,r,o,s){function a(e){this.set(e,!this.get(e))}function l(t){var n,i,r;return s.isString(t)&&t.indexOf(".")>0?(n=t.slice(t.indexOf(".")+1),t=t.split(".")[0],i=e.Model.prototype.get.call(this,t),r=o.getProperty(i,n)):r=e.Model.prototype.get.apply(this,arguments),r}function d(t,n,i){i>g||"object"==typeof t&&s.each(t,function(t){t instanceof e.Model?n.listenTo(t,"change",n.trigger.bind(n,"change")):"object"==typeof t&&d(t,n,++i)})}function c(t,a,l){var c,u,h=this,f={},p=[],m=[],g=!1;if(this.computedCallbacks=this.computedCallbacks||{},null===t)return this;if("object"==typeof t)f=t,l=a,s.each(t,function(t,o){t instanceof n?(t.skipInitialComputation?m.push(function(){h.bindComputed(o,t)}):(h.bindComputed(o,t),g=!0),delete f[o]):t instanceof i?(h.bindProxy(o,t),delete f[o]):t instanceof r?(h.bindObserver(o,t),delete f[o]):t instanceof e.Model?h.listenTo(t,"change",h.trigger.bind(h,"change")):(d(t,h,0),h.computedCallbacks[o]&&p.push(h.computedCallbacks[o]))});else{if(a instanceof e.Model&&h.listenTo(a,"change",h.trigger.bind(h,"change")),s.isString(t)&&t.indexOf(".")>0&&(c=t.slice(t.indexOf(".")+1),t=t.split(".")[0],u=this.get(t)||{},this.set(t,{},{silent:!0}),l&&l.unset?(o.unsetProperty(u,c),l.unset=!1):o.setProperty(u,c,a),a=u),f[t]=a,a instanceof n)return void this.bindComputed(t,a);if(a instanceof i)return void this.bindProxy(t,a);if(a instanceof r)return void this.bindObserver(t,a);v.call(this,t,p)}g?this.set.apply(this,[f,l]):(e.Model.prototype.set.apply(this,[f,l]),s.forEach(p,function(e){s.forEach(e,function(e){e.call(h)})})),m&&s.forEach(m,function(e){e()})}function u(e,t){return this.set(e,void 0,s.extend({},t,{unset:!0}))}function h(e,t){var n,i=this;n=function(){this.set(e,t.callback.apply(this,this.getListenableValues(t.listenables)))},s.forEach(t.listenables,function(e){i.computedCallbacks[e]=i.computedCallbacks[e]||[],i.computedCallbacks[e].push(n),t.skipInitialComputation||n.call(i)})}function f(e,t){var n=this,i=t.model;this.bindObserver(e,t,i),this.on("change:"+e,function(){i.set(t.propertyNameOnModel,n.get(e))})}function p(e,t,n){var i=this,r=t.propertyNameOnModel;n=n||t.model,this.set(e,n.get(r)),s.isString(r)&&r.indexOf(".")>0&&(r=r.split(".")[0]),n.on("change:"+r,function(){i.set(e,n.get(t.propertyNameOnModel))})}function m(e){var t=[],n=this;return s.each(e,function(e){t.push(n.get(e))}),t}function v(e,t){this.computedCallbacks[e]&&t.push(this.computedCallbacks[e])}var g=10;return e.Model.extend({toggleAttribute:a,get:l,set:c,unset:u,bindComputed:h,bindProxy:f,bindObserver:p,getListenableValues:m})}),define("masseuse/views/baseView",["jquery","backbone","underscore","../utilities/channels","./viewContext","./lifeCycle","../utilities/accessors","../utilities/createOptions","../models/masseuseModel","../models/proxyProperty","../models/observerProperty"],function(e,t,n,i,r,o,s,a,l,d,c){function u(){var e,t,i=Array.prototype.slice.call(arguments,0),r=i.length,o=i[r-1],s=!1!==o;return r&&"object"!=typeof o&&i.pop(),s&&this.defaultOptions&&i.unshift(this.defaultOptions),e=a.apply(null,i),(t=e.ViewType)?(delete e.ViewType,new t(e)):(this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,O)),this._ensureElement(),this.initialize.call(this,e),void this.delegateEvents())}function h(e){var t=this;this.elementCache=n.memoize(v.bind(this)),e&&(e.viewOptions&&(O=O.concat(e.viewOptions)),n.extend(this,n.pick(e,O))),E.call(this,e),F.call(this,e),j.call(this,e),e&&e.plugins&&e.plugins.length&&n.each(e.plugins,function(n){n.call(t,e)}),this.children=[]}function f(t){var n,i=this;return this.$startPromise?this.$startPromise:(n=new e.Deferred,n.done(function(){i.hasStarted=!0}),this.$startPromise=n.promise(),o.runAllMethods.call(this,n,t),this.$startPromise)}function p(){this.appendOrInsertView(arguments[arguments.length-1]),this.elementCache=n.memoize(v.bind(this))}function m(e){this.appendTo||this.prependTo?S.call(this,e):A.call(this,e)}function v(e){return this.$el.find(e)}function g(){return this.model?this.model.toJSON():{}}function y(e){var t=this;this.stopListening(),e=n.map(e,function(e){var i=2===e.length,r=i?0:1;return n.each(e,function(i,o){n.isString(i)&&o!=r&&(e[o]=s.getProperty(t,i))}),i&&e.unshift(t),e}),e=n.uniq(e,function(e){return n.identity(e)}),n.each(e,function(e){t.listenTo.apply(t,e)})}function b(){this.removeAllChildren(),this.parent&&n.contains(this.parent.children,this)&&this.parent.removeChild(this),this.trigger("onRemove"),this.model&&(this.model.off(),this.model.stopListening(),delete this.model),this.$el||(this.$el=e("<div/>")),t.View.prototype.remove.apply(this,arguments),this.$el&&(this.undelegateEvents(),this.$el.removeData().unbind(),this.$el.empty(),delete this.$el),this.el&&delete this.el}function w(){var e=n.isArray(arguments[0])?arguments[0]:arguments,t=this,i=[];return n.each(e,function(e){i.push(t.addChild.call(t,e))}),i}function x(e){return e instanceof t.View?T.call(this,e):T.call(this,new B(e))}function T(e){var t;return n(this.children).contains(e)||(this.children.push(t=e),e.parent=this,this.hasStarted&&!e.hasStarted&&e.start()),t}function C(e){this.children=n(this.children).without(e),e.remove()}function k(){n(this.children).each(this.removeChild.bind(this))}function _(){return this.hasStarted&&(t.View.prototype.remove.apply(this),delete this.hasStarted,delete this.$startPromise),this.start()}function D(){var t=new e.Deferred,i=[];return n(this.children).each(function(e){i.push(e.refresh())}),e.when.apply(e,i).then(t.resolve),t.promise()}function S(t){var n,i=this.template,r=this.wrapper!==!1;i=i?i(this.dataToJSON()):"",n=r?this.el:e(i),r||1!==n.length?this.$el.html(i):this.setElement(n),t&&t.notify&&t.notify(I),this.appendTo?M.call(this,"appendTo"):this.prependTo&&M.call(this,"prependTo")}function M(t){e(this.el)[t](this.parent&&n.isString(this[t])?this.parent.$(this[t]):e(this[t]))}function A(e){var t=this.template;t&&this.$el.html(t(this.dataToJSON())),e&&e.notify&&e.notify(I)}function E(e){e&&e.template&&(this.template=n.template(e.template))}function F(e){var t,i=this,o=l;e&&e.ModelType&&(o=e.ModelType),this.model?this.model=e.model:(t=n.result(e,V),n.each(t,function(e,n){e instanceof r&&(t[n]=e.getBoundFunction(i)),(e instanceof d||e instanceof c)&&e.model instanceof r&&(e.model=e.model.getBoundFunction(i))}),this.model=new o(t))}function j(e){e&&this.bindEventListeners(e.listeners||e.bindings)}var O=["model","collection","el","id","attributes","className","tagName","events","name","appendTo","prependTo","wrapper"],N="beforeRenderDone",I="afterTemplatingDone",P="renderDone",R="afterRenderDone",V="modelData",B=t.View.extend({constructor:u,initialize:h,start:f,render:p,dataToJSON:g,bindEventListeners:y,remove:b,children:null,addChild:x,addChildren:w,removeChild:C,refresh:_,restart:_,refreshChildren:D,removeAllChildren:k,appendOrInsertView:m});return B.beforeRenderDone=N,B.afterTemplatingDone=I,B.renderDone=P,B.afterRenderDone=R,B.prototype.channels=B.prototype.channels||new i,B}),define("masseuse/routers/masseuseRouter",["backbone","underscore"],function(e,t){function n(){}function i(){var n=this;t.isFunction(this.beforeRouting)&&t(this.routes).chain().omit(this.excludeFromBeforeRouting).values().uniq().each(function(e){r.call(n,e)}),e.Router.prototype._bindRoutes.call(this)}function r(e){var t=this,n=this[e];t[e]=function(){var e=arguments;this.beforeRouting().done(function(){n.apply(t,e)}).fail(function(){t.onRouteFail.apply(t,e)})}}return e.Router.extend({initialize:i,_bindRoutes:n,onRouteFail:n})}),function(){var e,t,n,i,r=function(e,t){return function(){return e.apply(t,arguments)}},o=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},s=[].slice,a={}.hasOwnProperty,l=function(e,t){function n(){this.constructor=e}for(var i in t)a.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};e={binders:{},components:{},formatters:{},adapters:{},config:{prefix:"rv",templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,handler:function(e,t,n){return this.call(e,t,n.view.models)}}},"jQuery"in window?(i="on"in jQuery.prototype?["on","off"]:["bind","unbind"],t=i[0],n=i[1],e.Util={bindEvent:function(e,n,i){return jQuery(e)[t](n,i)},unbindEvent:function(e,t,i){return jQuery(e)[n](t,i)},getInputValue:function(e){var t;return t=jQuery(e),"checkbox"===t.attr("type")?t.is(":checked"):t.val()}}):e.Util={bindEvent:function(){return"addEventListener"in window?function(e,t,n){return e.addEventListener(t,n,!1)}:function(e,t,n){return e.attachEvent("on"+t,n)}}(),unbindEvent:function(){return"removeEventListener"in window?function(e,t,n){return e.removeEventListener(t,n,!1)}:function(e,t,n){return e.detachEvent("on"+t,n)}}(),getInputValue:function(e){var t,n,i,r;if("checkbox"===e.type)return e.checked;if("select-multiple"===e.type){for(r=[],n=0,i=e.length;i>n;n++)t=e[n],t.selected&&r.push(t.value);return r}return e.value}},e.View=function(){function t(t,n,i){var o,s,a,l,d,c,u,h,f;for(this.els=t,this.models=n,this.options=null!=i?i:{},this.update=r(this.update,this),this.publish=r(this.publish,this),this.sync=r(this.sync,this),this.unbind=r(this.unbind,this),this.bind=r(this.bind,this),this.select=r(this.select,this),this.build=r(this.build,this),this.componentRegExp=r(this.componentRegExp,this),this.bindingRegExp=r(this.bindingRegExp,this),this.els.jquery||this.els instanceof Array||(this.els=[this.els]),u=["config","binders","formatters","adapters"],d=0,c=u.length;c>d;d++){if(s=u[d],this[s]={},this.options[s]){h=this.options[s];for(o in h)a=h[o],this[s][o]=a}f=e[s];for(o in f)a=f[o],null==(l=this[s])[o]&&(l[o]=a)}this.build()}return t.prototype.bindingRegExp=function(){return new RegExp("^"+this.config.prefix+"-")},t.prototype.componentRegExp=function(){return new RegExp("^"+this.config.prefix.toUpperCase()+"-")},t.prototype.build=function(){var t,n,i,r,s,a,l,d,c,u=this;for(this.bindings=[],a=[],t=this.bindingRegExp(),i=this.componentRegExp(),n=function(t,n,i,r){var o,s,a,l,d,c,h;return d={},h=function(){var e,t,n,i;for(n=r.split("|"),i=[],e=0,t=n.length;t>e;e++)c=n[e],i.push(c.trim());return i}(),o=function(){var e,t,n,i;for(n=h.shift().split("<"),i=[],e=0,t=n.length;t>e;e++)s=n[e],i.push(s.trim());return i}(),l=o.shift(),d.formatters=h,(a=o.shift())&&(d.dependencies=a.split(/\s+/)),u.bindings.push(new e[t](u,n,i,l,d))},s=function(r){var l,d,c,h,f,p,m,v,g,y,b,w,x,T,C,k,_,D,S,M,A,E,F,j,O,N,I,P,R,V;if(o.call(a,r)<0){if(3===r.nodeType){if(v=e.TextTemplateParser,(f=u.config.templateDelimiters)&&(w=v.parse(r.data,f)).length&&(1!==w.length||w[0].type!==v.types.text)){for(C=0,S=w.length;S>C;C++)b=w[C],y=document.createTextNode(b.value),r.parentNode.insertBefore(y,r),1===b.type&&n("TextBinding",y,null,b.value);r.parentNode.removeChild(r)}}else if(i.test(r.tagName))x=r.tagName.replace(i,"").toLowerCase(),u.bindings.push(new e.ComponentBinding(u,r,x));else if(null!=r.attributes){for(O=r.attributes,k=0,M=O.length;M>k;k++)if(l=O[k],t.test(l.name)){if(x=l.name.replace(t,""),!(c=u.binders[x])){N=u.binders;for(p in N)T=N[p],"*"!==p&&-1!==p.indexOf("*")&&(g=new RegExp("^"+p.replace("*",".+")+"$"),g.test(x)&&(c=T))}if(c||(c=u.binders["*"]),c.block){for(I=r.childNodes,_=0,A=I.length;A>_;_++)m=I[_],a.push(m);d=[l]}}for(P=d||r.attributes,D=0,E=P.length;E>D;D++)l=P[D],t.test(l.name)&&(x=l.name.replace(t,""),n("Binding",r,x,l.value))}for(R=function(){var e,t,n,i;for(n=r.childNodes,i=[],t=0,e=n.length;e>t;t++)m=n[t],i.push(m);return i}(),V=[],j=0,F=R.length;F>j;j++)h=R[j],V.push(s(h));return V}},c=this.els,l=0,d=c.length;d>l;l++)r=c[l],s(r)},t.prototype.select=function(e){var t,n,i,r,o;for(r=this.bindings,o=[],n=0,i=r.length;i>n;n++)t=r[n],e(t)&&o.push(t);return o},t.prototype.bind=function(){var e,t,n,i,r;for(i=this.bindings,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e.bind());return r},t.prototype.unbind=function(){var e,t,n,i,r;for(i=this.bindings,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e.unbind());return r},t.prototype.sync=function(){var e,t,n,i,r;for(i=this.bindings,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e.sync());return r},t.prototype.publish=function(){var e,t,n,i,r;for(i=this.select(function(e){return e.binder.publishes}),r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e.publish());return r},t.prototype.update=function(e){var t,n,i,r,o,s,a;null==e&&(e={});for(n in e)i=e[n],this.models[n]=i;for(s=this.bindings,a=[],r=0,o=s.length;o>r;r++)t=s[r],a.push(t.update(e));return a},t}(),e.Binding=function(){function t(e,t,n,i,o){this.view=e,this.el=t,this.type=n,this.keypath=i,this.options=null!=o?o:{},this.update=r(this.update,this),this.unbind=r(this.unbind,this),this.bind=r(this.bind,this),this.publish=r(this.publish,this),this.sync=r(this.sync,this),this.set=r(this.set,this),this.eventHandler=r(this.eventHandler,this),this.formattedValue=r(this.formattedValue,this),this.setBinder=r(this.setBinder,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.model=void 0,this.setBinder()}return t.prototype.setBinder=function(){var e,t,n,i;if(!(this.binder=this.view.binders[this.type])){i=this.view.binders;for(e in i)n=i[e],"*"!==e&&-1!==e.indexOf("*")&&(t=new RegExp("^"+e.replace("*",".+")+"$"),t.test(this.type)&&(this.binder=n,this.args=new RegExp("^"+e.replace("*","(.+)")+"$").exec(this.type),this.args.shift()))}return this.binder||(this.binder=this.view.binders["*"]),this.binder instanceof Function?this.binder={routine:this.binder}:void 0},t.prototype.formattedValue=function(e){var t,n,i,r,o,a;for(a=this.formatters,r=0,o=a.length;o>r;r++)n=a[r],t=n.split(/\s+/),i=t.shift(),n=this.view.formatters[i],(null!=n?n.read:void 0)instanceof Function?e=n.read.apply(n,[e].concat(s.call(t))):n instanceof Function&&(e=n.apply(null,[e].concat(s.call(t))));return e},t.prototype.eventHandler=function(e){var t,n;return n=(t=this).view.config.handler,function(i){return n.call(e,this,i,t)}},t.prototype.set=function(e){var t;return e=this.formattedValue(e instanceof Function&&!this.binder["function"]?e.call(this.model):e),null!=(t=this.binder.routine)?t.call(this,this.el,e):void 0},t.prototype.sync=function(){var t,n,i,r,o,s,a,l,d;if(this.model!==this.observer.target){for(a=this.dependencies,i=0,o=a.length;o>i;i++)n=a[i],n.unobserve();if(this.dependencies=[],null!=(this.model=this.observer.target)&&(null!=(l=this.options.dependencies)?l.length:void 0))for(d=this.options.dependencies,r=0,s=d.length;s>r;r++)t=d[r],n=new e.Observer(this.view,this.model,t,this.sync),this.dependencies.push(n)}return this.set(this.observer.value())},t.prototype.publish=function(){var t,n,i,r,o,a,l,d,c;for(r=e.Util.getInputValue(this.el),l=this.formatters.slice(0).reverse(),o=0,a=l.length;a>o;o++)n=l[o],t=n.split(/\s+/),i=t.shift(),(null!=(d=this.view.formatters[i])?d.publish:void 0)&&(r=(c=this.view.formatters[i]).publish.apply(c,[r].concat(s.call(t))));return this.observer.publish(r)},t.prototype.bind=function(){var t,n,i,r,o,s,a;if(null!=(o=this.binder.bind)&&o.call(this,this.el),this.observer=new e.Observer(this.view,this.view.models,this.keypath,this.sync),this.model=this.observer.target,null!=this.model&&(null!=(s=this.options.dependencies)?s.length:void 0))for(a=this.options.dependencies,i=0,r=a.length;r>i;i++)t=a[i],n=new e.Observer(this.view,this.model,t,this.sync),this.dependencies.push(n);return this.view.config.preloadData?this.sync():void 0},t.prototype.unbind=function(){var e,t,n,i,r;for(null!=(i=this.binder.unbind)&&i.call(this,this.el),this.observer.unobserve(),r=this.dependencies,t=0,n=r.length;n>t;t++)e=r[t],e.unobserve();return this.dependencies=[]},t.prototype.update=function(e){var t;return null==e&&(e={}),this.model=this.observer.target,null!=(t=this.binder.update)?t.call(this,e):void 0},t}(),e.ComponentBinding=function(t){function n(t,n,i){var s,a,l,d,c;for(this.view=t,this.el=n,this.type=i,this.unbind=r(this.unbind,this),this.bind=r(this.bind,this),this.update=r(this.update,this),this.locals=r(this.locals,this),this.component=e.components[this.type],this.attributes={},this.inflections={},d=this.el.attributes||[],a=0,l=d.length;l>a;a++)s=d[a],c=s.name,o.call(this.component.attributes,c)>=0?this.attributes[s.name]=s.value:this.inflections[s.name]=s.value}return l(n,t),n.prototype.sync=function(){},n.prototype.locals=function(e){var t,n,i,r,o,s,a,l,d;null==e&&(e=this.view.models),o={},l=this.inflections;for(n in l)for(t=l[n],d=t.split("."),s=0,a=d.length;a>s;s++)r=d[s],o[n]=(o[n]||e)[r];for(n in e)i=e[n],null==o[n]&&(o[n]=i);return o},n.prototype.update=function(e){var t;return null!=(t=this.componentView)?t.update(this.locals(e)):void 0},n.prototype.bind=function(){var t,n;return null!=this.componentView?null!=(n=this.componentView)?n.bind():void 0:(t=this.component.build.call(this.attributes),(this.componentView=new e.View(t,this.locals(),this.view.options)).bind(),this.el.parentNode.replaceChild(t,this.el))},n.prototype.unbind=function(){var e;return null!=(e=this.componentView)?e.unbind():void 0},n}(e.Binding),e.TextBinding=function(e){function t(e,t,n,i,o){this.view=e,this.el=t,this.type=n,this.keypath=i,this.options=null!=o?o:{},this.sync=r(this.sync,this),this.formatters=this.options.formatters||[],this.dependencies=[]}return l(t,e),t.prototype.binder={routine:function(e,t){return e.data=null!=t?t:""}},t.prototype.sync=function(){return t.__super__.sync.apply(this,arguments)},t}(e.Binding),e.KeypathParser=function(){function e(){}return e.parse=function(e,t,n){var i,r,s,a,l,d;for(a=[],r={"interface":n,path:""},s=l=0,d=e.length;d>l;s=l+=1)i=e.charAt(s),o.call(t,i)>=0?(a.push(r),r={"interface":i,path:""}):r.path+=i;return a.push(r),a},e}(),e.TextTemplateParser=function(){function e(){}return e.types={text:0,binding:1},e.parse=function(e,t){var n,i,r,o,s,a,l;for(a=[],o=e.length,n=0,i=0;o>i;){if(n=e.indexOf(t[0],i),0>n){a.push({type:this.types.text,value:e.slice(i)});break}if(n>0&&n>i&&a.push({type:this.types.text,value:e.slice(i,n)}),i=n+t[0].length,n=e.indexOf(t[1],i),0>n){s=e.slice(i-t[1].length),r=a[a.length-1],(null!=r?r.type:void 0)===this.types.text?r.value+=s:a.push({type:this.types.text,value:s});break}l=e.slice(i,n).trim(),a.push({type:this.types.binding,value:l}),i=n+t[1].length}return a},e}(),e.Observer=function(){function t(e,t,n,i){this.view=e,this.model=t,this.keypath=n,this.callback=i,this.unobserve=r(this.unobserve,this),this.realize=r(this.realize,this),this.value=r(this.value,this),this.publish=r(this.publish,this),this.read=r(this.read,this),this.set=r(this.set,this),this.adapter=r(this.adapter,this),this.update=r(this.update,this),this.initialize=r(this.initialize,this),this.parse=r(this.parse,this),this.parse(),this.initialize()}return t.prototype.parse=function(){var t,n,i,r,s,a;return t=function(){var e,t;e=this.view.adapters,t=[];for(n in e)s=e[n],t.push(n);return t}.call(this),a=this.keypath[0],o.call(t,a)>=0?(r=this.keypath[0],i=this.keypath.substr(1)):(r=this.view.config.rootInterface,i=this.keypath),this.tokens=e.KeypathParser.parse(i,t,r),this.key=this.tokens.pop()},t.prototype.initialize=function(){return this.objectPath=[],this.target=this.realize(),null!=this.target?this.set(!0,this.key,this.target,this.callback):void 0},t.prototype.update=function(){var e,t;return(e=this.realize())!==this.target&&(null!=this.target&&this.set(!1,this.key,this.target,this.callback),null!=e&&this.set(!0,this.key,e,this.callback),t=this.value(),this.target=e,this.value()!==t)?this.callback():void 0},t.prototype.adapter=function(e){return this.view.adapters[e["interface"]]},t.prototype.set=function(e,t,n,i){var r;return r=e?"subscribe":"unsubscribe",this.adapter(t)[r](n,t.path,i)},t.prototype.read=function(e,t){return this.adapter(e).read(t,e.path)},t.prototype.publish=function(e){return null!=this.target?this.adapter(this.key).publish(this.target,this.key.path,e):void 0},t.prototype.value=function(){return null!=this.target?this.read(this.key,this.target):void 0},t.prototype.realize=function(){var e,t,n,i,r,o,s,a;for(e=this.model,r=null,a=this.tokens,t=o=0,s=a.length;s>o;t=++o)i=a[t],null!=e?(null!=this.objectPath[t]?e!==(n=this.objectPath[t])&&(this.set(!1,i,n,this.update),this.set(!0,i,e,this.update),this.objectPath[t]=e):(this.set(!0,i,e,this.update),this.objectPath[t]=e),e=this.read(i,e)):(null==r&&(r=t),(n=this.objectPath[t])&&this.set(!1,i,n,this.update));return null!=r&&this.objectPath.splice(r),e},t.prototype.unobserve=function(){var e,t,n,i,r,o;for(o=this.tokens,e=i=0,r=o.length;r>i;e=++i)n=o[e],(t=this.objectPath[e])&&this.set(!1,n,t,this.update);return null!=this.target?this.set(!1,this.key,this.target,this.callback):void 0},t}(),e.binders.text=function(e,t){return null!=e.textContent?e.textContent=null!=t?t:"":e.innerText=null!=t?t:""},e.binders.html=function(e,t){return e.innerHTML=null!=t?t:""},e.binders.show=function(e,t){return e.style.display=t?"":"none"},e.binders.hide=function(e,t){return e.style.display=t?"none":""},e.binders.enabled=function(e,t){return e.disabled=!t},e.binders.disabled=function(e,t){return e.disabled=!!t},e.binders.checked={publishes:!0,bind:function(t){return e.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return e.Util.unbindEvent(t,"change",this.publish)},routine:function(e,t){var n;return e.checked="radio"===e.type?(null!=(n=e.value)?n.toString():void 0)===(null!=t?t.toString():void 0):!!t}},e.binders.unchecked={publishes:!0,bind:function(t){return e.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return e.Util.unbindEvent(t,"change",this.publish)},routine:function(e,t){var n;return e.checked="radio"===e.type?(null!=(n=e.value)?n.toString():void 0)!==(null!=t?t.toString():void 0):!t}},e.binders.value={publishes:!0,bind:function(t){return e.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return e.Util.unbindEvent(t,"change",this.publish)},routine:function(e,t){var n,i,r,s,a,l,d;if(null!=window.jQuery){if(e=jQuery(e),(null!=t?t.toString():void 0)!==(null!=(s=e.val())?s.toString():void 0))return e.val(null!=t?t:"")}else if("select-multiple"===e.type){if(null!=t){for(d=[],i=0,r=e.length;r>i;i++)n=e[i],d.push(n.selected=(a=n.value,o.call(t,a)>=0));return d}}else if((null!=t?t.toString():void 0)!==(null!=(l=e.value)?l.toString():void 0))return e.value=null!=t?t:""}},e.binders["if"]={block:!0,bind:function(e){var t,n;return null==this.marker?(t=[this.view.config.prefix,this.type].join("-").replace("--","-"),n=e.getAttribute(t),this.marker=document.createComment(" rivets: "+this.type+" "+n+" "),e.removeAttribute(t),e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e)):void 0},unbind:function(){var e;return null!=(e=this.nested)?e.unbind():void 0},routine:function(t,n){var i,r,o,s,a;if(!!n==(null==this.nested)){if(n){o={},a=this.view.models;for(i in a)r=a[i],o[i]=r;return s={binders:this.view.options.binders,formatters:this.view.options.formatters,adapters:this.view.options.adapters,config:this.view.options.config},(this.nested=new e.View(t,o,s)).bind(),this.marker.parentNode.insertBefore(t,this.marker.nextSibling)}return t.parentNode.removeChild(t),this.nested.unbind(),delete this.nested}},update:function(e){var t;return null!=(t=this.nested)?t.update(e):void 0}},e.binders.unless={block:!0,bind:function(t){return e.binders["if"].bind.call(this,t)},unbind:function(){return e.binders["if"].unbind.call(this)},routine:function(t,n){return e.binders["if"].routine.call(this,t,!n)},update:function(t){return e.binders["if"].update.call(this,t)}},e.binders["on-*"]={"function":!0,unbind:function(t){return this.handler?e.Util.unbindEvent(t,this.args[0],this.handler):void 0},routine:function(t,n){return this.handler&&e.Util.unbindEvent(t,this.args[0],this.handler),e.Util.bindEvent(t,this.args[0],this.handler=this.eventHandler(n))}},e.binders["each-*"]={block:!0,bind:function(e){var t;return null==this.marker?(t=[this.view.config.prefix,this.type].join("-").replace("--","-"),this.marker=document.createComment(" rivets: "+this.type+" "),this.iterated=[],e.removeAttribute(t),e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e)):void 0},unbind:function(){var e,t,n,i,r;if(null!=this.iterated){for(i=this.iterated,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e.unbind());return r}},routine:function(t,n){var i,r,o,s,a,l,d,c,u,h,f,p,m,v,g,y,b,w,x,T,C,k,_,D;if(c=this.args[0],n=n||[],this.iterated.length>n.length)for(T=Array(this.iterated.length-n.length),v=0,b=T.length;b>v;v++)o=T[v],m=this.iterated.pop(),m.unbind(),this.marker.parentNode.removeChild(m.els[0]);for(s=g=0,w=n.length;w>g;s=++g)if(d=n[s],r={index:s},r[c]=d,null==this.iterated[s]){C=this.view.models;for(l in C)d=C[l],null==r[l]&&(r[l]=d);h=this.iterated.length?this.iterated[this.iterated.length-1].els[0]:this.marker,u={binders:this.view.options.binders,formatters:this.view.options.formatters,adapters:this.view.options.adapters,config:{}},k=this.view.options.config;for(a in k)p=k[a],u.config[a]=p;u.config.preloadData=!0,f=t.cloneNode(!0),m=new e.View(f,r,u),m.bind(),this.iterated.push(m),this.marker.parentNode.insertBefore(f,h.nextSibling)}else this.iterated[s].models[c]!==d&&this.iterated[s].update(r);if("OPTION"===t.nodeName){for(_=this.view.bindings,D=[],y=0,x=_.length;x>y;y++)i=_[y],D.push(i.el===this.marker.parentNode&&"value"===i.type?i.sync():void 0);return D}},update:function(e){var t,n,i,r,o,s,a,l;t={};for(n in e)i=e[n],n!==this.args[0]&&(t[n]=i);for(a=this.iterated,l=[],o=0,s=a.length;s>o;o++)r=a[o],l.push(r.update(t));return l}},e.binders["class-*"]=function(e,t){var n;return n=" "+e.className+" ",!t==(-1!==n.indexOf(" "+this.args[0]+" "))?e.className=t?""+e.className+" "+this.args[0]:n.replace(" "+this.args[0]+" "," ").trim():void 0},e.binders["*"]=function(e,t){return null!=t?e.setAttribute(this.type,t):e.removeAttribute(this.type)},e.adapters["."]={id:"_rv",counter:0,weakmap:{},weakReference:function(e){var t;return null==e[this.id]&&(t=this.counter++,this.weakmap[t]={callbacks:{}},Object.defineProperty(e,this.id,{value:t})),this.weakmap[e[this.id]]},stubFunction:function(e,t){var n,i,r;return i=e[t],n=this.weakReference(e),r=this.weakmap,e[t]=function(){var t,o,s,a,l,d,c,u,h,f;a=i.apply(e,arguments),c=n.pointers;for(s in c)for(o=c[s],f=null!=(u=null!=(h=r[s])?h.callbacks[o]:void 0)?u:[],l=0,d=f.length;d>l;l++)(t=f[l])();return a}},observeMutations:function(e,t,n){var i,r,s,a,l,d;if(Array.isArray(e)){if(s=this.weakReference(e),null==s.pointers)for(s.pointers={},r=["push","pop","shift","unshift","sort","reverse","splice"],l=0,d=r.length;d>l;l++)i=r[l],this.stubFunction(e,i);if(null==(a=s.pointers)[t]&&(a[t]=[]),o.call(s.pointers[t],n)<0)return s.pointers[t].push(n)}},unobserveMutations:function(e,t,n){var i,r;return Array.isArray(e&&null!=e[this.id])&&(i=null!=(r=this.weakReference(e).pointers)?r[t]:void 0)?i.splice(i.indexOf(n),1):void 0},subscribe:function(e,t,n){var i,r,s=this;return i=this.weakReference(e).callbacks,null==i[t]&&(i[t]=[],r=e[t],Object.defineProperty(e,t,{enumerable:!0,get:function(){return r},set:function(o){var a,l,d;if(o!==r){for(r=o,d=i[t],a=0,l=d.length;l>a;a++)(n=d[a])();return s.observeMutations(o,e[s.id],t)}}})),o.call(i[t],n)<0&&i[t].push(n),this.observeMutations(e[t],e[this.id],t)},unsubscribe:function(e,t,n){var i;return i=this.weakmap[e[this.id]].callbacks[t],i.splice(i.indexOf(n),1),this.unobserveMutations(e[t],e[this.id],t)},read:function(e,t){return e[t]},publish:function(e,t,n){return e[t]=n}},e.factory=function(t){return t._=e,t.binders=e.binders,t.components=e.components,t.formatters=e.formatters,t.adapters=e.adapters,t.config=e.config,t.configure=function(t){var n,i;null==t&&(t={});for(n in t)i=t[n],e.config[n]=i},t.bind=function(t,n,i){var r;return null==n&&(n={}),null==i&&(i={}),r=new e.View(t,n,i),r.bind(),r}},"object"==typeof exports?e.factory(exports):"function"==typeof define&&define.amd?define("rivets",["exports"],function(t){return e.factory(this.rivets=t),t}):e.factory(this.rivets={})}.call(this),define("masseuse/plugins/rivets/loadRivets",["jquery","rivets","backbone","underscore"],function(e,t,n,i){function r(n){var r=[],o=this;return n.skipRoot?i.each(this.$el.contents(),function(n){r.push(t.bind(e(n),{model:o.model,view:o,collection:o.collection}))}):r.push(t.bind(this.$el,{model:this.model,view:this,collection:this.collection})),r}function o(e){var t=this,r={};return i.each(e,function(e,i){r["new-"+i.toLowerCase()]=function(i,r){var o={ViewType:e,el:i,_rivetsSkipRoot:!0};r instanceof n.Model?o.model=r:r instanceof n.Collection?o.collection=r:o.modelData=r,t.addChild(o)}}),r}return function(n){return t.configure({preloadData:!0,prefix:n.rivetsPrefix,handler:function(e,t,n){this.call(n.observer.target,t,n.view.models)}}),n.rivetsInstaUpdate&&(this.$("input").on("keypress paste textInput input",function(){e(this).trigger("change")}),this.listenTo(this,"onRemove",function(){this.$("input").off("keypress paste textInput input")})),t.config.templateDelimiters=n.rivetsDelimiters,i.extend(t.components,n.rivetsComponents),i.extend(t.formatters,n.rivetsFormatters),i.extend(t.adapters,n.rivetsAdapters),i.extend(t.binders,n.rivetsBinders,o.call(this,n.childViewBinders)),r.call(this,n)}}),define("masseuse/plugins/rivets/binders",["jquery"],function(e){function t(t){var n=e(t);n.attr("contenteditable")||n.attr("contenteditable",!0),this.callback=r.bind(this,t),n.on("keypress",this.callback),n.on("blur",this.callback)}function n(t){var n=e(t);n.off("keypress"),n.off("blur")}function i(e,t){this.view.binders.text.call(this,e,t)}function r(e,t){(13===t.keyCode||"blur"===t.type)&&this.view.adapters[":"].publish(this.model,this.keypath.substring(this.keypath.indexOf(":")+1),e.textContent)}function o(t,n){t.addedClass&&(e(t).removeClass(t.addedClass),delete t.addedClass),n&&(e(t).addClass(n),t.addedClass=n)}function s(e,t){e.style.width=t}function a(t){var n=this,i=e(t);i.on("keypress",function(e){13===e.keyCode&&(i.blur(),n.view.models.view[n.keypath](e))})}function l(t){e(t).off("keypress")}return{addclass:o,editable:{routine:i,bind:t,unbind:n},width:s,"on-enter-key-press":{bind:a,unbind:l}}}),define("masseuse/plugins/rivets/formatters",["underscore"],function(e){function t(t,n){return e[n](t)}function n(e){return e+", "}function i(e){return e.join(", ")}function r(e,t){switch(e){case 0:return e+" "+t+"s";case 1:return e+" "+t;default:return e+" "+t+"s"}}function o(e){return e+" / "}function s(e){return e+" : "}function a(e){return e+" "}function l(e){return" "+e}function d(e){var t,n=["Bytes","KB","MB","GB","TB"];return e=parseInt(e,10),0===e?"0 Bytes":(t=Math.floor(Math.log(e)/Math.log(1024)),Math.round(e/Math.pow(1024,t),2)+" "+n[t])}function c(e){var t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString("en-US",{hour12:!0})}function u(e){var t=new Date(e);
return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()}function h(e){var t=60,n=60*t,i="hr",o="min",s="sec",a=Math.floor(e/n),l=e%n,d=Math.floor(l/t),c=l%t,u=Math.ceil(c),h=[];return 0!==a&&h.push(r(a,i)),0!==d&&h.push(r(d,o)),0!==u&&h.push(r(u,s)),h.join(" ")}function f(e){return"$"+(e/100).toFixed(2)}function p(e){return"$"+e.toFixed(2)}function m(e,t){return e==t}function v(e,t){return e?e:t}function g(e,t){return e.slice(0,t)}function y(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function b(e){return e?e.charAt(0).toLowerCase()+e.slice(1):""}function w(e){return JSON.stringify(e,null,4)}function x(e){return e?"Enabled":"Disabled"}function T(){var e=Array.prototype.slice.call(arguments),t=e.shift();return-1!=e.indexOf(t)?!0:!1}function C(e,t){return t+e}function k(e,t){return t+e}function _(e){return!e}function D(){var t=!0;return e.each(arguments,function(e){t=t&&e}),t}function S(){var t=!1;return e.each(arguments,function(e){t=t||e}),t}return{_:t,and:D,booleantoenabled:x,centsToDollars:f,asDollars:p,equals:m,existsOr:v,humanize:{read:y,publish:b},includes:T,joinWithComma:i,jsonAsString:w,limit:g,not:_,or:S,pluralize:r,prefix:C,prettyDate:c,prettyDateNoTime:u,prettyFileSize:d,secondsToTime:h,spaceBefore:l,spaceAfter:a,suffix:k,withColon:s,withComma:n,withForwardSlash:o}}),define("masseuse/plugins/rivets/adapters",["jquery","rivets","backbone"],function(e,t,n){var i=/->/g;return{":":{subscribe:function(e,t,r){t=t.replace(i,"."),e instanceof n.Collection?e.on("add remove reset change",function(e,t){r(e.get(t))}):e instanceof n.Model&&e.on("change",function(){r(e.get(t))})},unsubscribe:function(e,t){"undefined"!=typeof e&&(e instanceof n.Collection?e.off("add remove reset change"):e.off&&e.off("change:"+t.replace(i,".")))},read:function(e,t){return e instanceof n.Collection?e.models:e.get(t.replace(i,"."))},publish:function(e,t,r){e instanceof n.Model&&e.set(t.replace(i,"."),r)}}}}),define("masseuse/plugins/rivets/plugin",["underscore","./loadRivets","./binders","./formatters","./adapters"],function(e,t,n,i,r){function o(o){var s,a;!1!==o.rivetsConfig&&!1!==o.rivetConfig&&(s="object"==typeof o.rivetsConfig?o.rivetsConfig:{},n=n||{},r=r||{},i=i||{},s.rivetsComponents=[{}].concat(s.components||o.rivetsComponents||o.rivetComponents),s.rivetsFormatters=[{},i].concat(s.formatters||o.rivetsFormatters||o.rivetFormatters),s.rivetsAdapters=[{},r].concat(s.adapters||o.rivetsAdapters||o.rivetAdapters),s.rivetsBinders=[{},n].concat(s.binders||o.rivetsBinders||o.rivetBinders),void 0!==s.rivetsInstaUpdate&&void 0===s.instaUpdate&&(s.instaUpdate=o.rivetsInstaUpdate),s.rivetsDelimiters=s.delimiters||o.rivetsDelimiters||o.rivetDelimiters,s.rivetsPrefix=s.prefix||o.rivetsPrefix||o.rivetPrefix,s={rivetsInstaUpdate:s.instaUpdate,rivetsDelimiters:s.rivetsDelimiters||["{{","}}"],rivetsPrefix:o.rivetsPrefix||"data-rv",rivetsComponents:e.extend.apply(e,s.rivetsComponents),rivetsFormatters:e.extend.apply(e,s.rivetsFormatters),rivetsAdapters:e.extend.apply(e,s.rivetsAdapters),rivetsBinders:e.extend.apply(e,s.rivetsBinders),childViewBinders:s.childViewBinders,skipRoot:s.skipRoot||o._rivetsSkipRoot},this.listenTo(this,"afterTemplatingDone",function(){a=t.call(this,s)}),this.listenTo(this,"onRemove",function(){a&&e.each(a,function(t){t.unbind(),e.each(t.bindings,function(e){delete e.el}),delete t.bindings,delete t.els,delete t.models}),a=void 0}))}return o}),define("masseuse/plugins/rivets/view",["../../views/baseView","./plugin"],function(e,t){function n(n){n.plugins=n.plugins||[],n.plugins.push(t),e.prototype.initialize.call(this,n)}return e.extend({initialize:n})}),define("masseuse/collections/masseuseCollection",["backbone","../models/masseuseModel"],function(e,t){return e.Collection.extend({model:t})}),define("masseuse/main",["./views/baseView","./utilities/channels","./views/viewContext","./routers/masseuseRouter","./models/masseuseModel","./models/computedProperty","./models/proxyProperty","./models/observerProperty","./plugins/rivets/view","./collections/masseuseCollection"],function(e,t,n,i,r,o,s,a,l,d){return{View:e,ViewContext:n,Model:r,Collection:d,Router:i,ComputedProperty:o,ProxyProperty:s,ObserverProperty:a,channels:t,BaseView:e,MasseuseModel:r,MasseuseRouter:i,utilities:{channels:t},plugins:{rivets:{RivetsView:l}}}}),define("masseuse",["masseuse/main"],function(e){return e}),define("constants",[],function(){var e="",t="0.27.9",n='[{"name":"ScrollToFixed","version":"1.0.6"},{"name":"SparkMD5","version":"0.0.5"},{"name":"ace","version":"1.1.3"},{"name":"ckeditor","version":"4.3.5"},{"name":"datetimepicker","version":"2.3.2"},{"name":"font-awesome","version":"4.1.0"},{"name":"foundation","version":"5.0.2"},{"name":"jquery.ui","version":"1.10.4"},{"name":"js-base64","version":"2.1.2"},{"name":"masseuse","version":"2.3.0"},{"name":"moment","version":"2.5.1"},{"name":"requirejs-text","version":"2.0.10"},{"name":"select2","version":"3.5.1"}]';return{version:t,libraryVersions:n,api:{base:{url:e},login:{url:e+"/token"},logout:{url:e+"/token/logout"},user:{url:e+"/user"},users:{url:e+"/users"},newUser:{url:e+"/users"},contentTypes:{url:e+"/contenttypes"},node:{url:e+"/node"},nodesChildren:{url:e+"/node/:id/children"},nodesContent:{url:e+"/node/:id/content"},assets:{url:e+"/node/:id/assets"},nodesContentTypes:{url:e+"/node/:id/contenttype"},content:{url:e+"/content"},contentQuery:{url:e+"/content/query"},version:{url:e+"/system"},google:{url:e+"/googleurl"}},internalRoutes:{user:"#user",users:"#users",addUser:"#addUser",sysInfo:"#sysinfo",contentTypes:"#contentTypes",newContentType:"#contentTypes/new",contentTypeDetail:"#contentTypes/:id",content:"#items",contentDetail:"#item/:id",nodeDetail:"#items/nodeid/:id",login:"#login",logout:"#logout",about:"#about",createFolder:"#items/nodeid/:id/createFolder",addContent:"#items/nodeid/:id/createContent",createAssets:"#items/nodeid/:id/createAssets",forbidden:"#forbidden"},timeouts:{showSpinnerLoadingTimeout:2e3},fileExtensionsMap:{pdf:"fa-file-pdf-o",doc:"fa-file-word-o",docx:"fa-file-word-o",xsl:"fa-file-excel-o",xslx:"fa-file-excel-o",txt:"fa-file-text",zip:"fa-file-archive-o",psd:"fa-file-image-o",ai:"fa-file-image-o",swf:"fa-file-video-o"},imageExtensions:["jpg","jpeg","png","bmp","webp","svg","gif"],contentSearchThrottle:1e3,pagination:{defaultLimit:25,defaultSkip:1,defaultPagesLimit:7,defaultPageSize:[25,50,100,"all"],defaultAllLimit:1e5},controlKeyCodeMap:{13:"enter",16:"shift",17:"cntrl",18:"alt",20:"capsLock",27:"esc",37:"lArr",38:"tArr",39:"rArr",40:"bArr",91:"leftCMD",93:"rightCMD"}}}),function(e){if(!e.Base64){var t,n="2.1.2";"undefined"!=typeof module&&module.exports&&(t=require("buffer").Buffer);var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(e){for(var t={},n=0,i=e.length;i>n;n++)t[e.charAt(n)]=n;return t}(i),o=String.fromCharCode,s=function(e){if(e.length<2){var t=e.charCodeAt(0);return 128>t?e:2048>t?o(192|t>>>6)+o(128|63&t):o(224|t>>>12&15)+o(128|t>>>6&63)+o(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return o(240|t>>>18&7)+o(128|t>>>12&63)+o(128|t>>>6&63)+o(128|63&t)},a=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,l=function(e){return e.replace(a,s)},d=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),r=[i.charAt(n>>>18),i.charAt(n>>>12&63),t>=2?"=":i.charAt(n>>>6&63),t>=1?"=":i.charAt(63&n)];return r.join("")},c=e.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,d)},u=t?function(e){return new t(e).toString("base64")}:function(e){return c(l(e))},h=function(e,t){return t?u(e).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):u(e)},f=function(e){return h(e,!0)},p=new RegExp(["[-][-]","[-][-]{2}","[-][-]{3}"].join("|"),"g"),m=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return o((n>>>10)+55296)+o((1023&n)+56320);case 3:return o((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return o((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},v=function(e){return e.replace(p,m)},g=function(e){var t=e.length,n=t%4,i=(t>0?r[e.charAt(0)]<<18:0)|(t>1?r[e.charAt(1)]<<12:0)|(t>2?r[e.charAt(2)]<<6:0)|(t>3?r[e.charAt(3)]:0),s=[o(i>>>16),o(i>>>8&255),o(255&i)];return s.length-=[0,0,2,1][n],s.join("")},y=e.atob||function(e){return e.replace(/[\s\S]{1,4}/g,g)},b=t?function(e){return new t(e,"base64").toString()}:function(e){return v(y(e))},w=function(e){return b(e.replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};if(e.Base64={VERSION:n,atob:y,btoa:c,fromBase64:w,toBase64:h,utob:l,encode:h,encodeURI:f,btou:v,decode:w},"function"==typeof Object.defineProperty){var x=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};e.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",x(function(){return w(this)})),Object.defineProperty(String.prototype,"toBase64",x(function(e){return h(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",x(function(){return h(this,!0)}))}}}}(this),define("base64",function(e){return function(){var t;return t||e.Base64}}(this)),define("helpers/utilities/localStorage",["jquery"],function(e){function t(e){return o.getItem(e)}function n(e,t){return o.setItem(e,t)}function i(t){var n=new e.Deferred;return o.removeItem(t),r(t,n),n.promise()}function r(e,t){null===o.getItem(e)?t.resolve():setTimeout(function(){r(e,t)},s)}var o=window.localStorage,s=10;return{get:t,set:n,remove:i}}),define("helpers/utilities/validation",["underscore"],function(e){return{stringHasLength:function(e){return!(!e||e.constructor!==String)},checkBoxChecked:function(e){return e},isEmail:function(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)},minLength:function(e,t){return e.length>=t},maxLength:function(e,t){return e.length<=t},isCurrency:function(e){return/^\$-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},isNumeric:function(e){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},isAlpha:function(e){return/^[a-z]+$/i.test(e)},isAlphaNumeric:function(e){return/^[a-z0-9]+$/i.test(e)},isBetween:function(e,t,n){return e.length>=t&&e.length<=n},isCreditCard:function(e){var t=/^[\d-\s]+$/.test(e);return t?this.validateLuhn(e):!1},validateLoginAttribute:function(e){return/^[\w.\-]+$/.test(e)},validateLuhn:function(e){var t,n=e.toString().split(""),i="",r=0;for(t=0;t<n.length;t++)i+=t%2?""+2*n[t]:""+n[t];for(t=0;t<i.length;t++)r+=parseInt(i[t],10);return r%10===0},createErrorMessages:function(){return e.unique(e.compact(arguments))},checkForErrors:function(){return e.find(arguments,function(e){return!!e})?!0:!1}}}),define("helpers/utilities/cleanCollection",["underscore"],function(e){function t(n){return e.each(n,function(i,r){!e.isObject(i)&&!e.isArray(i)||e.isEmpty(i)||t(i),(e.isUndefined(i)||e.isNull(i)||e.isNaN(i)||e.isEmpty(i)&&!e.isString(i)&&!e.isArray(i)&&!e.isBoolean(i))&&(e.isArray(n)?n.splice(r,1):delete n[r])}),n}return t}),define("helpers/utilities/browserTitles",[],function(){var e="Grasshopper";return{setBrowserTitle:function(t){document.title=e+(t?"  "+t:"")}}}),define("helpers/main",["./utilities/localStorage","./utilities/validation","./utilities/cleanCollection","./utilities/browserTitles"],function(e,t,n,i){return{localStorage:e,validation:t,cleanCollection:n,browserTitles:i}}),define("helpers",["helpers/main"],function(e){return e}),define("api",["jquery","constants","base64","masseuse","helpers"],function(e,t,n,i,r){var o=r.localStorage;return{getToken:function(i,r){return e.ajax({dataType:"json",url:t.api.login.url,type:"GET",headers:{Authorization:"Basic "+n.encode(i+":"+r)}})},unAuthenticatedRequest:function(t){return e.ajax({dataType:"json",url:t,type:"GET"})},authenticatedRequest:function(t){var n=o.get("authToken");return e.ajax({dataType:"json",url:t,type:"GET",headers:{Authorization:n}})},getUsers:function(){return this.authenticatedRequest(t.api.users.url)},getVersion:function(){return this.authenticatedRequest(t.api.version.url)},getContentTypes:function(){return this.authenticatedRequest(t.api.contentTypes.url)},getContentType:function(e){return this.authenticatedRequest(t.api.contentTypes.url+"/"+e)},getContentDetail:function(e){return this.authenticatedRequest(t.api.content.url+"/"+e)},getNodeDetail:function(e){return this.authenticatedRequest(t.api.node.url+"/"+e)},getNodesChildren:function(e){return this.authenticatedRequest(t.api.nodesChildren.url.replace(":id",e))},getNodesContent:function(e){return this.authenticatedRequest(t.api.nodesContent.url.replace(":id",e))},getGoogleUrl:function(){return this.unAuthenticatedRequest(t.api.google.url)},authenticateToken:function(){return this.authenticatedRequest(t.api.user.url)},removeAuthToken:function(){return this.authenticatedRequest(t.api.logout.url)},post:function(t,n){var i=o.get("authToken");return e.ajax({dataType:"json",url:t,type:"POST",data:n,headers:{Authorization:i}})},makeQuery:function(e){return this.post(t.api.contentQuery.url,e)},postFolder:function(e){return this.post(t.api.node.url,e)},renameAsset:function(e,t,n){return this.post(e+"/rename",{original:t,updated:n})},getContentByContentType:function(e){return this.makeQuery({nodes:[],types:[e],filters:[]})}}}),define("resources",{api:{base:{errors:{400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",408:"Request Timeout",500:"Server Error",503:"Service Unavailable"}},login:{errors:{400:"Bad Request",401:"Incorrect Username Or Password",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",408:"Request Timeout",500:"Server Error",503:"Service Unavailable"}}},user:{dontHaveAccount:"Don't have an account?",loggedInAs:"Logged in as",signIn:"Sign In",signInRegisteredUser:"Sign in using your registered account:",signUp:"Sign Up",userDetailHeaderText:"Profile for: ",attributeTitles:{name:"USER NAME:",firstName:"FIRST NAME",lastName:"LAST NAME",displayName:"DISPLAY NAME",role:"USER ROLE",enabled:"ENABLED?",email:"EMAIL",username:"USERNAME",password:"PASSWORD"},selfLockWarning:"You are about to disable yourself and lose access to the system. Are you sure you want to do this? (You Will still need to save to apply changes.",roles:["admin","editor","author","reader","external","none"],successfullyUpdated:"User was successfully updated",updateError:"User was successfully updated",errors:{403:"You do not have adequate permissions to view/edit this profile."},newUserAdded:"New User Added",couldNotFindUserContentType:"Could not find Users content type. Please make one.",addNewUser:"Add New User"},site:{about:"About Grasshopper"},mastheadButtons:{createContent:"Create Content",uploadFile:"Upload File",createFolder:"Create Folder",actions:"Actions",addNewUser:"Add New User",addContentType:"New Content Type",editNodeName:"Edit Name",editNodeContentTypes:"Edit Content Types",deleteNode:"Delete"},node:{deletionWarning:"Are you sure you want to delete this folder? All of its contents will also be deleted.",successfullyDeletedPre:"Folder ",successfullyDeletedPost:" was successfully deleted.",successfullyUpdated:"Folder was successfully updated.",successfullyCreatedPre:"Folder: ",successfullyCreatedPost:" was successfully created.",errorUpdated:"Folder could not be updated.",errorDeleted:"There was an issue deleting this folder: ",enterName:"Please enter the name of the folder: ",errorCreating:"Folder could not be added.",editName:"Edit folder name",emptyNode:"This folder does not contain any folders.",emptyContent:"This folder does not contain any content.",clickToAdd:"Click to add some."},contentItem:{deletionWarning:"Are you sure you want to delete this content?",successfullyDeletedPre:"Content ",successfullyDeletedPost:" was successfully deleted.",errorDeleted:"There was an issue deleting this content: ",readonly:"Readonly",labelErrorMessage:"Label is a required field.",successfullySaved:"Content successfully saved.",failedToSave:"Content could not be saved.",failedToFetch:"Content could not be retrieved.",failedToFetchContentsContentType:"Could not retrieve content type for this content.",label:"Label",labelRequiredMessage:"Label is a required field.",author:"Author",slug:"Slug",status:"Status",parent:"Parent Folder",id:"Content Id",type:"Content Type"},contentType:{addContentTypes:"Add Content Types: ",editContentTypes:"Edit allowed Content Types",contentTypeAdded:"Content Type Added",deletionWarningWithoutAssociatedContent:"Are you sure you want to delete this content type?",deletionWarningWithAssociatedContent:"You have :count of content associated with this content type. If you confirm it will all be deleted!",successfullyDeletedPre:"Content Type ",successfullyDeletedPost:" was successfully deleted.",errorDeleted:"There was an issue deleting this content type: ",serverError:"Content Types could not be retrieved.",selectContentType:"Which Content Type would you like to use?",contentInRoot:"You cannot create content in the Root.",noContentTypes:"This folder has no allowed content types.",fields:"Fields",fieldType:"Field Type",addNewField:"Add New Field",successfulSave:"Content type successfully saved.",failedSave:"Content type could not be saved.",removeFieldWarning:"If you delete this field it will be deleted from all content of this type.",addOption:"Add Option",helpText:"Help Text",description:"Description",emptyFields:'Click "Add new field" to add your first field.',switchingBetweenSimpleAndComplexTypesWarning:"You are switching between simple and complex data types. If you confirm, your content may be corrupted!",selectOption:"Please Select",thisFieldHasNoValidation:"This field has no validations",addValidationType:"Add Validation",validation:{mustHaveLabel:"Content type must have a title.",fieldsMustHaveLabel:"All fields must have a name.",fieldsMustHaveIds:"All fields should have ids",fieldsMustBeUnique:"All fields ids should be unique",firstFieldIsNotAStringWarning:"The first field in this content type is not a string. This could cause weird behavior in your content labels."}},asset:{deletionWarning:"Are you sure you want to delete this asset?",successfullyDeletedPre:"Asset Name: ",successfullyDeletedPost:" was successfully deleted.",errorDeleted:"There was an issue deleting this asset: ",editFileName:"Edit File Name",editNameSuccess:"File name was successfully updated.",editNameFail:"File name could not be updated.",uploadAssetError:"Upload Failed",dragFilesHere:"Drag and Drop Files Here. Or Click to Select.",uploadInRoot:"You cannot upload assets in the Root.",uploadAssetModalMsg:"Upload an Asset.",emptyNode:"This folder does not contain any files.",clickToAdd:"Click to add some."},contentBrowse:{author:"Author",modified:"Modified"},fileIndex:{files:"Files",fileName:"File Name",size:"Size",modified:"Modified"},nodeTree:{emptyFolder:{content:"This folder has no content.",files:"This folder has no files."}},pluginWrapper:{emptyFieldsMessage:"not set.",clickToAdd:"Click To Add."},plugins:{codeEditor:{language:"Language",theme:"Theme",loading:"LOADING CODE EDITOR..."},contentReference:{selectedContent:"Selected Content",currentFolder:"Current Folder",selectDefaultFolderOr:"Select Default Folder or",setRootAsDefault:"Set Root Folder as Default",defaultFolder:"Default Folder",contentTypes:"Content Types",selectContent:"Select Content",viewContent:"View Content"},dropdown:{selectOption:"Please Select"},editorialWindow:{loading:"Loading editorial window...",startAfterEnd:"Start date is after end date",setToNow:"Set to now",start:"Start",end:"End",neverExpire:"Never Expire",dateFormat:"YYYY/MM/DD h:mm a"},embeddedType:{contentType:"Content Type"},fileReference:{selectedFile:"Selected File",currentFolder:"Current Folder",selectDefaultFolderOr:"Select Default Folder or",setRootAsDefault:"Set Root Folder as Default",defaultFolder:"Default Folder",contentTypes:"Content Types",selectFile:"Select File",viewSelectedFile:"View Selected File"},richText:{selectFile:"Select File",loading:"LOADING RICH TEXT..."},slug:{refresh:"Refresh",selectField:"Select Field"}},validationViews:{deletionWarning:"You are about to delete a validation field. Are you sure you want to do this?"},actions:"Actions",add:"Add",addNewUser:"Add New User",cancel:"Cancel",close:"Close",confirm:"Confirm",content:"Content",contentTypes:"Content Types",forbidden:"Forbidden",currentlySignedIn:"You are currently signed in.",dashboard:"Dashboard",defaultValue:"Default Value",download:"Download",edit:"Edit",email:"Email",enabled:"Enabled",error:"Error",falseText:"False",from:"From",home:"Home",helpText:"Help Text",id:"ID",key:"Key",label:"Label",login:"Login",log_in:"Log In",logInWithGoogle:"Login with Google",log_out:"Log Out",match:"Match",maximum:"Maximum",max:"Max",menu:"Menu",minimum:"Minimum",min:"Min",allowMultiple:"Allow Multiple",allowMultipleSettings:"Allow Multiple Settings",multiple:"Multiple",name:"Name",next:"Next",newWord:"New",no:"No",ok:"Ok",options:"Options",open:"Open",password:"Password",previous:"Previous",profile:"Profile",remind:"Remind",remove:"Remove",retry:"Retry",required:"Required",role:"Role",root:"Root",save:"Save",saveAndClose:"Save and Close",selectOption:"Please Select",select:"Select",settings:"Settings",siteName:"Grasshopper",status:"Status",success:"Success",summary:"Summary",thisIsNotImplemented:"This is not yet implemented.",title:"Title",to:"To",trueText:"True",type:"Type",types:"Types",upload:"Upload",user_name:"User Name",users:"Users",sysInfo:"Info",value:"Value",validation:"Validation",warning:"Warning!",welcomeBack:"Welcome Back",yes:"Yes"}),define("grasshopperBaseView",["backbone","masseuse","resources"],function(e,t,n){function i(t){t.viewOptions=t.viewOptions||[],t.viewOptions=t.viewOptions.concat(["$deferred","type","defaultBreadcrumbs","defaultMastheadButtons","breadcrumbs","privateBreadcrumbs","mastheadButtons","permissions","nodeId","wrapper","appendTo","collection","browserTitle"]),this.options=t,e.Collection.prototype.set=function(e,t){e&&e.results&&(e=e.results),l.call(this,e,t)},a.prototype.initialize.apply(this,arguments)}function r(){this.breadcrumbs&&!this.privateBreadcrumbs&&this.channels.views.trigger("updateMastheadBreadcrumbs",this)}function o(){return this.permissions&&-1===this.permissions.indexOf(this.app.user.get("role"))?void this.app.router.navigateTrigger("forbidden",{replace:!0}):a.prototype.start.apply(this,arguments).done(r.bind(this))}function s(e){return this.displayModal({header:n.error,type:"error",msg:e})}var a=t.plugins.rivets.RivetsView,l=e.Collection.prototype.set;return a.extend({initialize:i,start:o,fireErrorModal:s,mastheadButtonsSelector:"#mastheadButtons"})}),define("text",["module"],function(e){var t,n,i,r,o,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,c=d&&location.protocol&&location.protocol.replace(/\:/,""),u=d&&location.hostname,h=d&&(location.port||void 0),f={},p=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(i){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,i,r=!1,o=e.indexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!s||o>1)?(t=e.substring(0,o),n=e.substring(o+1,e.length)):t=e,i=n||t,o=i.indexOf("!"),-1!==o&&(r="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:t=i),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,r){var o,s,a,l=t.xdRegExp.exec(e);return l?(o=l[2],s=l[3],s=s.split(":"),a=s[1],s=s[0],!(o&&o!==n||s&&s.toLowerCase()!==i.toLowerCase()||(a||s)&&a!==r)):!0},finishLoad:function(e,n,i,r){i=n?t.strip(i):i,p.isBuild&&(f[e]=i),r(i)},load:function(e,n,i,r){if(r.isBuild&&!r.inlineText)return void i();p.isBuild=r.isBuild;var o=t.parseName(e),s=o.moduleName+(o.ext?"."+o.ext:""),a=n.toUrl(s),l=p.useXhr||t.useXhr;return 0===a.indexOf("empty:")?void i():void(!d||l(a,c,u,h)?t.get(a,function(n){t.finishLoad(e,o.strip,n,i)},function(e){i.error&&i.error(e)}):n([s],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,i)}))},write:function(e,n,i){if(f.hasOwnProperty(n)){var r=t.jsEscape(f[n]);i.asModule(e+"!"+n,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,n,i,r,o){var s=t.parseName(n),a=s.ext?"."+s.ext:"",l=s.moduleName+a,d=i.toUrl(s.moduleName+a)+".js";t.load(l,i,function(){var n=function(e){return r(d,e)};n.asModule=function(e,t){return r.asModule(e,d,t)},t.write(e,l,n,o)},o)}},"node"===p.env||!p.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var r=n.readFileSync(e,"utf8");0===r.indexOf("")&&(r=r.substring(1)),t(r)}catch(o){i(o)}}):"xhr"===p.env||!p.env&&t.createXhr()?t.get=function(e,n,i,r){var o,s=t.createXhr();if(s.open("GET",e,!0),r)for(o in r)r.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),r[o]);p.onXhr&&p.onXhr(s,e),s.onreadystatechange=function(){var t,r;4===s.readyState&&(t=s.status,t>399&&600>t?(r=new Error(e+" HTTP status: "+t),r.xhr=s,i(r)):n(s.responseText),p.onXhrComplete&&p.onXhrComplete(s,e))},s.send(null)}:"rhino"===p.env||!p.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,r="utf-8",o=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),r)),l="";try{for(n=new java.lang.StringBuffer,i=a.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=a.readLine());)n.append(s),n.append(i);l=String(n.toString())}finally{a.close()}t(l)}:("xpconnect"===p.env||!p.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,r=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,s,a,l={};o&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream),n.init(a,1,0,!1),s=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream),s.init(n,"utf-8",n.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),l),s.close(),n.close(),t(l.value)}catch(d){throw new Error((a&&a.path||"")+": "+d)}}),t}),define("text!views/login/template.html",[],function(){return'<div id="login-page">\n    <div class="row">\n        <div class="large-5 small-centered columns">\n            <div class="account-container login stacked">\n                <div class="content clearfix">\n                    <div class="row">\n                        <div class="small-centered columns">\n                            <h1>\n                                {{model:resources->user->signIn}}\n                            </h1>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="small-centered columns">\n                            <div class="login-fields">\n\n                                <p>{{model:resources->user->signInRegisteredUser}}</p>\n\n\n                                <div class="field row collapse">\n                                    <div class="small-2 columns">\n                                        <span class="prefix"><i class="fa fa-user"></i></span>\n                                    </div>\n                                    <div class="small-10 columns">\n                                        <input type="text" data-rv-class-error="model:usernameError" placeholder="User Name" data-rv-value="model:username" class="login username-field">\n                                        <div data-rv-text="model:usernameError"></div>\n                                    </div>\n                                </div>\n\n                                <div class="field row collapse">\n                                    <div class="small-2 columns">\n                                        <span class="prefix"><i class="fa fa-key"></i></span>\n                                    </div>\n                                    <div class="small-10 columns">\n                                        <input type="password" data-rv-class-error="model:passwordError" placeholder="Password" data-rv-value="model:password" class="login password-field">\n                                        <div data-rv-text="model:passwordError"></div>\n                                    </div>\n                                </div>\n\n                            </div>\n\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="small-12 columns">\n                            <button id="loginWithGoogleButton" class="button success radius tiny left" data-rv-on-click="view.loginWithGoogle" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:loggingIn">\n                                {{model:resources->logInWithGoogle}}\n                            </button>\n\n                            <button id="loginButton" class="button success radius tiny right" data-rv-class-disabled="model:hasError" data-rv-on-click="view.login"  data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:loggingIn">\n                                {{model:resources->user->signIn}}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'}),define("grasshopperModel",["backbone","masseuse","resources","constants","underscore","helpers","jquery"],function(e,t,n,i,r,o,s){function a(t){var n=f.get("authToken"),i=Array.prototype.slice.call(arguments,0),o={data:{},headers:{Authorization:n},success:function(){}};return t&&(r.extend(o.data,t.data),r.extend(o.headers,t.headers),r.extend(o.success,t.success)),i[0]=o,e.Model.prototype.fetch.apply(this,i)}function l(t){var n,i,o=r.extend({},t,{headers:{Authorization:f.get("authToken")}});return i=e.Model.prototype.save.call(this,null,o),i?i:(n=new s.Deferred,n.reject(),n.promise())}function d(t){return t=t||{},t.headers=r.extend({},t.headers,{Authorization:f.get("authToken")}),e.Model.prototype.destroy.call(this,t)}function c(){return r.clone(r.omit(this.attributes,"resources","contants","schema","plugins","href"))}function u(e){this.set(e,this.get(e)?!1:!0)}var h=t.MasseuseModel,f=o.localStorage;return h.extend({fetch:a,save:l,destroy:d,toJSON:c,toggle:u})}),define("validationLibrary",[],function(){return{stringHasLength:function(e){return!(!e||e.constructor!==String)}}}),define("login/model",["grasshopperModel","masseuse","validationLibrary","underscore","resources"],function(e,t,n,i,r){function o(e){var t,r=this;return i.forEach(["username","password"],function(i){var o=e[i];r.set(i,o),n.stringHasLength(o)||(t=!0)}),t}function s(e){return n.stringHasLength(e)?void 0:"Too Short."}function a(e,t){return!(!e&&!t)}var l=t.ComputedProperty;return e.extend({validate:o,defaults:{resources:r,loggingIn:!1,username:"",password:"",usernameError:new l(["username"],s,!0),passwordError:new l(["password"],s,!0),hasError:new l(["usernameError","passwordError"],a)}})
}),define("text!views/pluginWrapper/pluginWrapperView.html",[],function(){return'<div class="row pluginWrapper">\n    <div class="large-12 small-centered columns">\n        <div class="row">\n\n            <div class="small-2 columns">\n                <label data-rv-for="model:_id | prepend pluginWrapper" class="right inline">{{model:label}}</label>\n            </div>\n\n            <div class="small-10 columns">\n\n                <div class="row emptyFieldMessage" data-rv-hide="collection: | hasLength">\n                    <div class="small-12 columns">\n                        <label>\n                            {{model:label | spaceAfter}}{{model:resources->pluginWrapper->emptyFieldsMessage}}\n                            <a data-rv-on-click="view.addField">{{model:resources->pluginWrapper->clickToAdd}}</a>\n                        </label>\n                    </div>\n                </div>\n\n\n                <div class="row" data-rv-id="model.cid | prepend sortableMulti" data-rv-show="collection: | hasLength">\n                    <div data-rv-id="model:_id | prepend pluginWrapper" data-rv-each-field="collection:" data-rv-sortIndex="index | prepend sort">\n\n                        <div class="row collapse sortableMulti" data-rv-modelid="field.cid">\n                            <div data-rv-sortable-multi-columns="model:showSortableButton" class="small-10 columns">\n                                <div data-rv-fieldtype="field"></div>\n                            </div>\n                            <div data-rv-if="model:showSortableButton" class="small-1 columns text-center">\n                                <div class="button radius tiny sortableMultiHandle"><i class="fa fa-sort"></i></div>\n                            </div>\n                            <div class="small-1 columns">\n                                <button type="button" id="removeField" class="button radius tiny" data-rv-on-click="view.removeField" data-rv-show="model:showSubtractionButton"><i class="fa fa-minus"></i></button>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n\n                <div class="row">\n                    <div class="small-11 columns">\n                        <blockquote data-rv-show="model:helpText" data-rv-text="model:helpText"></blockquote>\n                    </div>\n                    <div class="small-1 columns" style="padding-left: 0;">\n                        <button type="button" id="addField" class="button radius tiny noMarginBottom" data-rv-on-click="view.addField" data-rv-show="model:showAdditionButton">\n                            <i class="fa fa-plus"></i>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <hr>\n    </div>\n</div>'}),define("pluginWrapperViewModel",["grasshopperModel","resources"],function(e,t){return e.extend({defaults:{resources:t}})}),define("text!plugins/boolean/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns checkboxMarginTop">\n        <input type="checkbox" data-rv-checked="model:value">\n    </div>\n</div>'}),define("plugins/boolean/model",["grasshopperModel","resources"],function(e,t){return e.extend({defaults:{resources:t}})}),define("text!plugins/boolean/setupTemplate.html",[],function(){return""}),define("plugins/boolean/config.js",["text!plugins/boolean/template.html","plugins/boolean/model","text!plugins/boolean/setupTemplate.html"],function(e,t,n){return{name:"booleanPlugin",ModelType:t,modelData:function(){return{min:1,max:1,options:!1,label:"",type:"boolean",dataType:"boolean",validation:[],value:!1}},template:e,setupTemplate:n,wrapper:!1}}),define("plugins/boolean/view.js",["grasshopperBaseView"],function(e){return e.extend({})}),define("text!plugins/checkbox/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns checkboxMarginTop">\n        <div data-rv-each-option="collection:">\n            <input data-rv-id="option:_id | prepend checkboxlist" class="checkboxListCheckbox" type="checkbox" data-rv-checked="option:checked">\n            <label data-rv-for="option:_id | prepend checkboxlist">{{option:label}}</label>\n        </div>\n    </div>\n</div>'}),define("plugins/checkbox/model",["grasshopperModel","resources"],function(e,t){return e.extend({defaults:{resources:t}})}),define("text!plugins/checkbox/setupTemplate.html",[],function(){return'<div class="row">\n    <div class="small-12 columns">\n        <div data-rv-each-option="collection:">\n\n            <div class="row-collapse">\n                <div class="small-11 columns">\n\n                    <div class="row">\n                        <div class="small-2 columns">\n                            <label class="right inline">{{model:resources->label}}</label>\n                        </div>\n                        <div class="small-10 columns">\n                            <input type="text" class="optionInput" placeholder="dropdown option" data-rv-value="option:label" style="margin-bottom: 2px;">\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="small-2 columns">\n                            <label class="right inline">{{model:resources->key}}</label>\n                        </div>\n                        <div class="small-10 columns">\n                            <input type="text" class="optionInput" placeholder="dropdown option" data-rv-value="option:_id" style="margin-bottom: 2px;">\n                        </div>\n                    </div>\n\n                </div>\n\n                <div class="small-1 columns">\n                    <button id="removeOption" data-rv-on-click="view.removeOption" class="button radius tiny"><i class="fa fa-minus"></i></button>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-11 columns small-offset-1">\n                    <hr>\n                </div>\n            </div>\n        </div>\n\n        <button id="addOption" class="right tiny radius"><i class="fa fa-plus"></i></button>\n\n\n    </div>\n</div>'}),define("plugins/checkbox/config.js",["text!plugins/checkbox/template.html","plugins/checkbox/model","text!plugins/checkbox/setupTemplate.html"],function(e,t,n){return{name:"checkboxPlugin",ModelType:t,modelData:function(){return{min:1,max:1,options:!0,label:"",type:"checkbox",dataType:"boolean",validation:[]}},template:e,setupTemplate:n,events:{"click #addOption":"addOption","blur .optionInput":"reduceOptions","click .checkboxListCheckbox":"reduceValues"},wrapper:!1}}),define("grasshopperCollection",["backbone","resources","constants","underscore","helpers"],function(e,t,n,i,r){function o(t){var n=d.get("authToken"),r=Array.prototype.slice.call(arguments,0),o={data:{},headers:{Authorization:n},success:function(){}};return t&&(i.extend(o.data,t.data),i.extend(o.headers,t.headers),i.extend(o.success,t.success)),r[0]=o,e.Collection.prototype.fetch.apply(this,r)}function s(){var t={headers:{Authorization:d.get("authToken")}};return e.Collection.prototype.save.call(this,null,t)}function a(t){return t=t||{},t.headers=i.extend({},t.headers,{Authorization:d.get("authToken")}),e.Collection.prototype.destroy.call(this,t)}var l=e.Collection,d=r.localStorage;return l.extend({fetch:o,save:s,destroy:a})}),define("plugins/checkbox/optionsCollection",["grasshopperCollection","backbone","underscore"],function(e,t,n){function i(){var e=t.Collection.prototype.toJSON.apply(this);return n.map(e,function(e){return n.pick(e,"_id","label")})}function r(){var e=t.Collection.prototype.toJSON.apply(this),i={};return n.each(e,function(e){i[e._id]=!!e.checked}),i}function o(e){var t=this;n.each(e,function(e,n){t.findWhere({_id:n}).set("checked",e)})}return e.extend({reduceOptions:i,reduceValues:r,hydrateOptionsWithValues:o})}),define("plugins/checkbox/view.js",["grasshopperBaseView","underscore","plugins/checkbox/optionsCollection"],function(e,t,n){function i(e){this.collection=new n(this.model.get("options")),this.model.get("inSetup")?d.call(this):c.call(this),t.defer(e.resolve)}function r(){this.model.get("value")?this.collection.hydrateOptionsWithValues(this.model.get("value")):this.reduceValues()}function o(){this.collection.add({_id:"",label:""})}function s(e,t){this.collection.remove(t.option)}function a(){this.model.set("options",this.collection.reduceOptions())}function l(){this.model.set("value",this.collection.reduceValues())}function d(){this.collection.on("all",this.reduceOptions.bind(this))}function c(){this.collection.on("all",this.reduceValues.bind(this))}return e.extend({beforeRender:i,afterRender:r,addOption:o,removeOption:s,reduceOptions:a,reduceValues:l})}),define("text!plugins/codeeditor/template.html",[],function(){return'<div class="row">\n    <div class="small-12 columns">\n        <div id="loadingSpinner" data-rv-show="model:loading">\n            <span>{{model:resources->plugins->codeEditor->loading}}</span>\n            <i data-rv-show="model:loading" class="fa fa-refresh fa fa-spin"></i>\n        </div>\n        <div id="codeEditor" class="codeEditor" data-rv-hide="model:loading"></div>\n    </div>\n</div>'}),define("plugins/codeeditor/model",["grasshopperModel","resources","masseuse","underscore"],function(e,t,n,i){var r=n.ComputedProperty;return e.extend({defaults:function(){return{resources:t,loading:!1,possibleLanguages:["javascript","html","css","json","markdown"],possibleThemes:["light","dark"],currentThemeLocation:new r(["options"],function(e){return i.has(e,"theme")?"ace/theme/"+e.theme.replace("light","github").replace("dark","monokai"):void 0}),currentModeLocation:new r(["options"],function(e){return i.has(e,"language")?"ace/mode/"+e.language.replace(" ","_"):void 0})}}})}),define("text!plugins/codeeditor/setupTemplate.html",[],function(){return'<div class="row">\n\n    <div class="row">\n        <div class="small-2 columns">\n            <label class="right inline">{{model:resources->plugins->codeEditor->theme | withEditor}}</label>\n        </div>\n        <div class="small-10 columns">\n            <select data-rv-value="model:options->theme">\n                <option data-rv-each-option="model:possibleThemes" data-rv-value="option">{{option}}</option>\n            </select>\n        </div>\n    </div>\n    <div class="row">\n        <div class="small-2 columns">\n            <label class="right inline">{{model:resources->plugins->codeEditor->language | withEditor}}</label>\n        </div>\n        <div class="small-10 columns">\n            <select data-rv-value="model:options->language">\n                <option data-rv-each-option="model:possibleLanguages" data-rv-value="option">{{option}}</option>\n            </select>\n        </div>\n    </div>\n\n</div>'}),define("plugins/codeeditor/config.js",["text!plugins/codeeditor/template.html","plugins/codeeditor/model","text!plugins/codeeditor/setupTemplate.html"],function(e,t,n){return{name:"codeEditorPlugin",ModelType:t,modelData:function(){return{min:1,max:1,options:{theme:"light",language:"javascript"},label:"",type:"codeeditor",dataType:"code",validation:[],value:""}},template:e,setupTemplate:n,wrapper:!1}}),define("plugins/codeeditor/view.js",["grasshopperBaseView","underscore","jquery","require"],function(e,t,n,i){function r(){this.model.get("inSetup")||o.call(this)}function o(){var e=this;p.call(this),i(["ace/editor","ace/virtual_renderer"],function(t,n){var i=t.Editor,r=n.VirtualRenderer;e.editor=new i(new r(e.$("#codeEditor")[0])),s.call(e),a.call(e),l.call(e),d.call(e),c.call(e),u.call(e),f.call(e),p.call(e)})}function s(){this.editor.setOptions({maxLines:500,minLines:10})}function a(){this.editor.setShowPrintMargin(!1)}function l(){this.editor.getSession().setUseWrapMode(!0)}function d(){this.editor.setTheme(this.model.get("currentThemeLocation"))}function c(){this.editor.getSession().setMode(this.model.get("currentModeLocation"))}function u(){this.editor.on("blur",h.bind(this))}function h(){this.model.set("value",this.editor.getValue())}function f(){var e=this.model.get("value");t.isUndefined(e)||this.editor.setValue(e)}function p(){this.model.toggle("loading")}return e.extend({afterRender:r})}),define("text!plugins/contentreference/template.html",[],function(){return'<div class="row">\n    <div class="small-8 columns">\n        <input type="text" data-rv-value="model:selectedContentLabel" readonly="true">\n    </div>\n    <div class="small-4 columns">\n\n        <ul class="button-group radius">\n            <li>\n                <button class="button tiny" data-rv-on-click="view.fireSelectContentModal">\n                    {{model:resources->plugins->contentReference->selectContent}}\n                </button>\n            </li>\n            <li data-rv-show="model:selectedContentLabel">\n                <a class="button tiny" data-rv-href="model:selectedContentHref" target="_blank">\n                    {{model:resources->plugins->contentReference->viewContent}}\n                </a>\n            </li>\n        </ul>\n\n    </div>\n</div>'}),define("plugins/contentreference/model",["grasshopperModel","resources","backbone","constants","grasshopperCollection","masseuse"],function(e,t,n,i,r,o){function s(){var t=this;e.prototype.initialize.apply(this,arguments),this.set("children",new(r.extend({url:function(){return i.api.nodesChildren.url.replace(":id",t.get("_id"))}}))),this.on("change:options",function(){"0"!==this.get("options.defaultNode")&&this.set("selectedNodeLabel",this.get("children").findWhere({_id:this.get("options.defaultNode")}).get("label"))})}var a=o.ComputedProperty;return e.extend({initialize:s,defaults:{resources:t,showTree:!1,selectedContentHref:new a(["value"],function(e){return i.internalRoutes.contentDetail.replace(":id",e)}),selectedContentLabel:new a(["contentDetails"],function(){return this.get("contentDetails.fields."+this.get("contentDetails.meta.labelfield"))}),_id:"0"},urlRoot:i.api.node.url})}),define("text!plugins/contentreference/setupTemplate.html",[],function(){return'<div class="row">\n    <div class="small-6 columns">\n        <div class="row">\n            <div class="small-12 columns">\n                <label>{{model:resources->plugins->contentReference->defaultFolder | withColon}}\n                    <div class="row collapse">\n                        <div class="small-11 columns">\n                            <input type="text" data-rv-value="model:selectedNodeLabel" readonly="true">\n                        </div>\n                        <div class="small-1 columns" style="padding-left: 0;">\n                            <span class="postfix radius"><i class="fa fa-lock"></i></span>\n                        </div>\n                    </div>\n                </label>\n            </div>\n        </div>\n        <div class="row">\n            <div class="small-12 columns">\n                <label>\n                    {{model:resources->plugins->contentReference->selectDefaultFolderOr}}\n                    <span>\n                        <a data-rv-on-click="view.setRootAsDefaultNode">\n                            {{model:resources->plugins->contentReference->setRootAsDefault}}\n                        </a>\n                    </span>\n\n                    <div data-rv-hide="model:showTree"><i class="fa fa-refresh"></i></div>\n                    <div data-rv-show="model:showTree" id="nodeTree">\n                        <div data-rv-each-node="model:children:" data-rv-nodetree="node"></div>\n                    </div>\n                </label>\n            </div>\n        </div>\n    </div>\n\n    <div class="small-6 columns">\n        <div class="row">\n            <div class="small-12 columns">\n                <label>Allowed Content Types:\n                    <div data-rv-each-option="model:availableTypes" class="availableTypes">\n                        <input data-rv-id="option._id" type="checkbox" data-rv-checked="option.checked">\n                        <label data-rv-for="option._id">{{option.label}}</label>\n                    </div>\n                </label>\n            </div>\n        </div>\n    </div>\n</div>'}),function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define("sparkmd5",e);else{var t;try{t=window}catch(n){t=self}t.SparkMD5=e()}}(function(){var e=function(e,t){return e+t&4294967295},t=function(t,n,i,r,o,s){return n=e(e(n,t),e(r,s)),e(n<<o|n>>>32-o,i)},n=function(e,n,i,r,o,s,a){return t(n&i|~n&r,e,n,o,s,a)},i=function(e,n,i,r,o,s,a){return t(n&r|i&~r,e,n,o,s,a)},r=function(e,n,i,r,o,s,a){return t(n^i^r,e,n,o,s,a)},o=function(e,n,i,r,o,s,a){return t(i^(n|~r),e,n,o,s,a)},s=function(t,s){var a=t[0],l=t[1],d=t[2],c=t[3];a=n(a,l,d,c,s[0],7,-680876936),c=n(c,a,l,d,s[1],12,-389564586),d=n(d,c,a,l,s[2],17,606105819),l=n(l,d,c,a,s[3],22,-1044525330),a=n(a,l,d,c,s[4],7,-176418897),c=n(c,a,l,d,s[5],12,1200080426),d=n(d,c,a,l,s[6],17,-1473231341),l=n(l,d,c,a,s[7],22,-45705983),a=n(a,l,d,c,s[8],7,1770035416),c=n(c,a,l,d,s[9],12,-1958414417),d=n(d,c,a,l,s[10],17,-42063),l=n(l,d,c,a,s[11],22,-1990404162),a=n(a,l,d,c,s[12],7,1804603682),c=n(c,a,l,d,s[13],12,-40341101),d=n(d,c,a,l,s[14],17,-1502002290),l=n(l,d,c,a,s[15],22,1236535329),a=i(a,l,d,c,s[1],5,-165796510),c=i(c,a,l,d,s[6],9,-1069501632),d=i(d,c,a,l,s[11],14,643717713),l=i(l,d,c,a,s[0],20,-373897302),a=i(a,l,d,c,s[5],5,-701558691),c=i(c,a,l,d,s[10],9,38016083),d=i(d,c,a,l,s[15],14,-660478335),l=i(l,d,c,a,s[4],20,-405537848),a=i(a,l,d,c,s[9],5,568446438),c=i(c,a,l,d,s[14],9,-1019803690),d=i(d,c,a,l,s[3],14,-187363961),l=i(l,d,c,a,s[8],20,1163531501),a=i(a,l,d,c,s[13],5,-1444681467),c=i(c,a,l,d,s[2],9,-51403784),d=i(d,c,a,l,s[7],14,1735328473),l=i(l,d,c,a,s[12],20,-1926607734),a=r(a,l,d,c,s[5],4,-378558),c=r(c,a,l,d,s[8],11,-2022574463),d=r(d,c,a,l,s[11],16,1839030562),l=r(l,d,c,a,s[14],23,-35309556),a=r(a,l,d,c,s[1],4,-1530992060),c=r(c,a,l,d,s[4],11,1272893353),d=r(d,c,a,l,s[7],16,-155497632),l=r(l,d,c,a,s[10],23,-1094730640),a=r(a,l,d,c,s[13],4,681279174),c=r(c,a,l,d,s[0],11,-358537222),d=r(d,c,a,l,s[3],16,-722521979),l=r(l,d,c,a,s[6],23,76029189),a=r(a,l,d,c,s[9],4,-640364487),c=r(c,a,l,d,s[12],11,-421815835),d=r(d,c,a,l,s[15],16,530742520),l=r(l,d,c,a,s[2],23,-995338651),a=o(a,l,d,c,s[0],6,-198630844),c=o(c,a,l,d,s[7],10,1126891415),d=o(d,c,a,l,s[14],15,-1416354905),l=o(l,d,c,a,s[5],21,-57434055),a=o(a,l,d,c,s[12],6,1700485571),c=o(c,a,l,d,s[3],10,-1894986606),d=o(d,c,a,l,s[10],15,-1051523),l=o(l,d,c,a,s[1],21,-2054922799),a=o(a,l,d,c,s[8],6,1873313359),c=o(c,a,l,d,s[15],10,-30611744),d=o(d,c,a,l,s[6],15,-1560198380),l=o(l,d,c,a,s[13],21,1309151649),a=o(a,l,d,c,s[4],6,-145523070),c=o(c,a,l,d,s[11],10,-1120210379),d=o(d,c,a,l,s[2],15,718787259),l=o(l,d,c,a,s[9],21,-343485551),t[0]=e(a,t[0]),t[1]=e(l,t[1]),t[2]=e(d,t[2]),t[3]=e(c,t[3])},a=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n},l=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n},d=function(e){var t,n,i,r,o,l,d=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;d>=t;t+=64)s(c,a(e.substring(t-64,t)));for(e=e.substring(t-64),n=e.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(s(c,i),t=0;16>t;t+=1)i[t]=0;return r=8*d,r=r.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),l=parseInt(r[1],16)||0,i[14]=o,i[15]=l,s(c,i),c},c=function(e){var t,n,i,r,o,a,d=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;d>=t;t+=64)s(c,l(e.subarray(t-64,t)));for(e=d>t-64?e.subarray(t-64):new Uint8Array(0),n=e.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)i[t>>2]|=e[t]<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(s(c,i),t=0;16>t;t+=1)i[t]=0;return r=8*d,r=r.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),a=parseInt(r[1],16)||0,i[14]=o,i[15]=a,s(c,i),c},u=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],h=function(e){var t,n="";for(t=0;4>t;t+=1)n+=u[e>>8*t+4&15]+u[e>>8*t&15];return n},f=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=h(e[t]);return e.join("")},p=function(e){return f(d(e))},m=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==p("hello")&&(e=function(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}),m.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},m.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;n>=t;t+=64)s(this._state,a(this._buff.substring(t-64,t)));return this._buff=this._buff.substr(t-64),this},m.prototype.end=function(e){var t,n,i=this._buff,r=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;r>t;t+=1)o[t>>2]|=i.charCodeAt(t)<<(t%4<<3);return this._finish(o,r),n=e?this._state:f(this._state),this.reset(),n},m.prototype._finish=function(e,t){var n,i,r,o=t;if(e[o>>2]|=128<<(o%4<<3),o>55)for(s(this._state,e),o=0;16>o;o+=1)e[o]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(n[2],16),r=parseInt(n[1],16)||0,e[14]=i,e[15]=r,s(this._state,e)},m.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},m.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var n=d(e);return t?n:f(n)},m.hashBinary=function(e,t){var n=d(e);return t?n:f(n)},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(e){var t,n=this._concatArrayBuffer(this._buff,e),i=n.length;for(this._length+=e.byteLength,t=64;i>=t;t+=64)s(this._state,l(n.subarray(t-64,t)));return this._buff=i>t-64?n.subarray(t-64):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(e){var t,n,i=this._buff,r=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;r>t;t+=1)o[t>>2]|=i[t]<<(t%4<<3);return this._finish(o,r),n=e?this._state:f(this._state),this.reset(),n},m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,i=new Uint8Array(n+t.byteLength);return i.set(e),i.set(new Uint8Array(t),n),i},m.ArrayBuffer.hash=function(e,t){var n=c(new Uint8Array(e));return t?n:f(n)},m}),define("formatters",["sparkmd5"],function(e){function t(e,t){return t+e}function n(e,t){return e>t}function i(e){return e}function r(e){return parseInt(e,10)}function o(e){return e&&e.length>0}function s(e,t){return"desc"===t?e.sort().reverse():e.sort()}function a(e,t,n){var i,r="desc"===n,o=function(e,n){return i=e[t]<n[t]?-1:e[t]>n[t]?1:0,i*[1,-1][+!!r]};return e.sort(o)}function l(t,n){var i=t?e.hash(t.toLowerCase()):"";return"http://www.gravatar.com/avatar/"+i+"?s="+n+"&d=mm"}function d(e){return function(t){return t.stopImmediatePropagation(),e.call(this,t),!1}}function c(e){return function(t){return t.preventDefault(),e.call(this,t),!1}}function u(e){return"true"===e||e===!0}return{prepend:t,isGreaterThan:n,asNumber:{read:i,publish:r},hasLength:o,sort:s,sortBy:a,gravatarUrl:l,preventDefault:c,stopImmediatePropagation:d,asBoolean:u}}),define("plugins/contentreference/config.js",["text!plugins/contentreference/template.html","plugins/contentreference/model","text!plugins/contentreference/setupTemplate.html","backbone","appBinders","formatters"],function(e,t,n,i,r,o){return{name:"contentReferencePlugin",ModelType:t,modelData:{min:1,max:1,options:{allowedTypes:[],defaultNode:"0"},label:"",type:"contentreference",dataType:"ref",validation:[],value:""},template:e,setupTemplate:n,events:{"click #nodeTree":"stopAccordionPropagation","blur input":"setAvailableContentTypes"},rivetsConfig:{formatters:[o],binders:[r]},wrapper:!1}}),define("contentTypeWorker",["api","jquery","resources","underscore"],function(e,t,n,i){function r(n){var r=new t.Deferred;return e.getContentTypes().done(function(e){n&&(n=i.map(n,function(e){return e._id}),i.each(e.results,function(e){i.contains(n,e._id)&&(e.checked=!0)})),r.resolve(e.results)}),r.promise()}function o(n){var i=new t.Deferred;return e.getNodeDetail(n).done(s.bind(this,i)).fail(a.bind(this,i)),i.promise()}function s(e,t){e.resolve(t)}function a(e,t){e.reject(t)}return{getAvailableContentTypes:r,getNodesContentTypes:o}}),define("text!plugins/contentreference/modal/template.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n<!--        <div class="row modalPadding">\n            {{model:resources->plugins->contentReference->selectedContent | withColon}}\n            {{model:selectedContentLabel}}\n        </div>\n\n        </br>-->\n\n        <div class="row modalPadding">\n            <span data-rv-breadcrumb="model:breadcrumbs"></span>\n        </div>\n\n        </br>\n\n        <div data-rv-show="model:loading">\n            <i class="fa fa-refresh fa fa-spin"></i>\n        </div>\n\n        <div id="modalBody" class="row" data-rv-hide="model:loading">\n            <div id="nodeTree" class="inputContainer">\n\n                <div data-rv-each-node="model:children:" data-rv-nodetree="node"></div>\n\n                <ul data-rv-hide="model:inRoot" class="no-bullet nodeTreeContent accordion">\n                    <li data-rv-each-item="model:content:">\n                        <input data-rv-id="item.cid" type="radio" name="selectedContent" data-rv-value="item:_id" data-rv-checked="model:selectedContent">\n                        <label data-rv-for="item.cid">{{item:label}}</label>\n                    </li>\n                </ul>\n\n            </div>\n        </div>\n\n        <div id="buttonContainer" class="row" data-rv-hide="model:loading">\n            <div class="right">\n                <button id="confirm" class="button tiny radius noMarginBottom">{{model:resources->confirm}}</button>\n                <button id="cancel" class="button tiny radius noMarginBottom">{{model:resources->cancel}}</button>\n            </div>\n        </div>\n\n    </div>\n</div>'}),define("views/nodeTree/nodeTreeContentDetailModel",["grasshopperModel","masseuse"],function(e,t){var n=t.ComputedProperty;return e.extend({defaults:{label:new n(["fields"],function(){return this.get("meta.labelfield")?this.get("fields."+[this.get("meta.labelfield")]):void 0})}})}),define("plugins/contentreference/modal/contentModel",["views/nodeTree/nodeTreeContentDetailModel"],function(e){return e}),define("plugins/contentreference/modal/model",["grasshopperModel","resources","grasshopperCollection","constants","masseuse","underscore","api","plugins/contentreference/modal/contentModel"],function(e,t,n,i,r,o,s,a){function l(){var t=this;e.prototype.initialize.apply(this,arguments),this.set("children",new(n.extend({url:function(){return i.api.nodesChildren.url.replace(":id",t.get("_id"))}}))),this.set("content",new(n.extend({model:a,url:function(){return i.api.nodesContent.url.replace(":id",t.get("_id"))}}))),this.on("change:selectedContent",d.bind(this)),this.on("change:selectedContentDetails",c.bind(this))}function d(){var e=this;s.getContentDetail(this.get("selectedContent")).done(function(t){e.set("selectedContentDetails",t)})}function c(){this.set("selectedContentLabel",this.get("selectedContentDetails.fields."+this.get("selectedContentDetails").meta.labelfield))}var u=r.ComputedProperty;return e.extend({initialize:l,idAttribute:"_id",defaults:{loading:!0,nodeTreeType:"content",nodeId:new u(["_id"],function(e){return e}),breadcrumbs:[],inRoot:new u(["_id"],function(e){return"0"===e}),resources:t},urlRoot:i.api.node.url})}),define("plugins/contentreference/modal/binders",["jquery","underscore"],function(e,t){function n(n,i){var r=e(n);r.empty(),t.each(t.initial(i),function(e){r.append('<a class="modalBreadcrumb" nodeId="'+e.nodeId+'">'+e.text+" / </a>")}),r.append("<span>"+t.last(i).text+"</span>")}return{breadcrumb:n}}),define("plugins/contentreference/modal/config",["text!plugins/contentreference/modal/template.html","plugins/contentreference/modal/model","appBinders","resources","constants","plugins/contentreference/modal/binders"],function(e,t,n,i,r,o){return{name:"contentReferenceModal",ModelType:t,appendTo:"#modal",wrapper:!1,template:e,rivetsConfig:{binders:[n,o]},privateBreadcrumbs:!0,breadcrumbs:[{text:i.root,nodeId:"0"}],events:{"click #nodeTree":"stopAccordionPropagation","click #confirm":"confirmModal","click #cancel":"cancelModal","click .modalBreadcrumb":"navigateToFolder"}}}),define("breadcrumbWorker",["api","constants","jquery","resources","masseuse","underscore"],function(e,t,n,i,r,o){function s(e){var t=this.model.get("meta.node"),n=this.model.get("isNew"),i=this;p.call(this),h.call(this,t).then(function(){n?c.call(i,e,t):u.call(i,e)})}function a(e,t){p.call(this),t?c.call(this,e,"new"):u.call(this,e)}function l(e,t){var n=this.model.get("nodeId");p.call(this),h.call(this,n).then(f.bind(this,e,t))}function d(e,t){t?c.call(this,e,"new"):(this.breadcrumbs.push({text:o.escape(this.model.get("fullname")),href:this.model.get("href")}),f.call(this,e))}function c(e,n){this.breadcrumbs.push({text:i.newWord,href:t.internalRoutes[this.name].replace(":id",n)}),f.call(this,e)}function u(e){this.breadcrumbs.push({text:o.escape(this.model.get("label")),href:t.internalRoutes[this.name].replace(":id",this.model.get("_id"))}),f.call(this,e)}function h(i,r,s){var a=this;return r=r?r:new n.Deferred,s=s?s:0,e.getNodeDetail(i).done(function(e){o.isEmpty(e)?r.resolve():(a.breadcrumbs.splice(a.breadcrumbs.length-s,0,{text:o.escape(e.label),href:t.internalRoutes.nodeDetail.replace(":id",e._id),nodeId:e._id}),s++,null!==e.parent?h.call(a,e.parent._id,r,s):r.resolve())}),r.promise()}function f(e,t){t=t||{trigger:!0},t.trigger&&v.views.trigger("updateMastheadBreadcrumbs",this),e&&e.resolve()}function p(){o.has(this,"originalBreadcrumbs")||(this.originalBreadcrumbs=o.clone(this.breadcrumbs))}function m(){this.breadcrumbs=o.clone(this.originalBreadcrumbs)}var v=new r.utilities.channels;return{contentBreadcrumb:s,contentTypeBreadcrumb:a,contentBrowse:l,userBreadcrumb:d,resetBreadcrumb:m}}),define("plugins/contentreference/modal/view",["grasshopperBaseView","plugins/contentreference/modal/config","jquery","breadcrumbWorker"],function(e,t,n,i){function r(e){m.call(this),n.when(s.call(this),a.call(this),l.call(this)).done(d.bind(this),e.resolve)}function o(){this.$el.foundation()}function s(){return this.model.get("children").fetch()}function a(){return this.model.get("content").fetch()}function l(){return this.model.fetch()}function d(){this.model.toggle("loading")}function c(e){e.stopPropagation()}function u(){this.$deferred.resolve(this.model.attributes),f.call(this)}function h(){this.$deferred.reject(),f.call(this)}function f(){this.remove()}function p(){return!1}function m(){var e=new n.Deferred,t=this;e.done(function(){t.model.set("breadcrumbs",t.breadcrumbs)}),i.contentBrowse.call(this,e,{trigger:!1})}function v(e){this.model.set("_id",n(e.target).attr("nodeId")),i.resetBreadcrumb.call(this),m.call(this),s.call(this),a.call(this),l.call(this)}return e.extend({defaultOptions:t,beforeRender:r,afterRender:o,stopAccordionPropagation:c,confirmModal:u,cancelModal:h,setSelectedNode:p,navigateToFolder:v})}),define("plugins/contentreference/view.js",["grasshopperBaseView","underscore","api","contentTypeWorker","jquery","plugins/contentreference/modal/view","masseuse"],function(e,t,n,i,r,o,s){function a(){this.model.get("inSetup")?this.model.get("children").fetch().then(c.bind(this)).then(h.bind(this)):l.call(this)
}function l(){var e=this.model.get("value"),t=new r.Deferred;return e?v.call(this,e).done(d.bind(this,t)):t.resolve(),t.promise()}function d(e,t){this.model.set("contentDetails",t),e.resolve()}function c(){var e=new r.Deferred,t=this.model.get("options.defaultNode");return t&&"0"!==t?n.getNodeDetail(t).done(u.bind(this,e)):t&&"0"===t?u.call(this,e,{label:"Root"}):e.resolve(),e.promise()}function u(e,t){this.model.set("selectedNodeLabel",t.label),e&&e.resolve()}function h(){var e=new r.Deferred;return i.getAvailableContentTypes().done(f.bind(this,e)),e.promise()}function f(e,n){var i=this.model.get("options.allowedTypes");t.each(n,function(e){e.checked=t.contains(i,e._id)?!0:!1}),this.model.set("availableTypes",n),e.resolve()}function p(){this.model.set("showTree",!0),this.$el.foundation()}function m(e){e.stopPropagation()}function v(e){return n.getContentDetail(e)}function g(){var e=this.model.get("availableTypes"),n=t.pluck(t.where(e,{checked:!0}),"_id");this.model.set("options.allowedTypes",n)}function y(e){this.model.set("selectedNodeLabel","Root"),this.model.set("options.defaultNode","0"),e.preventDefault()}function b(){x.call(this).done(w.bind(this))}function w(e){this.model.set("selectedContentLabel",e.selectedContentLabel),this.model.set("selectedContent",e.selectedContent),this.model.set("value",e.selectedContent)}function x(){this.model.set("inSetup",!1);var e=new r.Deferred,t=new o({modelData:{header:"Select Content",selectedContent:new T("selectedContent",this.model),selectedContentLabel:this.model.get("selectedContentLabel"),_id:this.model.get("options.defaultNode"),allowedContentTypes:this.model.get("options.allowedTypes"),availableTypes:this.model.get("availableTypes")},$deferred:e});return t.start(),e.promise()}var T=s.ProxyProperty;return e.extend({beforeRender:a,afterRender:p,stopAccordionPropagation:m,setAvailableContentTypes:g,setRootAsDefaultNode:y,fireSelectContentModal:b,setSelectedNode:u})}),define("text!plugins/date/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        <input class="datetimepicker" data-rv-id="model:_id" data-rv-placeholder="model:type" data-rv-value="model:value">\n    </div>\n</div>'}),define("plugins/date/model",["grasshopperModel","resources"],function(e,t){return e.extend({defaults:{resources:t}})}),define("text!plugins/date/setupTemplate.html",[],function(){return""}),define("plugins/date/config.js",["text!plugins/date/template.html","plugins/date/model","text!plugins/date/setupTemplate.html"],function(e,t,n){return{name:"datePlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"date",defaultValueType:"date",dataType:"date",validation:[],value:""},template:e,setupTemplate:n,wrapper:!1}}),function(e){function t(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function n(e,t){return function(n){return c(e.call(this,n),t)}}function i(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function r(){}function o(e){T(e),a(this,e)}function s(e){var t=v(e),n=t.year||0,i=t.month||0,r=t.week||0,o=t.day||0,s=t.hour||0,a=t.minute||0,l=t.second||0,d=t.millisecond||0;this._milliseconds=+d+1e3*l+6e4*a+36e5*s,this._days=+o+7*r,this._months=+i+12*n,this._data={},this._bubble()}function a(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function l(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&vt.hasOwnProperty(t)&&(n[t]=e[t]);return n}function d(e){return 0>e?Math.ceil(e):Math.floor(e)}function c(e,t,n){for(var i=""+Math.abs(e),r=e>=0;i.length<t;)i="0"+i;return(r?n?"+":"":"-")+i}function u(e,t,n,i){var r,o,s=t._milliseconds,a=t._days,l=t._months;s&&e._d.setTime(+e._d+s*n),(a||l)&&(r=e.minute(),o=e.hour()),a&&e.date(e.date()+a*n),l&&e.month(e.month()+l*n),s&&!i&&it.updateOffset(e),(a||l)&&(e.minute(r),e.hour(o))}function h(e){return"[object Array]"===Object.prototype.toString.call(e)}function f(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function p(e,t,n){var i,r=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),s=0;for(i=0;r>i;i++)(n&&e[i]!==t[i]||!n&&y(e[i])!==y(t[i]))&&s++;return s+o}function m(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=Ut[e]||Yt[t]||t}return e}function v(e){var t,n,i={};for(n in e)e.hasOwnProperty(n)&&(t=m(n),t&&(i[t]=e[n]));return i}function g(t){var n,i;if(0===t.indexOf("week"))n=7,i="day";else{if(0!==t.indexOf("month"))return;n=12,i="month"}it[t]=function(r,o){var s,a,l=it.fn._lang[t],d=[];if("number"==typeof r&&(o=r,r=e),a=function(e){var t=it().utc().set(i,e);return l.call(it.fn._lang,t,r||"")},null!=o)return a(o);for(s=0;n>s;s++)d.push(a(s));return d}}function y(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function b(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function w(e){return x(e)?366:365}function x(e){return e%4===0&&e%100!==0||e%400===0}function T(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[dt]<0||e._a[dt]>11?dt:e._a[ct]<1||e._a[ct]>b(e._a[lt],e._a[dt])?ct:e._a[ut]<0||e._a[ut]>23?ut:e._a[ht]<0||e._a[ht]>59?ht:e._a[ft]<0||e._a[ft]>59?ft:e._a[pt]<0||e._a[pt]>999?pt:-1,e._pf._overflowDayOfYear&&(lt>t||t>ct)&&(t=ct),e._pf.overflow=t)}function C(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function k(e){return e?e.toLowerCase().replace("_","-"):e}function _(e,t){return t._isUTC?it(e).zone(t._offset||0):it(e).local()}function D(e,t){return t.abbr=e,mt[e]||(mt[e]=new r),mt[e].set(t),mt[e]}function S(e){delete mt[e]}function M(e){var t,n,i,r,o=0,s=function(e){if(!mt[e]&&gt)try{require("./lang/"+e)}catch(t){}return mt[e]};if(!e)return it.fn._lang;if(!h(e)){if(n=s(e))return n;e=[e]}for(;o<e.length;){for(r=k(e[o]).split("-"),t=r.length,i=k(e[o+1]),i=i?i.split("-"):null;t>0;){if(n=s(r.slice(0,t).join("-")))return n;if(i&&i.length>=t&&p(r,i,!0)>=t-1)break;t--}o++}return it.fn._lang}function A(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function E(e){var t,n,i=e.match(xt);for(t=0,n=i.length;n>t;t++)i[t]=Xt[i[t]]?Xt[i[t]]:A(i[t]);return function(r){var o="";for(t=0;n>t;t++)o+=i[t]instanceof Function?i[t].call(r,e):i[t];return o}}function F(e,t){return e.isValid()?(t=j(t,e.lang()),$t[t]||($t[t]=E(t)),$t[t](e)):e.lang().invalidDate()}function j(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Tt.lastIndex=0;i>=0&&Tt.test(e);)e=e.replace(Tt,n),Tt.lastIndex=0,i-=1;return e}function O(e,t){var n,i=t._strict;switch(e){case"DDDD":return Nt;case"YYYY":case"GGGG":case"gggg":return i?It:_t;case"Y":case"G":case"g":return Rt;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?Pt:Dt;case"S":if(i)return jt;case"SS":if(i)return Ot;case"SSS":if(i)return Nt;case"DDD":return kt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Mt;case"a":case"A":return M(t._l)._meridiemParse;case"X":return Ft;case"Z":case"ZZ":return At;case"T":return Et;case"SSSS":return St;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?Ot:Ct;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Ct;default:return n=new RegExp(q(L(e.replace("\\","")),"i"))}}function N(e){e=e||"";var t=e.match(At)||[],n=t[t.length-1]||[],i=(n+"").match(Ht)||["-",0,0],r=+(60*i[1])+y(i[2]);return"+"===i[0]?-r:r}function I(e,t,n){var i,r=n._a;switch(e){case"M":case"MM":null!=t&&(r[dt]=y(t)-1);break;case"MMM":case"MMMM":i=M(n._l).monthsParse(t),null!=i?r[dt]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(r[ct]=y(t));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=y(t));break;case"YY":r[lt]=y(t)+(y(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":r[lt]=y(t);break;case"a":case"A":n._isPm=M(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":r[ut]=y(t);break;case"m":case"mm":r[ht]=y(t);break;case"s":case"ss":r[ft]=y(t);break;case"S":case"SS":case"SSS":case"SSSS":r[pt]=y(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=N(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=t)}}function P(e){var t,n,i,r,o,s,a,l,d,c,u=[];if(!e._d){for(i=V(e),e._w&&null==e._a[ct]&&null==e._a[dt]&&(o=function(t){var n=parseInt(t,10);return t?t.length<3?n>68?1900+n:2e3+n:n:null==e._a[lt]?it().weekYear():e._a[lt]},s=e._w,null!=s.GG||null!=s.W||null!=s.E?a=Z(o(s.GG),s.W||1,s.E,4,1):(l=M(e._l),d=null!=s.d?$(s.d,l):null!=s.e?parseInt(s.e,10)+l._week.dow:0,c=parseInt(s.w,10)||1,null!=s.d&&d<l._week.dow&&c++,a=Z(o(s.gg),c,d,l._week.doy,l._week.dow)),e._a[lt]=a.year,e._dayOfYear=a.dayOfYear),e._dayOfYear&&(r=null==e._a[lt]?i[lt]:e._a[lt],e._dayOfYear>w(r)&&(e._pf._overflowDayOfYear=!0),n=Y(r,0,e._dayOfYear),e._a[dt]=n.getUTCMonth(),e._a[ct]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=u[t]=i[t];for(;7>t;t++)e._a[t]=u[t]=null==e._a[t]?2===t?1:0:e._a[t];u[ut]+=y((e._tzm||0)/60),u[ht]+=y((e._tzm||0)%60),e._d=(e._useUTC?Y:U).apply(null,u)}}function R(e){var t;e._d||(t=v(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],P(e))}function V(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function B(e){e._a=[],e._pf.empty=!0;var t,n,i,r,o,s=M(e._l),a=""+e._i,l=a.length,d=0;for(i=j(e._f,s).match(xt)||[],t=0;t<i.length;t++)r=i[t],n=(a.match(O(r,e))||[])[0],n&&(o=a.substr(0,a.indexOf(n)),o.length>0&&e._pf.unusedInput.push(o),a=a.slice(a.indexOf(n)+n.length),d+=n.length),Xt[r]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(r),I(r,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(r);e._pf.charsLeftOver=l-d,a.length>0&&e._pf.unusedInput.push(a),e._isPm&&e._a[ut]<12&&(e._a[ut]+=12),e._isPm===!1&&12===e._a[ut]&&(e._a[ut]=0),P(e),T(e)}function L(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r})}function q(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function H(e){var n,i,r,o,s;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(o=0;o<e._f.length;o++)s=0,n=a({},e),n._pf=t(),n._f=e._f[o],B(n),C(n)&&(s+=n._pf.charsLeftOver,s+=10*n._pf.unusedTokens.length,n._pf.score=s,(null==r||r>s)&&(r=s,i=n));a(e,i||n)}function W(e){var t,n,i=e._i,r=Vt.exec(i);if(r){for(e._pf.iso=!0,t=0,n=Lt.length;n>t;t++)if(Lt[t][1].exec(i)){e._f=Lt[t][0]+(r[6]||" ");break}for(t=0,n=qt.length;n>t;t++)if(qt[t][1].exec(i)){e._f+=qt[t][0];break}i.match(At)&&(e._f+="Z"),B(e)}else e._d=new Date(i)}function z(t){var n=t._i,i=yt.exec(n);n===e?t._d=new Date:i?t._d=new Date(+i[1]):"string"==typeof n?W(t):h(n)?(t._a=n.slice(0),P(t)):f(n)?t._d=new Date(+n):"object"==typeof n?R(t):t._d=new Date(n)}function U(e,t,n,i,r,o,s){var a=new Date(e,t,n,i,r,o,s);return 1970>e&&a.setFullYear(e),a}function Y(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function $(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function G(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function J(e,t,n){var i=at(Math.abs(e)/1e3),r=at(i/60),o=at(r/60),s=at(o/24),a=at(s/365),l=45>i&&["s",i]||1===r&&["m"]||45>r&&["mm",r]||1===o&&["h"]||22>o&&["hh",o]||1===s&&["d"]||25>=s&&["dd",s]||45>=s&&["M"]||345>s&&["MM",at(s/30)]||1===a&&["y"]||["yy",a];return l[2]=t,l[3]=e>0,l[4]=n,G.apply({},l)}function X(e,t,n){var i,r=n-t,o=n-e.day();return o>r&&(o-=7),r-7>o&&(o+=7),i=it(e).add("d",o),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function Z(e,t,n,i,r){var o,s,a=Y(e,0,1).getUTCDay();return n=null!=n?n:r,o=r-a+(a>i?7:0)-(r>a?7:0),s=7*(t-1)+(n-r)+o+1,{year:s>0?e:e-1,dayOfYear:s>0?s:w(e-1)+s}}function K(e){var t=e._i,n=e._f;return null===t?it.invalid({nullInput:!0}):("string"==typeof t&&(e._i=t=M().preparse(t)),it.isMoment(t)?(e=l(t),e._d=new Date(+t._d)):n?h(n)?H(e):B(e):z(e),new o(e))}function Q(e,t){it.fn[e]=it.fn[e+"s"]=function(e){var n=this._isUTC?"UTC":"";return null!=e?(this._d["set"+n+t](e),it.updateOffset(this),this):this._d["get"+n+t]()}}function et(e){it.duration.fn[e]=function(){return this._data[e]}}function tt(e,t){it.duration.fn["as"+e]=function(){return+this/t}}function nt(e){var t=!1,n=it;"undefined"==typeof ender&&(e?(st.moment=function(){return!t&&console&&console.warn&&(t=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),n.apply(null,arguments)},a(st.moment,n)):st.moment=it)}for(var it,rt,ot="2.5.1",st=this,at=Math.round,lt=0,dt=1,ct=2,ut=3,ht=4,ft=5,pt=6,mt={},vt={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},gt="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,yt=/^\/?Date\((\-?\d+)/i,bt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,wt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,xt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Tt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Ct=/\d\d?/,kt=/\d{1,3}/,_t=/\d{1,4}/,Dt=/[+\-]?\d{1,6}/,St=/\d+/,Mt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,At=/Z|[\+\-]\d\d:?\d\d/gi,Et=/T/i,Ft=/[\+\-]?\d+(\.\d{1,3})?/,jt=/\d/,Ot=/\d\d/,Nt=/\d{3}/,It=/\d{4}/,Pt=/[+-]?\d{6}/,Rt=/[+-]?\d+/,Vt=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Bt="YYYY-MM-DDTHH:mm:ssZ",Lt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],qt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Ht=/([\+\-]|\d\d)/gi,Wt="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),zt={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ut={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Yt={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},$t={},Gt="DDD w W M D d".split(" "),Jt="M D H h m s w W".split(" "),Xt={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return c(this.year()%100,2)},YYYY:function(){return c(this.year(),4)},YYYYY:function(){return c(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+c(Math.abs(e),6)},gg:function(){return c(this.weekYear()%100,2)},gggg:function(){return c(this.weekYear(),4)},ggggg:function(){return c(this.weekYear(),5)},GG:function(){return c(this.isoWeekYear()%100,2)},GGGG:function(){return c(this.isoWeekYear(),4)},GGGGG:function(){return c(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return y(this.milliseconds()/100)},SS:function(){return c(y(this.milliseconds()/10),2)},SSS:function(){return c(this.milliseconds(),3)},SSSS:function(){return c(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+c(y(e/60),2)+":"+c(y(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+c(y(e/60),2)+c(y(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Zt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Gt.length;)rt=Gt.pop(),Xt[rt+"o"]=i(Xt[rt],rt);for(;Jt.length;)rt=Jt.pop(),Xt[rt+rt]=n(Xt[rt],2);for(Xt.DDDD=n(Xt.DDD,3),a(r.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,i;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=it.utc([2e3,t]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(i.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=it([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return X(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),it=function(n,i,r,o){var s;return"boolean"==typeof r&&(o=r,r=e),s={},s._isAMomentObject=!0,s._i=n,s._f=i,s._l=r,s._strict=o,s._isUTC=!1,s._pf=t(),K(s)},it.utc=function(n,i,r,o){var s;return"boolean"==typeof r&&(o=r,r=e),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=r,s._i=n,s._f=i,s._strict=o,s._pf=t(),K(s).utc()},it.unix=function(e){return it(1e3*e)},it.duration=function(e,t){var n,i,r,o=e,a=null;return it.isDuration(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(a=bt.exec(e))?(n="-"===a[1]?-1:1,o={y:0,d:y(a[ct])*n,h:y(a[ut])*n,m:y(a[ht])*n,s:y(a[ft])*n,ms:y(a[pt])*n}):(a=wt.exec(e))&&(n="-"===a[1]?-1:1,r=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},o={y:r(a[2]),M:r(a[3]),d:r(a[4]),h:r(a[5]),m:r(a[6]),s:r(a[7]),w:r(a[8])}),i=new s(o),it.isDuration(e)&&e.hasOwnProperty("_lang")&&(i._lang=e._lang),i},it.version=ot,it.defaultFormat=Bt,it.updateOffset=function(){},it.lang=function(e,t){var n;return e?(t?D(k(e),t):null===t?(S(e),e="en"):mt[e]||M(e),n=it.duration.fn._lang=it.fn._lang=M(e),n._abbr):it.fn._lang._abbr},it.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),M(e)},it.isMoment=function(e){return e instanceof o||null!=e&&e.hasOwnProperty("_isAMomentObject")},it.isDuration=function(e){return e instanceof s},rt=Zt.length-1;rt>=0;--rt)g(Zt[rt]);for(it.normalizeUnits=function(e){return m(e)},it.invalid=function(e){var t=it.utc(0/0);return null!=e?a(t._pf,e):t._pf.userInvalidated=!0,t},it.parseZone=function(e){return it(e).parseZone()},a(it.fn=o.prototype,{clone:function(){return it(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=it(this).utc();return 0<e.year()&&e.year()<=9999?F(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return C(this)},isDSTShifted:function(){return this._a?this.isValid()&&p(this._a,(this._isUTC?it.utc(this._a):it(this._a)).toArray())>0:!1},parsingFlags:function(){return a({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=F(this,e||it.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var n;return n="string"==typeof e?it.duration(+t,e):it.duration(e,t),u(this,n,1),this},subtract:function(e,t){var n;return n="string"==typeof e?it.duration(+t,e):it.duration(e,t),u(this,n,-1),this},diff:function(e,t,n){var i,r,o=_(e,this),s=6e4*(this.zone()-o.zone());return t=m(t),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+o.daysInMonth()),r=12*(this.year()-o.year())+(this.month()-o.month()),r+=(this-it(this).startOf("month")-(o-it(o).startOf("month")))/i,r-=6e4*(this.zone()-it(this).startOf("month").zone()-(o.zone()-it(o).startOf("month").zone()))/i,"year"===t&&(r/=12)):(i=this-o,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-s)/864e5:"week"===t?(i-s)/6048e5:i),n?r:d(r)},from:function(e,t){return it.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(it(),e)},calendar:function(){var e=_(it(),this).startOf("day"),t=this.diff(e,"days",!0),n=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){return x(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=$(e,this.lang()),this.add({d:e-t})):t},month:function(e){var t,n=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+n+"Month"](e),this.date(Math.min(t,this.daysInMonth())),it.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(e){switch(e=m(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),this},endOf:function(e){return e=m(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+it(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+it(e).startOf(t)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)===+_(e,this).startOf(t)},min:function(e){return e=it.apply(null,arguments),this>e?this:e},max:function(e){return e=it.apply(null,arguments),e>this?this:e},zone:function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=N(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&u(this,it.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?it(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return b(this.year(),this.month())},dayOfYear:function(e){var t=at((it(this).startOf("day")-it(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(e){var t=X(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=X(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=X(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=m(e),this[e]()},set:function(e,t){return e=m(e),"function"==typeof this[e]&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=M(t),this)}}),rt=0;rt<Wt.length;rt++)Q(Wt[rt].toLowerCase().replace(/s$/,""),Wt[rt]);Q("year","FullYear"),it.fn.days=it.fn.day,it.fn.months=it.fn.month,it.fn.weeks=it.fn.week,it.fn.isoWeeks=it.fn.isoWeek,it.fn.toJSON=it.fn.toISOString,a(it.duration.fn=s.prototype,{_bubble:function(){var e,t,n,i,r=this._milliseconds,o=this._days,s=this._months,a=this._data;a.milliseconds=r%1e3,e=d(r/1e3),a.seconds=e%60,t=d(e/60),a.minutes=t%60,n=d(t/60),a.hours=n%24,o+=d(n/24),a.days=o%30,s+=d(o/30),a.months=s%12,i=d(s/12),a.years=i},weeks:function(){return d(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)},humanize:function(e){var t=+this,n=J(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},add:function(e,t){var n=it.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=it.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=m(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=m(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:it.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||r||o?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(o?o+"S":""):"P0D"}});for(rt in zt)zt.hasOwnProperty(rt)&&(tt(rt,zt[rt]),et(rt.toLowerCase()));tt("Weeks",6048e5),it.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},it.lang("en",{ordinal:function(e){var t=e%10,n=1===y(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),gt?(module.exports=it,nt(!0)):"function"==typeof define&&define.amd?define("moment",["require","exports","module"],function(t,n,i){return i.config&&i.config()&&i.config().noGlobal!==!0&&nt(i.config().noGlobal===e),it}):nt()}.call(this),function(e){var t={i18n:{bg:{months:["","","","","","","","","","","",""],dayOfWeek:["","","","","","",""]},fa:{months:["","","","","","","","","","","",""],dayOfWeek:["",""," ","","","",""]},ru:{months:["","","","","","","","","","","",""],dayOfWeek:["","","","","","",""]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},el:{months:["","","","","","","","","","","",""],dayOfWeek:["","","","","","",""]},de:{months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]},tr:{months:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],dayOfWeek:["Paz","Pts","Sal","ar","Per","Cum","Cts"]},fr:{months:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeek:["Dom","Lun","Mar","Mi","Jue","Vie","Sb"]},th:{months:["","","","","","","","","","","",""],dayOfWeek:[".",".",".",".",".",".","."]},pl:{months:["stycze","luty","marzec","kwiecie","maj","czerwiec","lipiec","sierpie","wrzesie","padziernik","listopad","grudzie"],dayOfWeek:["nd","pn","wt","r","cz","pt","sb"]},pt:{months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},ch:{months:["","","","","","","","","","","",""],dayOfWeek:["","","","","","",""]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sn","Mn","Tis","Ons","Tor","Fre","Lr"]},kr:{months:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},da:{months:["January","Februar","Marts","April","Maj","Juni","July","August","September","Oktober","November","December"],dayOfWeek:["Sn","Man","Tir","ons","Tor","Fre","lr"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeek:["Sn","Man","Tir","Ons","Tor","Fre","Lr"]},ja:{months:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""]},vi:{months:["Thng 1","Thng 2","Thng 3","Thng 4","Thng 5","Thng 6","Thng 7","Thng 8","Thng 9","Thng 10","Thng 11","Thng 12"],dayOfWeek:["CN","T2","T3","T4","T5","T6","T7"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeek:["Ned","Pon","Tor","Sre","et","Pet","Sob"]},cs:{months:["Leden","nor","Bezen","Duben","Kvten","erven","ervenec","Srpen","Z","jen","Listopad","Prosinec"],dayOfWeek:["Ne","Po","t","St","t","P","So"]},hu:{months:["Janur","Februr","Mrcius","prilis","Mjus","Jnius","Jlius","Augusztus","Szeptember","Oktber","November","December"],dayOfWeek:["Va","H","Ke","Sze","Cs","P","Szo"]}},value:"",lang:"en",format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],yearOffset:0,beforeShowDay:null};
Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0,i=this.length;i>n;n++)if(this[n]===e)return n;return-1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},e.fn.xdsoftScroller=function(t){return this.each(function(){var n=e(this);if(!e(this).hasClass("xdsoft_scroller_box")){var i=function(e){var t={x:0,y:0};if("touchstart"==e.type||"touchmove"==e.type||"touchend"==e.type||"touchcancel"==e.type){var n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t.x=n.pageX,t.y=n.pageY}else("mousedown"==e.type||"mouseup"==e.type||"mousemove"==e.type||"mouseover"==e.type||"mouseout"==e.type||"mouseenter"==e.type||"mouseleave"==e.type)&&(t.x=e.pageX,t.y=e.pageY);return t},r=0,o=n.children().eq(0),s=n[0].clientHeight,a=o[0].offsetHeight,l=e('<div class="xdsoft_scrollbar"></div>'),d=e('<div class="xdsoft_scroller"></div>'),c=100,u=!1;l.append(d),n.addClass("xdsoft_scroller_box").append(l),d.on("mousedown.xdsoft_scroller",function(i){s||n.trigger("resize_scroll.xdsoft_scroller",[t]);var o=i.pageY,a=parseInt(d.css("margin-top")),u=l[0].offsetHeight;e(document.body).addClass("xdsoft_noselect"),e([document.body,window]).on("mouseup.xdsoft_scroller",function h(){e([document.body,window]).off("mouseup.xdsoft_scroller",h).off("mousemove.xdsoft_scroller",r).removeClass("xdsoft_noselect")}),e(document.body).on("mousemove.xdsoft_scroller",r=function(e){var t=e.pageY-o+a;0>t&&(t=0),t+d[0].offsetHeight>u&&(t=u-d[0].offsetHeight),n.trigger("scroll_element.xdsoft_scroller",[c?t/c:0])})}),n.on("scroll_element.xdsoft_scroller",function(e,t){s||n.trigger("resize_scroll.xdsoft_scroller",[t,!0]),t=t>1?1:0>t||isNaN(t)?0:t,d.css("margin-top",c*t),o.css("marginTop",-parseInt((a-s)*t))}).on("resize_scroll.xdsoft_scroller",function(e,t,i){s=n[0].clientHeight,a=o[0].offsetHeight;var r=s/a,u=r*l[0].offsetHeight;r>1?d.hide():(d.show(),d.css("height",parseInt(u>10?u:10)),c=l[0].offsetHeight-d[0].offsetHeight,i!==!0&&n.trigger("scroll_element.xdsoft_scroller",[t?t:Math.abs(parseInt(o.css("marginTop")))/(a-s)]))}),n.mousewheel&&n.mousewheel(function(e,t){var i=Math.abs(parseInt(o.css("marginTop")));return n.trigger("scroll_element.xdsoft_scroller",[(i-20*t)/(a-s)]),e.stopPropagation(),!1}),n.on("touchstart",function(e){u=i(e)}),n.on("touchmove",function(e){if(u){var t=i(e),r=Math.abs(parseInt(o.css("marginTop")));n.trigger("scroll_element.xdsoft_scroller",[(r-(t.y-u.y))/(a-s)]),e.stopPropagation(),e.preventDefault(),u=i(e)}}),n.on("touchend touchcancel",function(){u=!1})}n.trigger("resize_scroll.xdsoft_scroller",[t])})},e.fn.datetimepicker=function(n){var i=48,r=57,o=96,s=105,a=17,l=46,d=13,c=27,u=8,h=37,f=38,p=39,m=40,v=9,g=116,y=65,b=67,w=86,x=90,T=89,C=!1,k=e.isPlainObject(n)||!n?e.extend(!0,{},t,n):e.extend({},t),_=0,D=function(e){e.on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function t(){e.is(":disabled")||e.is(":hidden")||!e.is(":visible")||e.data("xdsoft_datetimepicker")||(clearTimeout(_),_=setTimeout(function(){e.data("xdsoft_datetimepicker")||S(e),e.off("open.xdsoft focusin.xdsoft mousedown.xdsoft",t).trigger("open.xdsoft")},100))})},S=function(t){function n(){var e=!1;return k.startDate?e=R.strToDateTime(k.startDate):(e=k.value?k.value:t&&t.val&&t.val()?t.val():"",e=Date.parseDate(e,k.format)),e&&R.isValidDate(e)?_.data("changed",!0):e="",e?e:0}var _=e("<div "+(k.id?'id="'+k.id+'"':"")+" "+(k.style?'style="'+k.style+'"':"")+' class="xdsoft_datetimepicker xdsoft_noselect '+k.className+'"></div>'),D=e('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),S=e('<div class="xdsoft_datepicker active"></div>'),M=e('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span></div><div class="xdsoft_label xdsoft_year"><span></span></div><button type="button" class="xdsoft_next"></button></div>'),A=e('<div class="xdsoft_calendar"></div>'),E=e('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),F=E.find(".xdsoft_time_box").eq(0),j=e('<div class="xdsoft_time_variant"></div>'),O=e('<div class="xdsoft_scrollbar"></div>'),N=(e('<div class="xdsoft_scroller"></div>'),e('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>')),I=e('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>');M.find(".xdsoft_month span").after(N),M.find(".xdsoft_year span").after(I),M.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(t){M.find(".xdsoft_select").hide();var n=e(this).find(".xdsoft_select").eq(0),i=0,r=0;R.currentTime&&(i=R.currentTime[e(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),n.show();for(var o=n.find("div.xdsoft_option"),s=0;s<o.length&&o.eq(s).data("value")!=i;s++)r+=o[0].offsetHeight;return n.xdsoftScroller(r/(n.children()[0].offsetHeight-n[0].clientHeight)),t.stopPropagation(),!1}),M.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(e){e.stopPropagation(),e.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(){R&&R.currentTime&&R.currentTime[e(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](e(this).data("value")),e(this).parent().parent().hide(),_.trigger("xchange.xdsoft"),k.onChangeMonth&&k.onChangeMonth.call&&k.onChangeMonth.call(_,R.currentTime,_.data("input"))}),_.setOptions=function(n){if(k=e.extend(!0,{},k,n),n.allowTimes&&e.isArray(n.allowTimes)&&n.allowTimes.length&&(k.allowTimes=e.extend(!0,[],n.allowTimes)),n.weekends&&e.isArray(n.weekends)&&n.weekends.length&&(k.weekends=e.extend(!0,[],n.weekends)),!k.open&&!k.opened||k.inline||t.trigger("open.xdsoft"),k.inline&&(L=!0,_.addClass("xdsoft_inline"),t.after(_).hide()),k.inverseButton&&(k.next="xdsoft_prev",k.prev="xdsoft_next"),k.datepicker?S.addClass("active"):S.removeClass("active"),k.timepicker?E.addClass("active"):E.removeClass("active"),k.value&&(t&&t.val&&t.val(k.value),R.setCurrentTime(k.value)),k.dayOfWeekStart=isNaN(k.dayOfWeekStart)||parseInt(k.dayOfWeekStart)<0||parseInt(k.dayOfWeekStart)>6?0:parseInt(k.dayOfWeekStart),k.timepickerScrollbar||O.hide(),k.minDate&&/^-(.*)$/.test(k.minDate)&&(k.minDate=R.strToDateTime(k.minDate).dateFormat(k.formatDate)),k.maxDate&&/^\+(.*)$/.test(k.maxDate)&&(k.maxDate=R.strToDateTime(k.maxDate).dateFormat(k.formatDate)),M.find(".xdsoft_today_button").css("visibility",k.todayButton?"visible":"hidden"),k.mask){var D=function(e){try{if(document.selection&&document.selection.createRange){var t=document.selection.createRange();return t.getBookmark().charCodeAt(2)-2}if(e.setSelectionRange)return e.selectionStart}catch(n){return 0}},A=function(e,t){if(e="string"==typeof e||e instanceof String?document.getElementById(e):e,!e)return!1;if(e.createTextRange){var n=e.createTextRange();return n.collapse(!0),n.moveEnd(t),n.moveStart(t),n.select(),!0}return e.setSelectionRange?(e.setSelectionRange(t,t),!0):!1},F=function(e,t){var n=e.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return RegExp(n).test(t)};switch(t.off("keydown.xdsoft"),!0){case k.mask===!0:k.mask=k.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59");case"string"==e.type(k.mask):F(k.mask,t.val())||t.val(k.mask.replace(/[0-9]/g,"_")),t.on("keydown.xdsoft",function(n){var _=this.value,S=n.which;switch(!0){case S>=i&&r>=S||S>=o&&s>=S||S==u||S==l:var M=D(this),E=S!=u&&S!=l?String.fromCharCode(S>=o&&s>=S?S-i:S):"_";for(S!=u&&S!=l||!M||(M--,E="_");/[^0-9_]/.test(k.mask.substr(M,1))&&M<k.mask.length&&M>0;)M+=S==u||S==l?-1:1;if(_=_.substr(0,M)+E+_.substr(M+1),""==e.trim(_))_=k.mask.replace(/[0-9]/g,"_");else if(M==k.mask.length)break;for(M+=S==u||S==l?0:1;/[^0-9_]/.test(k.mask.substr(M,1))&&M<k.mask.length&&M>0;)M+=S==u||S==l?-1:1;F(k.mask,_)?(this.value=_,A(this,M)):""==e.trim(_)?this.value=k.mask.replace(/[0-9]/g,"_"):t.trigger("error_input.xdsoft");break;case!!~[y,b,w,x,T].indexOf(S)&&C:case!!~[c,f,m,h,p,g,a,v,d].indexOf(S):return!0}return n.preventDefault(),!1})}}k.validateOnBlur&&t.off("blur.xdsoft").on("blur.xdsoft",function(){k.allowBlank&&!e.trim(e(this).val()).length?(e(this).val(null),_.data("xdsoft_datetime").empty()):Date.parseDate(e(this).val(),k.format)?_.data("xdsoft_datetime").setCurrentTime(e(this).val()):(e(this).val(R.now().dateFormat(k.format)),_.data("xdsoft_datetime").setCurrentTime(e(this).val())),_.trigger("changedatetime.xdsoft")}),k.dayOfWeekStartPrev=0==k.dayOfWeekStart?6:k.dayOfWeekStart-1,_.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},_.data("options",k).on("mousedown.xdsoft",function(e){return e.stopPropagation(),e.preventDefault(),I.hide(),N.hide(),!1});var P=E.find(".xdsoft_time_box");P.append(j),P.xdsoftScroller(),_.on("afterOpen.xdsoft",function(){P.xdsoftScroller()}),_.append(S).append(E),k.withoutCopyright!==!0&&_.append(D),S.append(M).append(A),e("body").append(_);var R=new function(){var e=this;e.now=function(t){var n=new Date;if(!t&&k.defaultDate){var i=e.strtodate(k.defaultDate);n.setFullYear(i.getFullYear()),n.setMonth(i.getMonth()),n.setDate(i.getDate())}if(k.yearOffset&&n.setFullYear(n.getFullYear()+k.yearOffset),!t&&k.defaultTime){var r=e.strtotime(k.defaultTime);n.setHours(r.getHours()),n.setMinutes(r.getMinutes())}return n},e.isValidDate=function(e){return"[object Date]"!==Object.prototype.toString.call(e)?!1:!isNaN(e.getTime())},e.setCurrentTime=function(t){e.currentTime="string"==typeof t?e.strToDateTime(t):e.isValidDate(t)?t:e.now(),_.trigger("xchange.xdsoft")},e.empty=function(){e.currentTime=null},e.getCurrentTime=function(){return e.currentTime},e.nextMonth=function(){var t=e.currentTime.getMonth()+1;return 12==t&&(e.currentTime.setFullYear(e.currentTime.getFullYear()+1),t=0),e.currentTime.setDate(Math.min(Date.daysInMonth[t],e.currentTime.getDate())),e.currentTime.setMonth(t),k.onChangeMonth&&k.onChangeMonth.call&&k.onChangeMonth.call(_,R.currentTime,_.data("input")),_.trigger("xchange.xdsoft"),t},e.prevMonth=function(){var t=e.currentTime.getMonth()-1;return-1==t&&(e.currentTime.setFullYear(e.currentTime.getFullYear()-1),t=11),e.currentTime.setDate(Math.min(Date.daysInMonth[t],e.currentTime.getDate())),e.currentTime.setMonth(t),k.onChangeMonth&&k.onChangeMonth.call&&k.onChangeMonth.call(_,R.currentTime,_.data("input")),_.trigger("xchange.xdsoft"),t},e.strToDateTime=function(t){if(t&&t instanceof Date&&e.isValidDate(t))return t;var n,i,r=[];return(r=/^(\+|\-)(.*)$/.exec(t))&&(r[2]=Date.parseDate(r[2],k.formatDate))?(n=r[2].getTime()-6e4*r[2].getTimezoneOffset(),i=new Date(R.now().getTime()+parseInt(r[1]+"1")*n)):i=t?Date.parseDate(t,k.format):e.now(),e.isValidDate(i)||(i=e.now()),i},e.strtodate=function(t){if(t&&t instanceof Date&&e.isValidDate(t))return t;var n=t?Date.parseDate(t,k.formatDate):e.now(!0);return e.isValidDate(n)||(n=e.now(!0)),n},e.strtotime=function(t){if(t&&t instanceof Date&&e.isValidDate(t))return t;var n=t?Date.parseDate(t,k.formatTime):e.now();return e.isValidDate(n)||(n=e.now(!0)),n},e.str=function(){return e.currentTime.dateFormat(k.format)},e.currentTime=this.now()};M.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){_.data("changed",!0),R.setCurrentTime(0),_.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){t.val(R.str()),_.trigger("close.xdsoft")}),M.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),n=0,i=!1;!function r(e){R.currentTime.getMonth();t.hasClass(k.next)?R.nextMonth():t.hasClass(k.prev)&&R.prevMonth(),k.monthChangeSpinner&&!i&&(n=setTimeout(r,e?e:100))}(500),e([document.body,window]).on("mouseup.xdsoft",function o(){clearTimeout(n),i=!0,e([document.body,window]).off("mouseup.xdsoft",o)})}),E.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),n=0,i=!1,r=110;!function o(e){var s=F[0].clientHeight,a=j[0].offsetHeight,l=Math.abs(parseInt(j.css("marginTop")));t.hasClass(k.next)&&a-s-k.timeHeightInTimePicker>=l?j.css("marginTop","-"+(l+k.timeHeightInTimePicker)+"px"):t.hasClass(k.prev)&&l-k.timeHeightInTimePicker>=0&&j.css("marginTop","-"+(l-k.timeHeightInTimePicker)+"px"),F.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(j.css("marginTop"))/(a-s))]),r=r>10?10:r-10,!i&&(n=setTimeout(o,e?e:r))}(500),e([document.body,window]).on("mouseup.xdsoft",function s(){clearTimeout(n),i=!0,e([document.body,window]).off("mouseup.xdsoft",s)})});var V=0;_.on("xchange.xdsoft",function(t){clearTimeout(V),V=setTimeout(function(){for(var t="",n=new Date(R.currentTime.getFullYear(),R.currentTime.getMonth(),1,12,0,0),i=0,r=R.now();n.getDay()!=k.dayOfWeekStart;)n.setDate(n.getDate()-1);t+="<table><thead><tr>";for(var o=0;7>o;o++)t+="<th>"+k.i18n[k.lang].dayOfWeek[o+k.dayOfWeekStart>6?0:o+k.dayOfWeekStart]+"</th>";t+="</tr></thead>",t+="<tbody><tr>";var s=!1,a=!1;k.maxDate!==!1&&(s=R.strtodate(k.maxDate),s=new Date(s.getFullYear(),s.getMonth(),s.getDate(),23,59,59,999)),k.minDate!==!1&&(a=R.strtodate(k.minDate),a=new Date(a.getFullYear(),a.getMonth(),a.getDate()));for(var l,d,c,u,h=[];i<R.currentTime.countDaysInMonth()||n.getDay()!=k.dayOfWeekStart||R.currentTime.getMonth()==n.getMonth();)h=[],i++,l=n.getDate(),d=n.getFullYear(),c=n.getMonth(),h.push("xdsoft_date"),u=k.beforeShowDay&&k.beforeShowDay.call?k.beforeShowDay.call(_,n):null,(s!==!1&&n>s||a!==!1&&a>n||u&&u[0]===!1)&&h.push("xdsoft_disabled"),u&&""!=u[1]&&h.push(u[1]),R.currentTime.getMonth()!=c&&h.push("xdsoft_other_month"),(k.defaultSelect||_.data("changed"))&&R.currentTime.dateFormat(k.formatDate)==n.dateFormat(k.formatDate)&&h.push("xdsoft_current"),r.dateFormat(k.formatDate)==n.dateFormat(k.formatDate)&&h.push("xdsoft_today"),(0==n.getDay()||6==n.getDay()||~k.weekends.indexOf(n.dateFormat(k.formatDate)))&&h.push("xdsoft_weekend"),k.beforeShowDay&&"function"==typeof k.beforeShowDay&&h.push(k.beforeShowDay(n)),t+='<td data-date="'+l+'" data-month="'+c+'" data-year="'+d+'" class="xdsoft_date xdsoft_day_of_week'+n.getDay()+" "+h.join(" ")+'"><div>'+l+"</div></td>",n.getDay()==k.dayOfWeekStartPrev&&(t+="</tr>"),n.setDate(l+1);t+="</tbody></table>",A.html(t),M.find(".xdsoft_label span").eq(0).text(k.i18n[k.lang].months[R.currentTime.getMonth()]),M.find(".xdsoft_label span").eq(1).text(R.currentTime.getFullYear());var f="",p="",c="",m=function(e,t){var n=R.now();n.setHours(e),e=parseInt(n.getHours()),n.setMinutes(t),t=parseInt(n.getMinutes()),h=[],(k.maxTime!==!1&&R.strtotime(k.maxTime).getTime()<n.getTime()||k.minTime!==!1&&R.strtotime(k.minTime).getTime()>n.getTime())&&h.push("xdsoft_disabled"),(k.initTime||k.defaultSelect||_.data("changed"))&&parseInt(R.currentTime.getHours())==parseInt(e)&&(k.step>59||Math[k.roundTime](R.currentTime.getMinutes()/k.step)*k.step==parseInt(t))&&(k.defaultSelect||_.data("changed")?h.push("xdsoft_current"):k.initTime&&h.push("xdsoft_init_time")),parseInt(r.getHours())==parseInt(e)&&parseInt(r.getMinutes())==parseInt(t)&&h.push("xdsoft_today"),f+='<div class="xdsoft_time '+h.join(" ")+'" data-hour="'+e+'" data-minute="'+t+'">'+n.dateFormat(k.formatTime)+"</div>"};if(k.allowTimes&&e.isArray(k.allowTimes)&&k.allowTimes.length)for(var i=0;i<k.allowTimes.length;i++)p=R.strtotime(k.allowTimes[i]).getHours(),c=R.strtotime(k.allowTimes[i]).getMinutes(),m(p,c);else for(var i=0,o=0;i<(k.hours12?12:24);i++)for(o=0;60>o;o+=k.step)p=(10>i?"0":"")+i,c=(10>o?"0":"")+o,m(p,c);j.html(f);var v="",i=0;for(i=parseInt(k.yearStart,10)+k.yearOffset;i<=parseInt(k.yearEnd,10)+k.yearOffset;i++)v+='<div class="xdsoft_option '+(R.currentTime.getFullYear()==i?"xdsoft_current":"")+'" data-value="'+i+'">'+i+"</div>";for(I.children().eq(0).html(v),i=0,v="";11>=i;i++)v+='<div class="xdsoft_option '+(R.currentTime.getMonth()==i?"xdsoft_current":"")+'" data-value="'+i+'">'+k.i18n[k.lang].months[i]+"</div>";N.children().eq(0).html(v),e(_).trigger("generate.xdsoft")},10),t.stopPropagation()}).on("afterOpen.xdsoft",function(){if(k.timepicker){var e;if(j.find(".xdsoft_current").length?e=".xdsoft_current":j.find(".xdsoft_init_time").length&&(e=".xdsoft_init_time"),e){var t=F[0].clientHeight,n=j[0].offsetHeight,i=j.find(e).index()*k.timeHeightInTimePicker+1;i>n-t&&(i=n-t),F.trigger("scroll_element.xdsoft_scroller",[parseInt(i)/(n-t)])}else F.trigger("scroll_element.xdsoft_scroller",[0])}});var B=0;A.on("click.xdsoft","td",function(n){n.stopPropagation(),B++;var i=e(this),r=R.currentTime;return(void 0===r||null===r)&&(R.currentTime=R.now(),r=R.currentTime),i.hasClass("xdsoft_disabled")?!1:(r.setDate(1),r.setFullYear(i.data("year")),r.setMonth(i.data("month")),r.setDate(i.data("date")),_.trigger("select.xdsoft",[r]),t.val(R.str()),(B>1||k.closeOnDateSelect===!0||0===k.closeOnDateSelect&&!k.timepicker)&&!k.inline&&_.trigger("close.xdsoft"),k.onSelectDate&&k.onSelectDate.call&&k.onSelectDate.call(_,R.currentTime,_.data("input")),_.data("changed",!0),_.trigger("xchange.xdsoft"),_.trigger("changedatetime.xdsoft"),void setTimeout(function(){B=0},200))}),j.on("click.xdsoft","div",function(t){t.stopPropagation();var n=e(this),i=R.currentTime;return(void 0===i||null===i)&&(R.currentTime=R.now(),i=R.currentTime),n.hasClass("xdsoft_disabled")?!1:(i.setHours(n.data("hour")),i.setMinutes(n.data("minute")),_.trigger("select.xdsoft",[i]),_.data("input").val(R.str()),!k.inline&&_.trigger("close.xdsoft"),k.onSelectTime&&k.onSelectTime.call&&k.onSelectTime.call(_,R.currentTime,_.data("input")),_.data("changed",!0),_.trigger("xchange.xdsoft"),void _.trigger("changedatetime.xdsoft"))}),_.mousewheel&&S.mousewheel(function(e,t){return k.scrollMonth?(0>t?R.nextMonth():R.prevMonth(),!1):!0}),_.mousewheel&&F.unmousewheel().mousewheel(function(e,t){if(!k.scrollTime)return!0;var n=F[0].clientHeight,i=j[0].offsetHeight,r=Math.abs(parseInt(j.css("marginTop"))),o=!0;return 0>t&&i-n-k.timeHeightInTimePicker>=r?(j.css("marginTop","-"+(r+k.timeHeightInTimePicker)+"px"),o=!1):t>0&&r-k.timeHeightInTimePicker>=0&&(j.css("marginTop","-"+(r-k.timeHeightInTimePicker)+"px"),o=!1),F.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(j.css("marginTop"))/(i-n))]),e.stopPropagation(),o});var L=!1;_.on("changedatetime.xdsoft",function(){if(k.onChangeDateTime&&k.onChangeDateTime.call){var e=_.data("input");k.onChangeDateTime.call(_,R.currentTime,e),e.trigger("change")}}).on("generate.xdsoft",function(){k.onGenerate&&k.onGenerate.call&&k.onGenerate.call(_,R.currentTime,_.data("input")),L&&(_.trigger("afterOpen.xdsoft"),L=!1)}).on("click.xdsoft",function(e){e.stopPropagation()});var q=0;t.mousewheel&&t.mousewheel(function(e,n,i,r){return k.scrollInput?!k.datepicker&&k.timepicker?(q=j.find(".xdsoft_current").length?j.find(".xdsoft_current").eq(0).index():0,q+n>=0&&q+n<j.children().length&&(q+=n),j.children().eq(q).length&&j.children().eq(q).trigger("mousedown"),!1):k.datepicker&&!k.timepicker?(S.trigger(e,[n,i,r]),t.val&&t.val(R.str()),_.trigger("changedatetime.xdsoft"),!1):void 0:!0});var H=function(){var t=_.data("input").offset(),n=t.top+_.data("input")[0].offsetHeight-1,i=t.left,r="absolute";k.fixed?(n-=e(window).scrollTop(),i-=e(window).scrollLeft(),r="fixed"):(n+_[0].offsetHeight>e(window).height()+e(window).scrollTop()&&(n=t.top-_[0].offsetHeight+1),0>n&&(n=0),i+_[0].offsetWidth>e(window).width()&&(i=t.left-_[0].offsetWidth+_.data("input")[0].offsetWidth)),_.css({left:i,top:n,position:r})};_.on("open.xdsoft",function(){var t=!0;k.onShow&&k.onShow.call&&(t=k.onShow.call(_,R.currentTime,_.data("input"))),t!==!1&&(_.show(),H(),e(window).off("resize.xdsoft",H).on("resize.xdsoft",H),k.closeOnWithoutClick&&e([document.body,window]).on("mousedown.xdsoft",function n(){_.trigger("close.xdsoft"),e([document.body,window]).off("mousedown.xdsoft",n)}))}).on("close.xdsoft",function(e){var t=!0;k.onClose&&k.onClose.call&&(t=k.onClose.call(_,R.currentTime,_.data("input"))),t===!1||k.opened||k.inline||_.hide(),e.stopPropagation()}).data("input",t);var W=0;_.data("xdsoft_datetime",R),_.setOptions(k),R.setCurrentTime(n()),t.data("xdsoft_datetimepicker",_).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(){t.is(":disabled")||t.is(":hidden")||!t.is(":visible")||t.data("xdsoft_datetimepicker").is(":visible")&&k.closeOnInputClick||(clearTimeout(W),W=setTimeout(function(){t.is(":disabled")||t.is(":hidden")||!t.is(":visible")||(L=!0,R.setCurrentTime(n()),_.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(t){var n=(this.value,t.which);switch(!0){case!!~[d].indexOf(n):var i=e("input:visible,textarea:visible");return _.trigger("close.xdsoft"),i.eq(i.index(this)+1).focus(),!1;case!!~[v].indexOf(n):return _.trigger("close.xdsoft"),!0}})},M=function(t){var n=t.data("xdsoft_datetimepicker");n&&(n.data("xdsoft_datetime",null),n.remove(),t.data("xdsoft_datetimepicker",null).off("open.xdsoft focusin.xdsoft focusout.xdsoft mousedown.xdsoft blur.xdsoft keydown.xdsoft"),e(window).off("resize.xdsoft"),e([window,document.body]).off("mousedown.xdsoft"),t.unmousewheel&&t.unmousewheel())};return e(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(e){e.keyCode==a&&(C=!0)}).on("keyup.xdsoftctrl",function(e){e.keyCode==a&&(C=!1)}),this.each(function(){var t;if(t=e(this).data("xdsoft_datetimepicker")){if("string"===e.type(n))switch(n){case"show":e(this).select().focus(),t.trigger("open.xdsoft");break;case"hide":t.trigger("close.xdsoft");break;case"destroy":M(e(this));break;case"reset":this.value=this.defaultValue,this.value&&t.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,k.format))||t.data("changed",!1),t.data("xdsoft_datetime").setCurrentTime(this.value)}else t.setOptions(n);return 0}"string"!==e.type(n)&&(!k.lazyInit||k.open||k.inline?S(e(this)):D(e(this)))})},e.fn.datetimepicker.defaults=t}(jQuery),function(e){"function"==typeof define&&define.amd?define("datetimepicker",["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var r,o=t||window.event,s=[].slice.call(arguments,1),a=0,l=0,d=0,c=0,u=0;return t=e.event.fix(o),t.type="mousewheel",o.wheelDelta&&(a=o.wheelDelta),o.detail&&(a=-1*o.detail),o.deltaY&&(d=-1*o.deltaY,a=d),o.deltaX&&(l=o.deltaX,a=-1*l),void 0!==o.wheelDeltaY&&(d=o.wheelDeltaY),void 0!==o.wheelDeltaX&&(l=-1*o.wheelDeltaX),c=Math.abs(a),(!n||n>c)&&(n=c),u=Math.max(Math.abs(d),Math.abs(l)),(!i||i>u)&&(i=u),r=a>0?"floor":"ceil",a=Math[r](a/n),l=Math[r](l/i),d=Math[r](d/i),s.unshift(t,a,l,d),(e.event.dispatch||e.event.handle).apply(this,s)}var n,i,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(e.event.fixHooks)for(var s=r.length;s;)e.event.fixHooks[r[--s]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=o.length;e;)this.addEventListener(o[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=o.length;e;)this.removeEventListener(o[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),Date.parseFunctions={count:0},Date.parseRegexes=[],Date.formatFunctions={count:0},Date.prototype.dateFormat=function(e){if("unixtime"==e)return parseInt(this.getTime()/1e3);null==Date.formatFunctions[e]&&Date.createNewFormat(e);var t=Date.formatFunctions[e];return this[t]()},Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;for(var code="Date.prototype."+funcName+" = function() {return ",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,code+="'"+String.escape(ch)+"' + "):code+=Date.getFormatCode(ch):special=!0;eval(code.substring(0,code.length-3)+";}")},Date.getFormatCode=function(e){switch(e){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(e)+"' + "}},Date.parseDate=function(e,t){if("unixtime"==t)return new Date(isNaN(parseInt(e))?0:1e3*parseInt(e));null==Date.parseFunctions[t]&&Date.createParser(t);var n=Date.parseFunctions[t];return Date[n](e)},Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++,regexNum=Date.parseRegexes.length,currentGroup=1;Date.parseFunctions[format]=funcName;for(var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,regex+=String.escape(ch)):(obj=Date.formatCodeToRegex(ch,currentGroup),currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c)):special=!0;code+="if (y > 0 && z > 0){\nvar doyDate = new Date(y,0);\ndoyDate.setDate(z);\nm = doyDate.getMonth();\nd = doyDate.getDate();\n}",code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}",Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$"),eval(code)},Date.formatCodeToRegex=function(e,t){switch(e){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:1,c:"z = parseInt(results["+t+"], 10);\n",s:"(\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+t+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+t+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+t+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+t+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+t+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(e)}}},Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")},Date.prototype.getDayOfYear=function(){var e=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var t=0;t<this.getMonth();++t)e+=Date.daysInMonth[t];return e+this.getDate()},Date.prototype.getWeekOfYear=function(){var e=this.getDayOfYear()+(4-this.getDay()),t=new Date(this.getFullYear(),0,1),n=7-t.getDay()+4;return String.leftPad(Math.ceil((e-n)/7)+1,2,"0")},Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100||e%400==0&&e)},Date.prototype.getFirstDayOfMonth=function(){var e=(this.getDay()-(this.getDate()-1))%7;return 0>e?e+7:e},Date.prototype.getLastDayOfMonth=function(){var e=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return 0>e?e+7:e},Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]},Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},String.escape=function(e){return e.replace(/('|\\)/g,"\\$1")},String.leftPad=function(e,t,n){var i=new String(e);for(null==n&&(n=" ");i.length<t;)i=n+i;return i},Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.y2kYear=50,Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"},define("plugins/date/view.js",["grasshopperBaseView","moment","jquery","datetimepicker"],function(e,t,n){function i(){Date.parseDate=function(e,n){return t(e,n).toDate()},Date.prototype.dateFormat=function(e){return t(this).format(e)}}function r(e){setTimeout(o.bind(this,e),100)}function o(e){this.$el.find(".datetimepicker").each(function(){n(this).datetimepicker({startDate:t(),timepicker:!1,format:"YYYY/MM/DD",formatDate:"YYYY/MM/DD",step:1})}),e.resolve()}return e.extend({beforeRender:i,afterRender:r})}),define("text!plugins/datetime/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        <input class="datetimepicker" data-rv-id="model:_id" data-rv-placeholder="model:type" data-rv-value="model:value">\n    </div>\n</div>'}),define("plugins/datetime/model",["grasshopperModel","resources"],function(e,t){return e.extend({defaults:{resources:t}})
}),define("text!plugins/datetime/setupTemplate.html",[],function(){return""}),define("plugins/datetime/config.js",["text!plugins/datetime/template.html","plugins/datetime/model","text!plugins/datetime/setupTemplate.html"],function(e,t,n){return{name:"datetimePlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"datetime",dataType:"date",validation:[],value:""},template:e,setupTemplate:n,wrapper:!1}}),define("plugins/datetime/view.js",["grasshopperBaseView","moment","jquery","datetimepicker"],function(e,t,n){function i(){Date.parseDate=function(e,n){return t(e,n).toDate()},Date.prototype.dateFormat=function(e){return t(this).format(e)}}function r(e){setTimeout(o.bind(this,e),100)}function o(e){this.$el.find(".datetimepicker").each(function(){n(this).datetimepicker({startDate:t(),timepicker:!0,format:"YYYY/MM/DD h:mm a",formatTime:"h:mm a",formatDate:"YYYY/MM/DD",step:1})}),e.resolve()}return e.extend({beforeRender:i,afterRender:r})}),define("text!plugins/dropdown/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        <select data-rv-value="model:value">\n            <option disabled selected>{{model:resources->plugins->dropdown->selectOption}}</option>\n            <option data-rv-each-option="model:options" data-rv-value="option._id">{{option.label}}</option>\n        </select>\n    </div>\n</div>'}),define("plugins/dropdown/model",["grasshopperModel","resources"],function(e,t){return e.extend({defaults:{resources:t}})}),define("text!plugins/dropdown/setupTemplate.html",[],function(){return'<div class="row">\n    <div class="small-12 columns">\n        <div data-rv-each-option="collection:">\n            <div class="row-collapse">\n                <div class="small-11 columns">\n                    <div class="row">\n                        <div class="small-2 columns">\n                            <label class="right inline">{{model:resources->label}}</label>\n                        </div>\n                        <div class="small-10 columns">\n                            <input type="text" class="optionInput" placeholder="dropdown option" data-rv-value="option:label" style="margin-bottom: 2px;">\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="small-2 columns">\n                            <label class="right inline">{{model:resources->value}}</label>\n                        </div>\n                        <div class="small-10 columns">\n                            <input type="text" class="optionInput" placeholder="dropdown option" data-rv-value="option:_id" style="margin-bottom: 2px;">\n                        </div>\n                    </div>\n                </div>\n\n                <div class="small-1 columns">\n                    <button id="removeOptionFromDropdown" data-rv-on-click="view.removeOptionFromDropdown" class="button radius tiny"><i class="fa fa-minus"></i></button>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-11 columns small-offset-1">\n                    <hr>\n                </div>\n            </div>\n        </div>\n        <button id="addOptionToDropdown" class="right tiny radius"><i class="fa fa-plus"></i></button>\n    </div>\n</div>'}),define("plugins/dropdown/config.js",["text!plugins/dropdown/template.html","plugins/dropdown/model","text!plugins/dropdown/setupTemplate.html","backbone"],function(e,t,n,i){return{name:"dropdownPlugin",ModelType:t,modelData:{min:1,max:1,options:!0,label:"",type:"dropdown",dataType:"dropdown",validation:[],value:void 0},wrapper:!1,template:e,setupTemplate:n,events:{"click #addOptionToDropdown":"addOptionToDropdown","blur .optionInput":"reduceCollection"},collection:new i.Collection}}),define("plugins/dropdown/view.js",["grasshopperBaseView"],function(e){function t(){this.collection.reset(this.model.get("options"))}function n(){this.collection.add({_id:"",label:""}),this.reduceCollection()}function i(e,t){this.collection.remove(t.option),this.reduceCollection()}function r(){var e=[];this.collection.each(function(t){var n=t.toJSON();e.push(n)}),this.model.set("options",e)}return e.extend({beforeRender:t,addOptionToDropdown:n,removeOptionFromDropdown:i,reduceCollection:r})}),define("text!plugins/editorialwindow/template.html",[],function(){return'<div class="row">\n\n    <div class="row">\n        <div class="small-2 columns">\n\n            <label data-rv-for="model.cid | prepend startDate" class="right inline">{{model:resources->plugins->editorialWindow->start}}</label>\n\n        </div>\n\n        <div class="small-10 columns">\n\n            <div class="small-7 large-4 columns">\n\n                <input class="datetimepicker" data-rv-id="model.cid | prepend startDate"\n                       data-rv-value="model:value->validFrom  | asEditorialDate">\n                <small data-rv-if="model:orderError" class="error small-4">\n                    {{model:resources->plugins->editorialWindow->startAfterEnd}}\n                </small>\n\n            </div>\n            <div class="small-5 large-8 columns">\n\n                <button class="button tiny radius" data-rv-on-click="view.setValidFromToNow">\n                    {{model:resources->plugins->editorialWindow->setToNow}}\n                </button>\n\n            </div>\n\n        </div>\n    </div>\n\n    <div class="row">\n        <div class="small-2 columns">\n\n            <label data-rv-for="model.cid | prepend endDate" class="right inline">{{model:resources->plugins->editorialWindow->end}}</label>\n\n        </div>\n\n        <div class="small-10 columns">\n\n            <div class="small-7 large-4 columns">\n\n                <input class="datetimepicker" data-rv-id="model.cid | prepend endDate"\n                       data-rv-value="model:value->validTo | asEditorialDate">\n\n            </div>\n\n            <div class="small-5 large-8 columns">\n\n                <ul class="button-group radius">\n\n                    <li>\n                        <button class="button tiny" data-rv-on-click="view.setValidToToNow">\n                            {{model:resources->plugins->editorialWindow->setToNow}}\n                        </button>\n                    </li>\n                    <li>\n                        <button class="button tiny" data-rv-on-click="view.setValidToNeverExpire">\n                            {{model:resources->plugins->editorialWindow->neverExpire}}\n                        </button>\n                    </li>\n\n                </ul>\n\n            </div>\n\n        </div>\n\n    </div>\n\n</div>'}),define("plugins/editorialwindow/model",["grasshopperModel","resources","moment"],function(e,t,n){function i(){this.on("change:value",r.bind(this))}function r(){var e=this.get("value.validFrom"),t=this.get("value.validTo");n(t).isAfter(e)?this.set("orderError",!1):this.set("orderError",!0)}return e.extend({initialize:i,defaults:{resources:t,orderError:!1,value:{validFrom:"",validTo:""}}})}),define("text!plugins/editorialwindow/setupTemplate.html",[],function(){return""}),define("plugins/editorialwindow/formatters",["moment","resources"],function(e,t){function n(n){return n?e(n).format(t.plugins.editorialWindow.dateFormat):void 0}function i(t){return t?e(t).toISOString():void 0}return{asEditorialDate:{read:n,publish:i}}}),define("plugins/editorialwindow/config.js",["text!plugins/editorialwindow/template.html","plugins/editorialwindow/model","text!plugins/editorialwindow/setupTemplate.html","plugins/editorialwindow/formatters"],function(e,t,n,i){return{name:"editorialWindowPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"editorialwindow",dataType:"date",validation:[],value:{validFrom:"",validTo:""}},template:e,setupTemplate:n,wrapper:!1,rivetsConfig:{formatters:i}}}),define("plugins/editorialwindow/view.js",["grasshopperBaseView","moment","jquery","datetimepicker","resources"],function(e,t,n,i,r){function o(){Date.parseDate=function(e,n){return t(e,n).toDate()},Date.prototype.dateFormat=function(e){return t(this).format(e)}}function s(e){setTimeout(a.bind(this,e),100)}function a(e){this.$el.find(".datetimepicker").each(function(){n(this).datetimepicker({startDate:t(),timepicker:!0,formatTime:"h:mm a",format:r.plugins.editorialWindow.dateFormat,step:1})}),e.resolve()}function l(){this.model.set("value.validFrom",t().format(r.plugins.editorialWindow.dateFormat))}function d(){this.model.set("value.validTo",t().format(r.plugins.editorialWindow.dateFormat))}function c(){this.model.set("value.validTo",t("December 31 3000").format(r.plugins.editorialWindow.dateFormat))}return e.extend({beforeRender:o,afterRender:s,setValidFromToNow:l,setValidToToNow:d,setValidToNeverExpire:c})}),define("text!plugins/embeddedtype/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n\n        <div data-rv-show="model:loading">\n            <div>\n                <i class="fa fa-refresh fa fa-spin"></i>\n            </div>\n        </div>\n\n        <div data-rv-hide="model:loading" id="embeddedTypeAccordion">\n\n            <div class="accordionHeader">\n                {{model:accordionLabel | existsOr -- }}\n            </div>\n\n            <div class="accordionContent">\n                <div data-rv-each-field="model:activeContentType->fields">\n                    <div data-rv-fieldwrapper="field"></div>\n                </div>\n            </div>\n\n        </div>\n\n    </div>\n</div>\n\n\n\n\n'}),define("plugins/embeddedtype/model",["grasshopperModel","resources","constants"],function(e,t,n){return e.extend({idAttribute:"options",defaults:function(){return{resources:t,accordionLabel:"",fields:{},value:{}}},urlRoot:n.api.contentTypes.url})}),define("text!plugins/embeddedtype/setupTemplate.html",[],function(){return'<div class="row">\n    <div class="small-2 columns">\n        <label class="right inline">{{model:resources->plugins->embeddedType->contentType | withColon}}</label>\n    </div>\n    <div class="small-10 columns">\n        <select data-rv-value="model:options">\n            <option disabled selected>{{model:resources->selectOption}}</option>\n            <option data-rv-each-option="model:availableContentTypes" data-rv-value="option._id">{{option.label}}</option>\n        </select>\n    </div>\n</div>'}),define("plugins/embeddedtype/config.js",["text!plugins/embeddedtype/template.html","plugins/embeddedtype/model","text!plugins/embeddedtype/setupTemplate.html","appBinders"],function(e,t,n,i){return{name:"embeddedtypePlugin",ModelType:t,modelData:function(){return{min:1,max:1,options:!0,label:"",type:"embeddedtype",dataType:"ref",validation:[],value:{}}},template:e,setupTemplate:n,wrapper:!1,rivetsConfig:{binders:[i]}}}),define("plugins/embeddedtype/view.js",["grasshopperBaseView","contentTypeWorker","jquery","underscore","masseuse"],function(e,t,n,i,r){function o(){this.model.toggle("loading"),s.call(this).done(l.bind(this)),this.$el.foundation(),u.call(this)}function s(){var e=new n.Deferred;return t.getAvailableContentTypes().always(a.bind(this,e)),e.promise()}function a(e,t){this.model.set("availableContentTypes",t),e.resolve()}function l(){var e,t=this.model.get("options");i.isEmpty(t)||(e=i.findWhere(this.model.get("availableContentTypes"),{_id:t}),this.model.set("activeContentType",e),d.call(this)),this.model.toggle("loading")}function d(){var e=this.model.get("activeContentType"),t=this;i.each(e.fields,function(e){t.model.set("fields."+e._id,new h("value."+e._id,t.model))}),c.call(this)}function c(){var e=this.model.get("activeContentType.fields"),t=i.first(e)._id;this.model.set("accordionLabel",new h("value."+t,this.model))}function u(){var e=this.$("#embeddedTypeAccordion");e.accordion({header:".accordionHeader",icons:{header:"fa fa-chevron-right",activeHeader:"fa fa-chevron-down"},active:!1,collapsible:!0,heightStyle:"content"})}var h=r.ProxyProperty;return e.extend({afterRender:o})}),define("text!plugins/filereference/template.html",[],function(){return'<div class="row">\n    <div class="small-8 columns">\n        <input type="text" data-rv-value="model:selectedContentName" readonly="true">\n    </div>\n    <div class="small-4 columns">\n\n        <ul class="button-group radius">\n            <li>\n                <button class="button tiny" data-rv-on-click="view.fireSelectFileModal">\n                    {{model:resources->plugins->fileReference->selectFile}}\n                </button>\n            </li>\n            <li data-rv-show="model:selectedContentName">\n                <a class="button tiny" data-rv-on-click="view.fireFileDetailModal">\n                    {{model:resources->plugins->fileReference->viewSelectedFile}}\n                </a>\n            </li>\n        </ul>\n\n    </div>\n</div>'}),define("assetDetailViewModel",["grasshopperModel","resources","underscore","constants","masseuse"],function(e,t,n,i,r){function o(){return i.api.assets.url.replace(":id",this.get("nodeId"))}var s=r.ComputedProperty;return e.extend({defaults:{resources:t,fileName:new s(["url"],function(e){return e?n.last(e.split("/")):""}),id:new s(["fileName"],function(e){return e?e:""}),progressWidth:0},urlRoot:o})}),define("plugins/filereference/model",["grasshopperModel","resources","backbone","constants","grasshopperCollection","masseuse","underscore","assetDetailViewModel"],function(e,t,n,i,r,o,s,a){function l(){var t=this;e.prototype.initialize.apply(this,arguments),this.set("children",new(r.extend({url:function(){return i.api.nodesChildren.url.replace(":id",t.get("_id"))}}))),this.on("change:options",function(){"0"!==this.get("options.defaultNode")&&this.set("selectedNodeLabel",this.get("children").findWhere({_id:this.get("options.defaultNode")}).get("label"))})}var d=o.ComputedProperty;return e.extend({initialize:l,defaults:{resources:t,showTree:!1,inSetup:!0,nodeTreeType:"file",selectedContentName:new d(["selectedContent"],function(e){return e?s.last(e.split("/")):""}),selectedContent:new d(["value"],function(e){return e}),assetModel:new d(["value"],function(e){return new a({nodeId:s.first(e.split("/")),url:e})}),_id:"0"},urlRoot:i.api.node.url})}),define("text!plugins/filereference/setupTemplate.html",[],function(){return'<div class="row">\n\n    <div class="small-12 columns">\n        <div class="small-2 columns">\n            <label data-rv-for="model:_id | prepend fileReference" class="right inline">{{model:resources->plugins->fileReference->defaultFolder | withColon}}</label>\n        </div>\n        <div class="small-10 columns">\n            <div class="row collapse" data-rv-id="model:_id | prepend fileReference">\n                <div class="small-11 columns">\n                    <input type="text" data-rv-value="model:selectedNodeLabel" readonly="true">\n                </div>\n                <div class="small-1 columns" style="padding-left: 0;">\n                    <span class="postfix radius"><i class="fa fa-lock"></i></span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="small-12 columns">\n        <label>\n            {{model:resources->plugins->fileReference->selectDefaultFolderOr}}\n        <span>\n            <a data-rv-on-click="view.setRootAsDefaultNode">\n                {{model:resources->plugins->fileReference->setRootAsDefault}}\n            </a>\n        </span>\n\n            <div data-rv-hide="model:showTree"><i class="fa fa-refresh"></i></div>\n\n            <div data-rv-show="model:showTree" id="nodeTree">\n                <div data-rv-each-node="model:children:" data-rv-nodetree="node"></div>\n            </div>\n\n        </label>\n    </div>\n\n</div>'}),define("plugins/filereference/config.js",["text!plugins/filereference/template.html","plugins/filereference/model","text!plugins/filereference/setupTemplate.html","backbone","appBinders","formatters"],function(e,t,n,i,r,o){return{name:"fileReferencePlugin",ModelType:t,modelData:{min:1,max:1,options:{allowedTypes:[],defaultNode:"0"},label:"",type:"filereference",dataType:"ref",validation:[],value:""},template:e,setupTemplate:n,events:{"click #nodeTree":"stopAccordionPropagation"},rivetsConfig:{formatters:[o],binders:[r]},wrapper:!1}}),define("text!plugins/filereference/modal/template.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n        <div class="row modalPadding">\n            {{model:resources->plugins->fileReference->selectedFile | withColon}}\n            {{model:selectedContentName}}\n        </div>\n\n        <br>\n\n        <div class="row modalPadding">\n            {{model:resources->plugins->fileReference->currentFolder | withColon}}{{model:folderLabel}}\n        </div>\n\n        <br>\n\n        <div id="modalBody" class="row" data-rv-hide="model:loading">\n            <div id="nodeTree" class="small-12 columns inputContainer">\n\n                <div data-rv-show="model:loading">\n                    <i class="fa fa-refresh fa fa-spin"></i>\n                </div>\n\n                <div data-rv-each-node="model:children:" data-rv-nodetree="node"></div>\n\n                <ul data-rv-hide="model:inRoot" class="no-bullet nodeTreeContent accordion">\n\n                    <li data-rv-each-item="model:content:" class="nodeTreeSubNode">\n                        <input data-rv-id="item.cid" type="radio" name="selectedContent"\n                               data-rv-checked="model:selectedContent" data-rv-value="item:_id">\n                        <label data-rv-for="item.cid">{{item:label}}</label>\n                    </li>\n\n                </ul>\n\n            </div>\n        </div>\n\n        <div  id="buttonContainer" class="row" data-rv-hide="model:loading">\n            <div class="right">\n                <button id="confirm" class="button tiny radius noMarginBottom">{{model:resources->confirm}}</button>\n                <button id="cancel" class="button tiny radius noMarginBottom">{{model:resources->cancel}}</button>\n            </div>\n        </div>\n\n    </div>\n</div>'}),define("views/nodeTree/nodeTreeFileDetailModel",["grasshopperModel","masseuse","underscore"],function(e,t,n){var i=t.ComputedProperty;return e.extend({defaults:{fileName:new i(["url"],function(e){return e?n.last(e.split("/")):""}),_id:new i(["url"],function(e){return e}),label:new i(["fileName"],function(e){return e})}})}),define("plugins/filereference/modal/model",["grasshopperModel","resources","grasshopperCollection","constants","masseuse","underscore","views/nodeTree/nodeTreeFileDetailModel"],function(e,t,n,i,r,o,s){function a(){var t=this;e.prototype.initialize.apply(this,arguments),this.set("children",new(n.extend({url:function(){return i.api.nodesChildren.url.replace(":id",t.get("_id"))}}))),this.set("content",new(n.extend({model:s,url:function(){return i.api.assets.url.replace(":id",t.get("_id"))}})))}var l=r.ComputedProperty;return e.extend({initialize:a,idAttribute:"_id",defaults:{loading:!0,nodeTreeType:"file",inRoot:new l(["_id"],function(e){return"0"===e}),folderLabel:new l(["_id","label"],function(e,t){return"0"===e?"Root":t}),selectedContentName:new l(["selectedContent"],function(e){return e?o.last(e.split("/")):""}),resources:t},urlRoot:i.api.node.url})}),define("plugins/filereference/modal/config",["text!plugins/filereference/modal/template.html","plugins/filereference/modal/model","appBinders"],function(e,t,n){return{name:"fileReferenceModal",ModelType:t,appendTo:"#modal",wrapper:!1,template:e,rivetsConfig:{binders:[n]},events:{"click #nodeTree":"stopAccordionPropagation","click .selectedContentRadio":"confirmModal","click #confirm":"confirmModal","click #cancel":"cancelModal"},listeners:[]}}),define("plugins/filereference/modal/view",["grasshopperBaseView","plugins/filereference/modal/config","jquery"],function(e,t,n){function i(e){n.when(o.call(this),s.call(this),a.call(this)).done(l.bind(this),e.resolve)}function r(){this.$el.foundation()}function o(){return this.model.get("children").fetch()}function s(){var e=new n.Deferred;return this.model.get("inRoot")?e.resolve():this.model.get("content").fetch().done(e.resolve),e.promise()}function a(){return this.model.fetch()}function l(){this.model.toggle("loading")}function d(e){e.stopPropagation()}function c(){this.$deferred.resolve(this.model.attributes),h.call(this)}function u(){this.$deferred.reject(),h.call(this)}function h(){this.remove()}function f(){return!1}return e.extend({defaultOptions:t,beforeRender:i,afterRender:r,stopAccordionPropagation:d,confirmModal:c,cancelModal:u,setSelectedNode:f})}),define("plugins/filereference/view.js",["grasshopperBaseView","underscore","api","contentTypeWorker","jquery","plugins/filereference/modal/view"],function(e,t,n,i,r,o){function s(){this.model.get("inSetup")&&this.model.get("children").fetch().then(a.bind(this))}function a(){var e=new r.Deferred,t=this.model.get("options.defaultNode");return t&&"0"!==t?n.getNodeDetail(t).done(l.bind(this,e)):t&&"0"===t?l.call(this,e,{label:"Root"}):e.resolve(),e.promise()}function l(e,t){this.model.set("selectedNodeLabel",t.label),e&&e.resolve()}function d(){this.model.set("showTree",!0),this.$el.foundation()}function c(e){e.stopPropagation()}function u(e){this.model.set("selectedNodeLabel","Root"),this.model.set("options.defaultNode","0"),e.preventDefault()}function h(){f.call(this).done(p.bind(this))}function f(){this.model.set("inSetup",!1);var e=new r.Deferred,t=new o({modelData:{header:"Select File",selectedContent:this.model.get("selectedContent"),_id:this.model.get("options.defaultNode")},$deferred:e});return t.start(),e.promise()}function p(e){this.model.set("selectedContentName",e.selectedContentName),this.model.set("selectedContent",e.selectedContent),this.model.set("value",t.last(e.selectedContent.split("/"),2).join("/"))}function m(){this.model.get("assetModel").fetch().done(v.bind(this))}function v(e){this.displayModal({header:this.model.get("selectedContentName"),type:"image",data:e.url})}return e.extend({beforeRender:s,afterRender:d,stopAccordionPropagation:c,setRootAsDefaultNode:u,fireSelectFileModal:h,setSelectedNode:l,fireFileDetailModal:m})}),define("text!plugins/keyvalue/template.html",[],function(){return'<div class="row">\n    <div class="small-6 columns">\n        <div class="row">\n            <div class="small-2 columns">\n                <label class="right inline">Key:</label>\n            </div>\n            <div class="small-10 columns">\n                <input type="text" placeholder="key" class="keyValueInput" data-rv-value="model:objKey" style="margin-bottom: 2px;">\n            </div>\n        </div>\n    </div>\n    <div class="small-6 columns">\n        <div class="row">\n            <div class="small-2 columns">\n                <label class="right inline">Value:</label>\n            </div>\n            <div class="small-10 columns">\n                <input type="text" placeholder="value" class="keyValueInput" data-rv-value="model:objValue" style="margin-bottom: 2px;">\n            </div>\n        </div>\n    </div>\n</div>'}),define("plugins/keyvalue/model",["grasshopperModel","resources"],function(e,t){return e.extend({defaults:{resources:t,objKey:"",objValue:""}})}),define("text!plugins/keyvalue/setupTemplate.html",[],function(){return""}),define("plugins/keyvalue/config.js",["text!plugins/keyvalue/template.html","plugins/keyvalue/model","text!plugins/keyvalue/setupTemplate.html"],function(e,t,n){return{name:"keyvaluePlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"keyvalue",dataType:"object",validation:[],value:{"":""}},template:e,setupTemplate:n,events:{"blur .keyValueInput":"buildObj"},wrapper:!1}}),define("plugins/keyvalue/view.js",["grasshopperBaseView"],function(e){function t(){var e,t=this.model.get("value");if(t)for(e in t)this.model.set("objKey",e),this.model.set("objValue",t[e])}function n(){var e=this.model.get("objKey"),t=this.model.get("objValue"),n={};n[e]=t,this.model.set("value",n)}return e.extend({beforeRender:t,buildObj:n})}),define("text!plugins/number/template.html",[],function(){return'<div class="row">\n    <div class="small-6 columns">\n        <div class="row">\n            <div class="small-10 columns">\n                <input type="text" class="numberInput" data-rv-value="model:value">\n            </div>\n        </div>\n    </div>\n</div>'}),define("plugins/number/model",["grasshopperModel","resources"],function(e,t){return e.extend({defaults:{resources:t}})}),define("text!plugins/number/setupTemplate.html",[],function(){return""}),define("plugins/number/config.js",["text!plugins/number/template.html","plugins/number/model","text!plugins/number/setupTemplate.html"],function(e,t,n){return{name:"numberPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"number",dataType:"object",validation:[],value:""},template:e,setupTemplate:n,wrapper:!1}}),define("plugins/number/view.js",["grasshopperBaseView"],function(e){function t(){var e,t=this.model.get("value");if(t)for(e in t)this.model.set("objKey",e),this.model.set("objValue",t[e])}function n(){var e=this.model.get("objKey"),t=this.model.get("objValue"),n={};n[e]=t,this.model.set("value",n)}return e.extend({beforeRender:t,buildObj:n})}),define("text!plugins/password/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        <input type="password" data-rv-id="model:_id" data-rv-placeholder="model:type" data-rv-value="model:value">\n        <small class="error" data-rv-show="model:hasError" data-rv-text="model:errorMessage"></small>\n    </div>\n</div>'}),define("plugins/password/model",["grasshopperModel","resources"],function(e,t){return e.extend({defaults:{resources:t}})}),define("text!plugins/password/setupTemplate.html",[],function(){return""}),define("plugins/password/config.js",["text!plugins/password/template.html","plugins/password/model","text!plugins/password/setupTemplate.html"],function(e,t,n){return{name:"passwordPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"password",defaultValueType:"text",dataType:"string",validation:[],value:""},template:e,setupTemplate:n,wrapper:!1}}),define("plugins/password/view.js",["grasshopperBaseView"],function(e){return e.extend({})}),define("text!plugins/radio/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        radio TEMPLATE has not been made.\n    </div>\n</div>'}),define("plugins/radio/model",["grasshopperModel","resources"],function(e,t){return e.extend({defaults:{resources:t}})}),define("text!plugins/radio/setupTemplate.html",[],function(){return""}),define("plugins/radio/config.js",["text!plugins/radio/template.html","plugins/radio/model","text!plugins/radio/setupTemplate.html"],function(e,t,n){return{name:"radioPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"radio",dataType:"boolean",validation:[],value:!1},template:e,setupTemplate:n,wrapper:!1}}),define("plugins/radio/view.js",["grasshopperBaseView"],function(e){return e.extend({})}),define("text!plugins/readonly/template.html",[],function(){return'<div class="row">\n    <div class="small-11 columns" style="padding-right: 0;">\n        <input type="text" data-rv-placeholder="model:type" data-rv-value="model:value" readonly="true">\n    </div>\n    <div class="small-1 columns" style="padding-left: 0;">\n        <span class="postfix radius"><i class="fa fa-lock"></i></span>\n    </div>\n</div>'}),define("plugins/readonly/model",["grasshopperModel","resources"],function(e,t){return e.extend({defaults:{resources:t}})}),define("text!plugins/readonly/setupTemplate.html",[],function(){return""}),define("plugins/readonly/config.js",["text!plugins/readonly/template.html","plugins/readonly/model","text!plugins/readonly/setupTemplate.html"],function(e,t,n){return{name:"readonlyPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"readonly",defaultValueType:"text",dataType:"string",validation:[],value:""},wrapper:!1,template:e,setupTemplate:n}}),define("plugins/readonly/view.js",["grasshopperBaseView"],function(e){return e.extend({})}),define("text!plugins/richtext/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        <div data-rv-show="model:loading">\n            <span>{{model:resources->plugins->richText->loading}}</span>\n            <i data-rv-show="model:loading" class="fa fa-refresh fa fa-spin"></i>\n        </div>\n\n        <textarea data-rv-id="model.cid | prepend ckeditor" data-rv-value="model:value" style="display: none;"></textarea>\n        <div class="richTextEditorPadding"></div>\n    </div>\n</div>'}),define("plugins/richtext/model",["grasshopperModel","resources"],function(e,t){return e.extend({defaults:{resources:t,loading:!1}})}),define("text!plugins/richtext/setupTemplate.html",[],function(){return""}),define("plugins/richtext/config.js",["text!plugins/richtext/template.html","plugins/richtext/model","text!plugins/richtext/setupTemplate.html"],function(e,t,n){return{name:"richTextPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"richtext",dataType:"string",validation:[],value:""},listeners:[["channels.views","pluginWrapperSortStart","sortStart"],["channels.views","pluginWrapperSortStop","stopSort"]],template:e,setupTemplate:n,wrapper:!1}}),define("text!plugins/richtext/fileBrowserModal/template.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n        <div data-rv-show="model:loading">\n            <i class="fa fa-refresh fa fa-spin"></i>\n        </div>\n\n        <div id="modalBody" class="row" data-rv-hide="model:loading">\n            <div id="nodeTree" class="inputContainer">\n\n                <div data-rv-each-node="model:children:" data-rv-nodetree="node"></div>\n\n                <ul data-rv-hide="model:inRoot" class="no-bullet nodeTreeContent accordion">\n\n                    <li data-rv-each-file="model:files:">\n                        <input data-rv-id="file.cid" type="radio" name="selectedFile"\n                               data-rv-value="file:url" data-rv-checked="model:selectedFile">\n                        <label data-rv-for="file.cid" data-rv-on-click="view.confirmModal">\n                            <img data-rv-id="file:url" class="th nodeTreeThumbNail" data-rv-src=file:url data-rv-alt="file:fileName" >\n                            <label data-rv-for="file:url" class="right inline">{{file:fileName}}</label>\n                        </label>\n                    </li>\n\n                </ul>\n\n            </div>\n        </div>\n\n        <div id="buttonContainer" class="row" data-rv-hide="model:loading">\n            <div class="right">\n                <button id="confirm" class="button tiny radius noMarginBottom">{{model:resources->confirm}}</button>\n                <button id="cancel" class="button tiny radius noMarginBottom">{{model:resources->cancel}}</button>\n            </div>\n        </div>\n\n    </div>\n</div>'}),define("plugins/richtext/fileBrowserModal/model",["grasshopperModel","resources","constants","grasshopperCollection"],function(e,t,n,i){function r(){var t=this;e.prototype.initialize.apply(this,arguments),this.set("children",new(i.extend({url:function(){return n.api.nodesChildren.url.replace(":id",t.get("_id"))}})))}return e.extend({initialize:r,defaults:{resources:t,showTree:!1,nodeTreeType:"file",header:t.plugins.richText.selectFile}})}),define("plugins/richtext/fileBrowserModal/config",["text!plugins/richtext/fileBrowserModal/template.html","plugins/richtext/fileBrowserModal/model","appBinders"],function(e,t,n){return{name:"richTextFileBrowserPlugin",ModelType:t,appendTo:"#modal",modelData:{},template:e,events:{"click #nodeTree":"stopAccordionPropagation","click .selectedContentRadio":"confirmModal","click #confirm":"confirmModal","click #cancel":"cancelModal"},wrapper:!1,listeners:[],rivetsConfig:{binders:[n]}}
}),define("plugins/richtext/fileBrowserModal/view",["grasshopperBaseView","plugins/richtext/fileBrowserModal/config"],function(e,t){function n(e){r.call(this).done(o.bind(this),e.resolve)}function i(){this.$el.foundation()}function r(){return this.model.get("children").fetch()}function o(){this.model.toggle("showTree")}function s(e){e.stopPropagation()}function a(){this.$deferred.resolve(this.model.get("selectedContent")),d.call(this)}function l(){this.$deferred.reject(),d.call(this)}function d(){this.remove()}function c(){return!1}return e.extend({defaultOptions:t,beforeRender:n,afterRender:i,stopAccordionPropagation:s,confirmModal:a,cancelModal:l,setSelectedNode:c})}),define("plugins/richtext/ckeditorConfig",[],function(){return{customConfig:"",filebrowserBrowseUrl:"dummylocation",skin:"moono"}}),define("plugins/richtext/view.js",["grasshopperBaseView","underscore","jquery","plugins/richtext/fileBrowserModal/view","plugins/richtext/ckeditorConfig","require"],function(e,t,n,i,r,o){function s(){this.model.get("inSetup")||a.call(this).done(d.bind(this),c.bind(this),h.bind(this))}function a(){var e=new n.Deferred;return p.call(this),o(["ckeditorAdapter"],l.bind(this,e)),e.promise()}function l(e){var t=this;this.ckeditor=this.$("#ckeditor"+this.model.cid).ckeditor(r,function(){p.call(t),e&&e.resolve()}).editor}function d(){t.isUndefined(this.model.get("value"))||this.ckeditor.setData(this.model.get("value"))}function c(){this.ckeditor.on("change",u.bind(this))}function u(){this.model.set("value",this.ckeditor.getData())}function h(){this.oldWindowOpen=window.open,window.open=window.opener=m.bind(this)}function f(){this.model&&!this.model.get("inSetup")&&(window.open=this.oldWindowOpen,this.ckeditor.destroy()),e.prototype.remove.apply(this,arguments)}function p(){this.model.toggle("loading")}function m(){v.call(this).done(g.bind(this))}function v(){var e=new n.Deferred,t=new i({modelData:{_id:"0"},$deferred:e});return t.start(),e.promise()}function g(e){window.CKEDITOR.tools.callFunction(this.ckeditor._.filebrowserFn,e)}function y(){var e=this.$("#ckeditor"+this.model.cid),t=this.$("#cke_ckeditor"+this.model.cid).clone().addClass("cloned");u.call(this),e.after(t),this.ckeditor.destroy(),e.hide()}function b(){this.$("cloned").remove()}return e.extend({afterRender:s,remove:f,sortStart:y,stopSort:b})}),define("text!plugins/slug/template.html",[],function(){return'<div class="row">\n    <div class="small-12 columns">\n        <input type="text" data-rv-value="model:value | asSlug">\n    </div>\n</div>'}),define("plugins/slug/model",["grasshopperModel","resources","grasshopperCollection"],function(e,t,n){return e.extend({defaults:{resources:t,oldSlugValue:"",possibleFieldsToSlug:new n}})}),define("text!plugins/slug/setupTemplate.html",[],function(){return'<div class="row">\n    <div class="small-2 columns">\n        <label class="right inline">{{model:resources->plugins->slug->selectField}}</label>\n    </div>\n    <div class="small-10 columns">\n        <select data-rv-value="model:options">\n            <option disabled selected>{{model:resources->selectOption}}</option>\n            <option data-rv-each-option="model:possibleFieldsToSlug:" data-rv-value="option:_id">{{option:label}}</option>\n        </select>\n    </div>\n</div>'}),define("plugins/slug/formatters",[],function(){function e(e){return e?e.toLowerCase().trim().replace(/[\s]+/g,"-").replace(/[^-a-zA-Z0-9._~]/g,""):""}function t(e){return e?e.toLowerCase().trim().replace(/[\s]+/g,"-").replace(/[^-a-zA-Z0-9._~]/g,""):""}return{asSlug:{read:e,publish:t}}}),define("plugins/slug/config.js",["text!plugins/slug/template.html","plugins/slug/model","text!plugins/slug/setupTemplate.html","plugins/slug/formatters"],function(e,t,n,i){return{name:"slugPlugin",ModelType:t,modelData:{min:1,max:1,options:!0,label:"",type:"slug",defaultValueType:"text",dataType:"reference",validation:[],value:""},template:e,setupTemplate:n,wrapper:!1,listeners:[["channels.views","contentFieldsChange","calculateSlug"]],rivetsConfig:{formatters:[i]}}}),define("plugins/slug/view.js",["grasshopperBaseView","underscore"],function(e,t){function n(){this.model.get("inSetup")&&(i.call(this),r.call(this))}function i(){if(this.model){var e=this.parent.parent.collection.where({dataType:"string"}),n=t.filter(e,function(e){return"slug"!==e.get("type")});this.model.get("possibleFieldsToSlug").reset(n)}}function r(){this.parent.parent.collection.on("add remove reset change",i.bind(this))}function o(e){var t=this.model.get("options"),n=e[t],i=e[this.model.get("fieldId")];i===this.model.get("oldSlugValue")&&(this.model.set("oldSlugValue",s.call(this,n)),this.model.set("value",s.call(this,n)))}function s(e){var t=void 0!==e?e:"";return t.toLowerCase().trim().replace(/[\s]+/g,"-").replace(/[^-a-zA-Z0-9._~]/g,"")}return e.extend({afterRender:n,calculateSlug:t.debounce(o,100)})}),define("text!plugins/svgeditor/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        <iframe id="svgEdit" src="vendor/svg-edit-2.7/svg-editor.html?no_save_warning=true" data-rv-on-load="view.initializeSvgEdit" style="width: 100%; height: 600px"/>\n    </div>\n</div>'}),define("plugins/svgeditor/model",["grasshopperModel","resources"],function(e,t){return e.extend({defaults:{resources:t}})}),define("text!plugins/svgeditor/setupTemplate.html",[],function(){return""}),define("plugins/svgeditor/config.js",["text!plugins/svgeditor/template.html","plugins/svgeditor/model","text!plugins/svgeditor/setupTemplate.html"],function(e,t,n){return{name:"svgeditorPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"svgeditor",defaultValueType:"text",defaultValue:"",dataType:"string",validation:[],value:""},template:e,setupTemplate:n,wrapper:!1}}),function(){function e(e){return function(){var t=this,n=[].slice.call(arguments),i=t.send(e,n,function(){});return function(e){t.callbacks[i]=e}}}function t(e,t){var n=t.result||t.error;o=t.id,e.callbacks[o]&&(t.result?e.callbacks[o](n):e.callbacks[o](n,"error"))}function n(e){if("string"==typeof e.data){var n=this.allowedOrigins,i=e.data&&JSON.parse(e.data);!i||"object"!=typeof i||"svg-edit"!==i.namespace||e.source!==this.frame.contentWindow||-1===n.indexOf("*")&&-1===n.indexOf(e.origin)||t(this,i)}}function i(e){return function(t){n.call(e,t)}}function r(t,n){if(!(this instanceof r))return new r(t);this.allowedOrigins=n||[],this.frame=t,this.callbacks={};var o,s=["updateElementFromJson","embedImage","fixOperaXML","clearSelection","addToSelection","removeFromSelection","addNodeToSelection","open","save","getSvgString","setSvgString","createLayer","deleteCurrentLayer","getCurrentDrawing","setCurrentLayer","renameCurrentLayer","setCurrentLayerPosition","setLayerVisibility","moveSelectedToLayer","clear","clearPath","getNodePoint","clonePathNode","deletePathNode","getResolution","getImageTitle","setImageTitle","setResolution","setBBoxZoom","setZoom","getMode","setMode","getStrokeColor","setStrokeColor","getFillColor","setFillColor","setStrokePaint","setFillPaint","getStrokeWidth","setStrokeWidth","getStrokeStyle","setStrokeStyle","getOpacity","setOpacity","getFillOpacity","setFillOpacity","getStrokeOpacity","setStrokeOpacity","getTransformList","getBBox","getRotationAngle","setRotationAngle","each","bind","setIdPrefix","getBold","setBold","getItalic","setItalic","getFontFamily","setFontFamily","getFontSize","setFontSize","getText","setTextContent","setImageURL","setRectRadius","setSegType","quickClone","changeSelectedAttributeNoUndo","changeSelectedAttribute","deleteSelectedElements","groupSelectedElements","zoomChanged","ungroupSelectedElement","moveToTopSelectedElement","moveToBottomSelectedElement","moveSelectedElements","getStrokedBBox","getVisibleElements","cycleElement","getUndoStackSize","getRedoStackSize","getNextUndoCommandText","getNextRedoCommandText","undo","redo","cloneSelectedElements","alignSelectedElements","getZoom","getVersion","setIconSize","setLang","setCustomHandlers"];for(o=0;o<s.length;o++)this[s[o]]=e(s[o]);window.addEventListener("message",i(this),!1)}var o=0;r.prototype.send=function(e,n,i){var r=this;return o++,this.callbacks[o]=i,setTimeout(function(){if(window.location.origin===r.frame.contentWindow.location.origin){var i={id:o},s=r.frame.contentWindow.svgCanvas;try{i.result=s[e].apply(s,n)}catch(a){i.error=a.message}t(r,i)}else r.frame.contentWindow.postMessage(JSON.stringify({namespace:"svgCanvas",id:o,name:e,args:n}),"*")},0),o},window.embedded_svg_edit=r,window.EmbeddedSVGEdit=r}(),define("svg-edit-embed-api",function(){}),define("plugins/svgeditor/view.js",["grasshopperBaseView","jquery","helpers","svg-edit-embed-api"],function(e,t,n){function i(e){a.remove("svgedit-default").done(e.resolve)}function r(){var e=document.getElementById("svgEdit"),t=this.$(e),n=new window.EmbeddedSVGEdit(e),i=t.contents().find("#main_button");this.model.get("value")&&n.setSvgString(this.model.get("value")),this.svgCanvas=n,t.contents().mouseup(this.saveSvg.bind(this)),i.find("#tool_save").hide()}function o(){var e=this;s.call(this).done(function(t){e.model.set("value",t)}).fail()}function s(){var e=new t.Deferred;return this.svgCanvas.getSvgString()(function(t,n){return n?void e.reject(n):void e.resolve(t)}),e.promise()}var a=n.localStorage;return e.extend({beforeRender:i,initializeSvgEdit:r,saveSvg:o})}),define("text!plugins/textarea/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        <textarea type="text" data-rv-placeholder="model:type" data-rv-value="model:value" style="max-width: 100%"></textarea>\n        <small class="error" data-rv-show="model:hasError">{{model:errorMessage}}</small>\n    </div>\n</div>'}),define("plugins/textarea/model",["grasshopperModel","resources"],function(e,t){return e.extend({defaults:{resources:t}})}),define("text!plugins/textarea/setupTemplate.html",[],function(){return""}),define("plugins/textarea/config.js",["text!plugins/textarea/template.html","plugins/textarea/model","text!plugins/textarea/setupTemplate.html"],function(e,t,n){return{name:"textareaPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"textarea",defaultValueType:"textarea",dataType:"string",validation:[],value:""},wrapper:!1,template:e,setupTemplate:n}}),define("plugins/textarea/view.js",["grasshopperBaseView"],function(e){return e.extend({})}),define("text!plugins/textbox/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        <input type="text" data-rv-id="model:_id" data-rv-placeholder="model:type" data-rv-value="model:value">\n        <small class="error" data-rv-show="model:hasError" data-rv-text="model:errorMessage"></small>\n    </div>\n</div>'}),define("plugins/textbox/model",["grasshopperModel","resources"],function(e,t){return e.extend({defaults:{resources:t}})}),define("text!plugins/textbox/setupTemplate.html",[],function(){return""}),define("plugins/textbox/config.js",["text!plugins/textbox/template.html","plugins/textbox/model","text!plugins/textbox/setupTemplate.html"],function(e,t,n){return{name:"textBoxPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"textbox",defaultValueType:"text",defaultValue:"",dataType:"string",validation:[],value:""},template:e,setupTemplate:n,wrapper:!1}}),define("plugins/textbox/view.js",["grasshopperBaseView"],function(e){return e.extend({})}),define("plugins",["plugins/boolean/config.js","plugins/boolean/view.js","plugins/checkbox/config.js","plugins/checkbox/view.js","plugins/codeeditor/config.js","plugins/codeeditor/view.js","plugins/contentreference/config.js","plugins/contentreference/view.js","plugins/date/config.js","plugins/date/view.js","plugins/datetime/config.js","plugins/datetime/view.js","plugins/dropdown/config.js","plugins/dropdown/view.js","plugins/editorialwindow/config.js","plugins/editorialwindow/view.js","plugins/embeddedtype/config.js","plugins/embeddedtype/view.js","plugins/filereference/config.js","plugins/filereference/view.js","plugins/keyvalue/config.js","plugins/keyvalue/view.js","plugins/number/config.js","plugins/number/view.js","plugins/password/config.js","plugins/password/view.js","plugins/radio/config.js","plugins/radio/view.js","plugins/readonly/config.js","plugins/readonly/view.js","plugins/richtext/config.js","plugins/richtext/view.js","plugins/slug/config.js","plugins/slug/view.js","plugins/svgeditor/config.js","plugins/svgeditor/view.js","plugins/textarea/config.js","plugins/textarea/view.js","plugins/textbox/config.js","plugins/textbox/view.js"],function(e,t,n,i,r,o,s,a,l,d,c,u,h,f,p,m,v,g,y,b,w,x,T,C,k,_,D,S,M,A,E,F,j,O,N,I,P,R,V,B){return{fields:[{type:"boolean",id:1,config:e,helpText:"boolean Help Text",name:"Boolean",view:t},{type:"checkbox",id:2,config:n,helpText:"Checkbox Help Text",name:"Checkbox",view:i},{type:"codeeditor",id:3,config:r,helpText:"Code Editor Help Text",name:"Code Editor",view:o},{type:"contentreference",id:4,config:s,helpText:"Content Reference Help Text",name:"Content Reference",view:a},{type:"date",id:5,config:l,helpText:"Date Help Text",name:"Date",view:d},{type:"datetime",id:6,config:c,helpText:"DateTime Help Text",name:"Date Time",view:u},{type:"dropdown",id:7,config:h,helpText:"Dropdown Help Text",name:"Dropdown",view:f},{type:"editorialwindow",id:8,config:p,helpText:"Editorial Window Help Text",name:"Editorial Window",view:m},{type:"embeddedtype",id:9,config:v,helpText:"embedded type Help Text",name:"Embedded Type",view:g},{type:"filereference",id:10,config:y,helpText:"File Reference Help Text",name:"File Reference",view:b},{type:"keyvalue",id:11,config:w,helpText:"keyvalue Help Text",name:"Key : Value",view:x},{type:"number",id:12,config:T,helpText:"number Help Text",name:"Number",view:C},{type:"password",id:13,config:k,helpText:"password Help Text",name:"Password",view:_},{type:"radio",id:14,config:D,helpText:"radio Help Text",name:"Radio",view:S},{type:"readonly",id:15,config:M,helpText:"Readonly Help Text",name:"Readonly",view:A},{type:"richtext",id:16,config:E,helpText:"Rich Text Help Text",name:"Rich Text",view:F},{type:"slug",id:17,config:j,helpText:"Slug Help Text",name:"Slug",view:O},{type:"svgeditor",id:18,config:N,helpText:"Svg Editor Help Text",name:"Svg Editor",view:I},{type:"textarea",id:19,config:P,helpText:"TextArea Help Text",name:"TextArea",view:R},{type:"textbox",id:20,config:V,helpText:"TextBox Help Text",name:"TextBox",view:B}]}}),define("pluginWrapperBinders",["underscore","masseuse","plugins","jquery"],function(e,t,n,i){return{fieldtype:{bind:function(){},unbind:function(){this.viewInstance.remove()},routine:function(e,n){var r=this,o=r.model.model.get("ViewModule"),s=r.model.model.get("configModule");r.viewInstance&&(r.model.view.removeChild(this.viewInstance),r.viewInstance.remove()),r.viewInstance=new o(i.extend(!0,{},s,{modelData:{value:t.ProxyProperty("value",n),options:n.get("options"),fieldId:n.get("fieldId")},appendTo:e})),r.viewInstance.start()},publish:!0},"sortable-multi-columns":function(e,t){var n=i(e);n.removeClass().addClass(t?"small-10 columns":"small-11 columns")}}}),define("pluginWrapperViewConfig",["text!views/pluginWrapper/pluginWrapperView.html","pluginWrapperViewModel","appBinders","pluginWrapperBinders","formatters"],function(e,t,n,i,r){return{name:"pluginWrapperView",ModelType:t,appendTo:"#stage",wrapper:!1,template:e,permissions:["admin","editor"],rivetsConfig:{formatters:[r],binders:[n,i]}}}),define("pluginWrapperView",["grasshopperBaseView","pluginWrapperViewConfig","underscore","require","jquery"],function(e,t,n,i,r){function o(e){a.call(this,e)}function s(){c.call(this)}function a(e){var t=this;i(["plugins"],function(i){var r=n.find(i.fields,{type:t.model.get("type")});t.model.set({ViewModule:r.view,configModule:r.config}),e.resolve()})}function l(){u.call(this,void 0)}function d(e,t){this.collection.remove(t.field),f.call(this)}function c(){var e=this.model.get("value"),t=this.model.get("min"),i=0,r=this;if(e&&n.isArray(e)&&!n.isEmpty(e))n.each(e,function(e){u.call(r,e)});else if(e&&n.isArray(e)&&n.isEmpty(e))f.call(this);else if(e||n.isString(e))u.call(this,e);else if(0===t)this.collection.setValuesOnParentFieldsObject(),f.call(this);else for(f.call(this);t>i;)u.call(r),i++}function u(e){var t={value:h.call(this,e),options:this.model.get("options"),fieldId:this.model.get("_id")};this.collection.add(t),g.call(this),f.call(this)}function h(e){var t=this.model.get("defaultValue")||this.model.get("configModule.modelData").value,i={};return n.isUndefined(e)?"object"==typeof t?(r.extend(!0,i,t),i):t:e}function f(){p.call(this),m.call(this),v.call(this)}function p(){this.model.set("showAdditionButton",this.collection.length<this.model.get("max"))}function m(){this.model.set("showSubtractionButton",this.collection.length>this.model.get("min"))}function v(){this.model.set("showSortableButton",this.model.get("max")>1&&this.collection.length>1)}function g(){var e=this.$("#sortableMulti"+this.model.cid);this.model.get("max")>1&&e.sortable({revert:!0,handle:".sortableMultiHandle",axis:"y",start:y.bind(this),stop:w.bind(this,e)})}function y(){this.channels.views.trigger("pluginWrapperSortStart")}function b(){this.channels.views.trigger("pluginWrapperSortStop")}function w(e){var t=[],i={},o=e.children(),s=o.length,a=this;o.each(function(){var e=r(this).children(".sortableMulti").attr("modelid");t.push(a.collection.get(e)),i[r(this).attr("sortIndex")]=this}),n.times(s,function(t){e.append(i["sort"+t])}),this.collection.reset(t),b.call(this)}return e.extend({defaultOptions:t,beforeRender:o,afterRender:s,addField:l,removeField:d})}),define("text!views/nodeTree/template.html",[],function(){return'<div class="nodeTree">\n\n    <div data-rv-id="model.cid | prepend nodeTreeAccordionHeader" class="nodeTreeAccordionHeader">\n        {{model:label | spaceBefore}}\n				<a class="upload-button" data-rv-on-click="view.showUploadDialog"><i class="fa fa-plus"></i></a>\n        <i data-rv-show="model:loading" class="fa fa-refresh fa fa-spin"></i>\n    </div>\n\n    <div class="nodeTreeAccordionContent">\n\n        <div data-rv-each-node="model:children:" data-rv-nodetree="node" class="nodeTreeSubNode"></div>\n\n        <ul data-rv-show="model:content | hasLength" class="no-bullet">\n\n            <li data-rv-each-item="model:content:" class="nodeTreeSubNode" data-rv-filter-by-allowed-types="item">\n\n                <input data-rv-id="item.cid" type="radio" name="selectedContent" class="selectedContentRadio"\n                       data-rv-checked="model:selectedContent" data-rv-value="item:_id" data-rv-hide="model:nodeTreeType | equals file">\n\n                <label data-rv-for="item.cid" class="noMarginBottom">\n\n                    <!--This is for showing content-->\n                    <span data-rv-show="model:nodeTreeType | equals content">\n                        {{item:label}}\n                    </span>\n\n                    <!--This is for showing files-->\n                    <span data-rv-show="model:nodeTreeType | equals file">\n                        <div class="thumbnailContainer">\n                            <img class="th nodeTreeThumbNail left" data-rv-src="item:url" data-rv-alt="item:fileName">\n                        </div>\n\n                        <div id="fileName">\n                            <a>{{item:fileName}}</a>\n                        </div>\n\n                    </span>\n\n                </label>\n\n            </li>\n\n        </ul>\n\n        <div data-rv-hide="model:inSetup">\n            <ul data-rv-hide="model:content | hasLength" class="no-bullet">\n                <li data-rv-show="model:nodeTreeType | equals content">\n                    {{model:resources->nodeTree->emptyFolder->content}}\n                </li>\n                <li data-rv-show="model:nodeTreeType | equals file">\n                    {{model:resources->nodeTree->emptyFolder->files}}\n                </li>\n            </ul>\n        </div>\n\n    </div>\n\n</div>'}),define("nodeTreeViewModel",["grasshopperModel","resources","grasshopperCollection","constants","views/nodeTree/nodeTreeFileDetailModel","views/nodeTree/nodeTreeContentDetailModel","underscore"],function(e,t,n,i,r,o,s){function a(){var t=this;e.prototype.initialize.apply(this,arguments),this.set("children",new(n.extend({url:function(){return i.api.nodesChildren.url.replace(":id",t.get("_id"))}}))),this.set("content",new(n.extend({model:function(e,n){return"file"===t.get("nodeTreeType")?new r(e,n):new o(s.extend(e,{availableTypes:t.get("availableTypes")}),n)},url:function(){return"content"===t.get("nodeTreeType")?i.api.nodesContent.url.replace(":id",t.get("_id")):"file"===t.get("nodeTreeType")?i.api.assets.url.replace(":id",t.get("_id")):void 0}}))),this.set("nodeId",this.get("_id"))}return e.extend({initialize:a,defaults:{resources:t,loading:!1,hasFetchedContent:!1}})}),define("nodeTreeViewBinders",["underscore","jquery"],function(e,t){return{"filter-by-allowed-types":function(n,i){var r=i.get("allowedTypes"),o=i.get("type");e.isEmpty(r)||e.contains(r,o)||t(n).hide()}}}),define("nodeTreeViewConfig",["text!views/nodeTree/template.html","nodeTreeViewModel","nodeTreeViewBinders","appBinders","formatters"],function(e,t,n,i,r){return{name:"nodeTreePlugin",ModelType:t,modelData:{},template:e,events:{},wrapper:!1,listeners:[],rivetsConfig:{formatters:[r],binders:[n,i]}}}),define("assetWorker",["constants","masseuse","jquery","helpers"],function(e,t,n,i){function r(t,i){var r,s=o.get("authToken"),a=new FormData,l=new n.Deferred;return a.append("file",i),r=new XMLHttpRequest,r.upload.addEventListener("progress",function(e){l.notify(e.loaded/e.total*100+"%")},!1),r.open("POST",e.api.assets.url.replace(":id",t)),r.setRequestHeader("Authorization",s),r.setRequestHeader("Accept","*/*"),r.onreadystatechange=function(){4===r.readyState&&(-1===[200,304].indexOf(r.status)?l.reject(r.status):l.resolve(JSON.parse(r.response).message))},r.send(a),l.promise()}var o=i.localStorage;return{postNewAsset:r}}),define("nodeTreeView",["grasshopperBaseView","nodeTreeViewConfig","jquery","constants","resources","underscore","assetWorker"],function(e,t,n,i,r,o,s){function a(e){var t=this.model.get("nodeId"),i=[],a=this;e.stopPropagation(),this.displayModal({header:r.asset.uploadAssetModalMsg,type:"upload",data:{}}).done(function(e){o.each(e.files,function(e){i.push(s.postNewAsset(t,e))}),n.when(i).done(function(){a.model.get("content").fetch()})})}function l(){m.call(this),v.call(this)}function d(){var e=this;this.model.get("hasFetchedContent")||(p.call(this),f.call(this).then(function(){return e.$el.foundation(),p.call(e),e.model.toggle("hasFetchedContent"),!0})),c.call(this)}function c(){this.parent.setSelectedNode(null,this.model.toJSON()),this.model.set("selectedNode",this.model.get("_id"))}function u(e,t){this.parent.setSelectedNode(null,t)}function h(){return this.model.get("children").fetch()}function f(){var e=new n.Deferred;return this.model.get("inSetup")?(e.resolve(),e.promise()):this.model.get("content").fetch().done(e.resolve)}function p(){this.model.toggle("loading")}function m(){var e=this.$el;e.accordion({header:"#nodeTreeAccordionHeader"+this.model.cid,icons:{header:"fa fa-folder",activeHeader:"fa fa-folder-open"},active:!1,collapsible:!0,heightStyle:"content",beforeActivate:d.bind(this)})}function v(){p.call(this),h.call(this).done(p.bind(this))}return e.extend({defaultOptions:t,afterRender:l,setSelectedNode:u,showUploadDialog:a})}),define("pluginWrapperViewCollection",["grasshopperCollection","underscore"],function(e,t){function n(e,t){return new s([],{parentView:e,thisField:t})}function i(e,t){this.parentView=t.parentView,this.thisField=t.thisField,this.on("all",function(e){this.setValuesOnParentFieldsObject(e)})}function r(){var e=this.toJSON(),t=this.thisField.max;1===t&&(e=e[0]),this.parentView.model.set("fields."+this.thisField._id,e)}function o(){var n=e.prototype.toJSON.apply(this);return t.pluck(n,"value")}var s=e.extend({initialize:i,setValuesOnParentFieldsObject:r,toJSON:o,thisField:null,parentView:null});return s.createFromParentView=n,s}),define("appBinders",["jquery","underscore","masseuse","pluginWrapperView","backbone","nodeTreeView","pluginWrapperViewCollection"],function(e,t,n,i,r,o,s){function a(e,n){var i=new o({appendTo:e,modelData:t.extend({},n.attributes,{allowedTypes:this.model.model.get("allowedContentTypes"),selectedContent:new d("selectedContent",this.model.model),inSetup:this.model.model.get("inSetup"),nodeTreeType:this.model.model.get("nodeTreeType"),availableTypes:this.model.model.get("availableTypes")})});this.model.model.get("inSetup")&&i.model.set("selectedNode",new d("options.defaultNode",this.model.model)),this.model.view.addChild(i)}function l(e,t){(13===t.keyCode||"blur"===t.type)&&this.view.adapters[":"].publish(this.model,this.keypath.substring(this.keypath.indexOf(":")+1),e.textContent)}var d=n.ProxyProperty;return{fieldwrapper:{bind:function(){},unbind:function(){this.viewInstance.remove()},routine:function(e){var r=this,o=this.model.view,a=this.model.field;r.viewInstance=new i({modelData:t.extend({},a,{value:n.ProxyProperty("fields."+a._id,o.model)}),collection:s.createFromParentView(o,a),appendTo:e}),r.viewInstance.start()},publish:!0},editable:{routine:function(e,t){this.view.binders.text.call(this,e,t)},bind:function(t){var n=e(t);n.attr("contenteditable")||n.attr("contenteditable",!0),t.addEventListener("keypress",l.bind(this,t),!1),t.addEventListener("blur",l.bind(this,t),!1)},unbind:function(e){e.removeEventListener("keypress",l.bind(this,e),!1),e.removeEventListener("blur",l.bind(this,e),!1)}},nodetree:function(e,t){a.call(this,e,t)},"move-to":function(t,n){var i=e(n);i.append(e(t).contents()),i.foundation()},"stop-propagation":function(t){e(t).on("click",function(e){e.stopPropagation()})},"swap-text-while":function(t,n){var i=e(t);n?(i.attr("oldText")||(i.attr("oldText",i.text()),i.width(i.width())),i.html(i.attr("data-swap-html")||"Saving...")):i.html(i.attr("oldText"))}}}),define("login/options",["text!views/login/template.html","login/model","appBinders"],function(e,t,n){return{name:"loginView",modelData:{},ModelType:t,browserTitle:"Sign In",appendTo:"#stage",wrapper:!1,template:e,rivetsConfig:{binders:[n]}}}),define("loginWorker",["api","jquery","resources","masseuse","helpers"],function(e,t,n,i,r){function o(){var e=this,i=t.Deferred();return s.call(this,this.model.get("username"),this.model.get("password")).done(function(t){a.call(e,t),l.call(e).done(d.bind(e)).fail(c.bind(e))}).fail(function(t){e.throwLoginError(n.api.login.errors[t.status])}).always(i.resolve),i.promise()}function s(t,n){return e.getToken(t,n)}function a(e){"Token"===e.token_type&&v.set("authToken","Basic "+e.access_token)}function l(){return e.authenticateToken(v.get("authToken"))}function d(e){"external"!==e.role?(this.model.clear(),this.app.user.set(e),this.app.router.navigateTrigger("items")):(this.model.clear(),this.app.router.navigateTrigger("logout"))}function c(){this.navigateTrigger("login")}function u(e){var t=this,n=v.get("authToken");n?h.call(this,n,t,e):(t.removeHeader(),e.reject())}function h(t,n,i){this.user.get("_id")?(m.call(n,i),n.headerView||n.startHeader(),i.resolve()):(this.$deferred=i,e.authenticateToken(t).done(f.bind(n)).fail(p.bind(n)))}function f(e){this.user.set(e),this.headerView||this.startHeader(),this.$deferred.resolve()}function p(){this.goLogout(),this.$deferred.reject()}function m(t){var n=this;e.authenticateToken(v.get("authToken")).error(function(){t.reject(),n.goLogout()})}var v=r.localStorage;return{doLogin:o,userIsStillValidUser:u}}),define("login/view",["grasshopperBaseView","login/options","loginWorker","api"],function(e,t,n,i){function r(){return s.call(this),this.model.isValid()&&n.doLogin.call(this).always(s.bind(this)),!1}function o(){s.call(this),i.getGoogleUrl().done(function(e){window.location.href=e}).fail(this.throwLoginError.bind(this))}function s(){this.model.toggle("loggingIn")}function a(e){this.fireErrorModal(e)}return e.extend({defaultOptions:t,login:r,loginWithGoogle:o,throwLoginError:a})}),define("logoutWorker",["helpers","api","jquery"],function(e,t,n){function i(){var e=new n.Deferred;return o.get("authToken")?n.when(r.call(this),o.remove("authToken")).always(this.user.clear.bind(this.user),e.resolve):e.resolve(),e.promise()}function r(){return t.removeAuthToken()}var o=e.localStorage;return{doLogout:i}}),define("text!views/forbidden/forbiddenView.html",[],function(){return'<div class="forbiden_page">\n    <div class="forbidden_sidetext">\n        <h1>Error: Forbidden</h1>\n\n        <h3>You do not have the permission to view this page</h3>\n        <a href="javascript:history.back()">Go back?</a>\n    </div>\n    <div class="forbidden_image"><img\n            src="themes/img/grasshopper_403.59ee16e1.png"></div>\n</div>'}),define("forbiddenViewConfig",["text!views/forbidden/forbiddenView.html","resources","constants"],function(e,t,n){return{name:"forbiddenView",modelData:{},browserTitle:"Forbidden",appendTo:"#stage",wrapper:!1,template:e,events:{},listeners:[],breadcrumbs:[{text:t.home,href:n.internalRoutes.content},{text:t.forbidden,href:n.internalRoutes.forbidden}]}}),define("forbiddenView",["grasshopperBaseView","forbiddenViewConfig"],function(e,t){return e.extend({defaultOptions:t})}),define("text!views/alertBox/alertBoxView.html",[],function(){return'<div class="alertBoxPartial" data-rv-addClass="model:style" style="display: none;">\n    <div class="alertImage"><i class="fa" data-rv-addClass="model:icon"></i></div>\n    <div class="alertHeader">{{model:header}}</div>\n    <div class="alertMessage">{{model:msg | humanize}}</div>\n    <a class="alertClose"  data-rv-on-click="view.closeAlertBox">&times;</a>\n</div>'}),define("alertBoxViewModel",["grasshopperModel","masseuse"],function(e,t){var n=t.ComputedProperty;return e.extend({defaults:{error:"",icon:new n(["style"],function(e){switch(e){case"success":return"fa-check";case"info":return"fa-info";case"error":return"fa-ban";case"warning":return"fa-exclamation-triangle"}})}})}),define("alertBoxViewConfig",["text!views/alertBox/alertBoxView.html","alertBoxViewModel"],function(e,t){return{name:"alertBoxView",ModelType:t,appendTo:"#alertBox",wrapper:!1,template:e,events:{},listeners:[["channels.views","hideAlertBoxes","hideAlertsOnNavigate"]]}}),define("alertBoxView",["grasshopperBaseView","alertBoxViewConfig"],function(e,t){function n(){this.$el.fadeIn(),this.model.get("temporary")&&i.call(this)}function i(){var e=this;setTimeout(function(){e.closeAlertBox()},5e3)}function r(){this.model.get("temporary")||this.closeAlertBox()}function o(){return this.$el.fadeOut("400",this.remove.bind(this)),!1}return e.extend({defaultOptions:t,afterRender:n,hideAlertsOnNavigate:r,closeAlertBox:o})}),define("text!views/modal/modalView.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n        <div id="modalBody">\n            {{model:msg}}\n        </div>\n\n        <div id="buttonContainer" class="row">\n            <div class="right">\n                <button class="button tiny radius noMarginBottom" data-rv-hide="model:hideConfirm"\n                        data-rv-on-click="view.confirmModal">\n                    {{model:resources->confirm}}\n                </button>\n\n                <button class="button tiny radius noMarginBottom" data-rv-hide="model:hideCancel"\n                        data-rv-on-click="view.cancelModal">\n                    {{model:resources->cancel}}\n                </button>\n            </div>\n        </div>\n\n    </div>\n</div>'}),define("modalViewModel",["masseuse","resources","constants"],function(e,t,n){var i=e.MasseuseModel;return i.extend({defaults:{resources:t,constants:n,files:[]}})}),define("modalViewBinders",["jquery","underscore","constants"],function(e,t,n){var i=n.fileExtensionsMap,r=n.imageExtensions;
return{checkfileextension:function(n,o){var s=o?t.last(o.split(".")).toLowerCase():"";t.has(i,s)?(e(n).removeClass("hide").addClass("fileExtension"),e(n).children().addClass(i[s])):t.has(i,s)||-1!==t.indexOf(r,s)||(e(n).removeClass("hide").addClass("fileExtension"),e(n).children().addClass("fa-file-o"))},checkfileextensionbutton:function(n,i){var o=t.last(i.split("."));-1===t.indexOf(r,o)&&e(n).removeClass("hide")}}}),define("modalViewConfig",["text!views/modal/modalView.html","modalViewModel","formatters","modalViewBinders"],function(e,t,n,i){return{name:"modalView",ModelType:t,appendTo:"#modal",wrapper:!1,template:e,events:{"change #uploadFileInput":"handleFileSelect"},rivetsConfig:{formatters:[n],binders:[i],instaUpdate:!0}}}),define("text!views/modal/_imageModalView.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n        <div id="modalBody" class="row">\n            <div data-rv-checkfileextension="model:data" class="hide">\n                <div class="fileExtensionIcon fa"></div>\n            </div>\n            <img data-rv-src="model:data" class="imageContainer">\n            <div class="row collapse imageModalUrl">\n                <input id="imageURL" data-rv-value="model:data" readonly>\n            </div>\n        </div>\n\n        <div id="buttonContainer" class="row">\n            <div class="right">\n                <a data-rv-href="model:data" class="button hide tiny radius noMarginBottom" target="_blank" data-rv-on-click="view.confirmModal" data-rv-checkfileextensionbutton="model:data">\n                    <i class="fa fa-external-link"></i>\n                    {{model:resources->open | spaceBefore}}\n                </a>\n\n                <a download data-rv-href="model:data" class="button tiny radius noMarginBottom" data-rv-on-click="view.confirmModal">\n                    <i class="fa fa-download"></i>\n                    {{model:resources->download | spaceBefore}}\n                </a>\n\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.cancelModal">\n                    {{model:resources->close}}\n                </button>\n            </div>\n        </div>\n\n    </div>\n</div>\n\n\n'}),define("text!views/modal/_inputModalView.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n        <div id="modalBody" class="row">\n            <input type="text" class="noMarginBottom" data-rv-value="model:data" data-rv-on-enter-key-press="confirmModal"/>\n        </div>\n\n        <div id="buttonContainer" class="row">\n            <div class="right">\n                <button class="button tiny radius noMarginBottom" data-rv-enabled="model:data | hasLength"  data-rv-on-click="view.confirmModal">\n                    {{model:resources->save}}\n                </button>\n\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.cancelModal">\n                    {{model:resources->cancel}}\n                </button>\n            </div>\n        </div>\n\n    </div>\n</div>'}),define("text!views/modal/_checkboxModalView.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n        <div id="modalBody" class="row">\n\n            <div class="small-12 columns inputContainer">\n\n                <div class="row" data-rv-each-type="model:data">\n\n                    <div class="small-12 columns">\n\n                        <input data-rv-id="type._id" type="checkbox" data-rv-checked="type.checked">\n\n                        <label class="inline" data-rv-for="type._id">\n                            <span data-rv-unless="type.helpText">\n                                {{type.label}}\n                            </span>\n\n                            <span data-rv-if="type.helpText" data-tooltip class="has-tip" data-rv-title="type.helpText">\n                                {{type.label}}\n                            </span>\n                        </label>\n\n                    </div>\n\n                </div>\n\n            </div>\n\n        </div>\n\n        <div id="buttonContainer" class="row">\n            <div class="right">\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.confirmModal">\n                    {{model:resources->confirm}}\n                </button>\n\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.cancelModal">\n                    {{model:resources->cancel}}\n                </button>\n            </div>\n        </div>\n\n    </div>\n</div>'}),define("text!views/modal/_uploadModalView.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n        <div id="modalBody">\n\n            <div id="dropZone"\n                 data-rv-on-click="view.fireClickOnUploadFileInput"\n                 data-rv-on-dragover="view.handleDragOver"\n                 data-rv-on-drop="view.handleFileDrop"\n                 data-rv-on-dragleave="view.handleDragLeave">\n\n                {{model:resources->asset->dragFilesHere}}\n            </div>\n\n            <input type="file" id="uploadFileInput" name="files" multiple="multiple"/>\n\n            <div class="row">\n                <div class="left small-12">\n                    <span data-rv-show="model:files">Selected Files:</span>\n\n                </div>\n                <hr/>\n            </div>\n\n            <ol class="noMarginBottom">\n                <li data-rv-each-file="model:files">{{file.name | withColon}}{{file.size | prettyFileSize |\n                    withColon}}{{file.type}}\n                </li>\n            </ol>\n        </div>\n\n        <div id="buttonContainer" class="row">\n            <div class="right">\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.confirmModal">\n                    {{model:resources->confirm}}\n                </button>\n\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.cancelModal">\n                    {{model:resources->cancel}}\n                </button>\n            </div>\n        </div>\n\n    </div>\n</div>'}),define("text!views/modal/_radioModalView.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n        <div id="modalBody" class="row">\n\n            <div class="small-12 columns inputContainer">\n\n                <div class="row" data-rv-each-type="model:data">\n\n                    <div class="small-12 columns">\n\n                        <input data-rv-id="type._id" name="radio" type="radio" data-rv-value="type._id"\n                               data-rv-checked="model:selectedType">\n\n                        <label class="inline" data-rv-for="type._id">\n                            <span data-rv-unless="type.helpText">\n                                {{type.label}}\n                            </span>\n\n                            <span data-rv-if="type.helpText" data-tooltip class="has-tip" data-rv-title="type.helpText">\n                                {{type.label}}\n                            </span>\n                        </label>\n\n                    </div>\n\n                </div>\n\n            </div>\n\n        </div>\n\n        <div id="buttonContainer" class="row">\n            <div class="right">\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.confirmModal">\n                    {{model:resources->select}}\n                </button>\n\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.cancelModal">\n                    {{model:resources->cancel}}\n                </button>\n            </div>\n        </div>\n\n    </div>\n</div>'}),define("text!views/modal/_listModalView.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n        <div id="modalBody" class="row inputContainer">\n            <div class="small-4 columns small-centered">\n                <div class="row">\n                    <ol>\n                        <li data-rv-each-item="model:data">\n                            {{item}}\n                        </li>\n                    </ol>\n                </div>\n            </div>\n        </div>\n\n        <div id="buttonContainer" class="row">\n            <div class="right">\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.confirmModal">\n                    {{model:resources->confirm}}\n                </button>\n\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.cancelModal">\n                    {{model:resources->cancel}}\n                </button>\n            </div>\n        </div>\n\n    </div>\n</div>\n\n'}),define("text!views/modal/_errorModalView.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n        <div id="modalBody">\n            {{model:msg}}\n        </div>\n\n        <div id="buttonContainer" class="row">\n            <div class="right">\n                <button class="button tiny radius alert noMarginBottom" data-rv-on-click="view.confirmModal">{{model:resources->ok}}</button>\n            </div>\n        </div>\n\n    </div>\n</div>'}),define("modalView",["grasshopperBaseView","modalViewConfig","underscore","jquery","text!views/modal/_imageModalView.html","text!views/modal/_inputModalView.html","text!views/modal/_checkboxModalView.html","text!views/modal/_uploadModalView.html","text!views/modal/modalView.html","text!views/modal/_radioModalView.html","text!views/modal/_listModalView.html","text!views/modal/_errorModalView.html"],function(e,t,n,i,r,o,s,a,l,d,c,u){function h(t){switch(t.type){case"image":t.template=r;break;case"input":t.template=o;break;case"checkbox":t.template=s;break;case"upload":t.template=a;break;case"radio":t.template=d;break;case"list":t.template=c;break;case"error":t.template=u;break;default:t.template=l}this.options=t,e.prototype.initialize.apply(this,arguments)}function f(){this.$el.foundation(),this.options&&"input"==this.options.type&&i("input",this.$el).focus()}function p(e){e.stopPropagation(),e.preventDefault(),document.querySelector("#uploadFileInput").click()}function m(e){var t=n.clone(this.model.attributes.files);n.each(e.target.files,function(e){t.push(e)}),g.call(this,t)}function v(e){e.stopPropagation(),e.preventDefault(),this.handleDragLeave(e);var t=n.clone(this.model.attributes.files);n.each(e.originalEvent.dataTransfer.files,function(e){t.push(e)}),g.call(this,t)}function g(e){this.model.set("files",e)}function y(e){e.stopPropagation(),e.preventDefault(),"active"!=e.target.className&&e.target.classList.add("active"),e.originalEvent.dataTransfer.dropEffect="copy"}function b(e){e.target.classList.remove("active")}function w(){this.$deferred.resolve(this.model.attributes),T.call(this)}function x(){this.$deferred.reject(),T.call(this)}function T(){this.remove()}return e.extend({defaultOptions:t,initialize:h,afterRender:f,fireClickOnUploadFileInput:p,handleFileSelect:m,handleFileDrop:v,handleDragOver:y,handleDragLeave:b,confirmModal:w,cancelModal:x})}),define("text!views/userDetail/template.html",[],function(){return'<div id="userDetail" class="row">\n    <div class="large-12 small-centered columns">\n        <fieldset>\n            <legend>\n                {{model:resources->user->userDetailHeaderText}}{{model:firstname | spaceAfter}}{{model:lastname}}\n            </legend>\n\n            <div class="row">\n\n                <div class="large-12 columns">\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="firstName" class="right inline">{{model:resources->user->attributeTitles->firstName | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="firstName" type="text" data-rv-value="model:firstname"/>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="lastName" class="right inline">{{model:resources->user->attributeTitles->lastName | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="lastName" type="text" data-rv-value="model:lastname"/>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="displayName" class="right inline">{{model:resources->user->attributeTitles->displayName | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="displayName" type="text" data-rv-value="model:displayName"/>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label class="right inline">{{model:resources->user->attributeTitles->enabled | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="enabled" type="radio" value="true"\n                                   data-rv-checked="model:enabled | asBoolean"\n                                   data-rv-enabled="model:userModel->role | equals admin">\n                            <label for="enabled">{{model:resources->yes}}</label>\n\n                            <input id="disabled" type="radio" value="false"\n                                   data-rv-checked="model:enabled | asBoolean"\n                                   data-rv-enabled="model:userModel->role | equals admin">\n                            <label for="disabled">{{model:resources->no}}</label>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="role" class="right inline">{{model:resources->user->attributeTitles->role | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <select id="role" data-rv-enabled="model:userModel->role | equals admin" data-rv-value="model:role | humanize">\n                                <option data-rv-each-role="model:resources->user->roles" data-rv-text="role | humanize"></option>\n                            </select>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="email" class="right inline">{{model:resources->user->attributeTitles->email | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="email" type="text" data-rv-value="model:email"/>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="username" class="right inline">{{model:resources->user->attributeTitles->username | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="username" type="text" data-rv-value="model:identities->basic->username" data-rv-placeholder="model:resources->user->attributeTitles->username"/>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="password" class="right inline">{{model:resources->user->attributeTitles->password | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="password" type="password" data-rv-value="model:identities->basic->password" data-rv-placeholder="model:resources->user->attributeTitles->password"/>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </fieldset>\n\n        <div class="row">\n            <div class="small-12 columns">\n                <ul class="button-group radius right">\n                    <li>\n                        <a data-rv-on-click="view.saveUser | preventDefault" class="button tiny" data-rv-disabled="model:saving" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                            {{model:resources->save}}\n                        </a>\n                    </li>\n\n                    <li>\n                        <a data-rv-on-click="view.saveAndClose | preventDefault" class="button tiny" data-rv-disabled="model:saving" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                            {{model:resources->saveAndClose}}\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n\n    </div>\n\n    <section data-rv-move-to="view.mastheadButtonsSelector">\n        <div class="button-bar">\n            <ul class="button-group radius">\n\n                <li>\n                    <a data-rv-on-click="view.addNewUser" class="button tiny">\n                        {{model:resources->mastheadButtons->addNewUser}}\n                    </a>\n                </li>\n\n            </ul>\n\n            <ul class="button-group radius">\n\n                <li>\n                    <a data-rv-on-click="view.saveUser | preventDefault" class="button tiny" data-rv-disabled="model:saving" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                        {{model:resources->save}}\n                    </a>\n                </li>\n\n                <li>\n                    <a data-rv-on-click="view.saveAndClose | preventDefault" class="button tiny" data-rv-disabled="model:saving" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                        {{model:resources->saveAndClose}}\n                    </a>\n                </li>\n\n            </ul>\n        </div>\n    </section>\n\n</div>\n'}),define("userDetail/model",["grasshopperModel","constants","resources","masseuse","underscore"],function(e,t,n,i,r){function o(){var t=e.prototype.toJSON.apply(this);return r.omit(t,["userIsChangingTheirProfile","saving","userModel","fullname"])}var s=i.ComputedProperty;return e.extend({idAttribute:"_id",defaults:{resources:n,enabled:!0,fullname:new s(["firstname","lastname"],function(e,t){return e+" "+t}),href:new s(["_id"],function(e){return t.internalRoutes.user+"/"+e}),saving:!1,userIsChangingTheirProfile:s(["_id","userModel"],function(e,t){return e&&t&&e===t.get("_id")})},toJSON:o,urlRoot:t.api.users.url,url:function(){return this.has("userModel")&&this.get("_id")===this.get("userModel")._id?t.api.user.url:t.api.users.url+"/"+this.get("_id")}})}),define("userDetail/options",["text!views/userDetail/template.html","userDetail/model","resources","constants","appBinders"],function(e,t,n,i,r){return{name:"userDetail",modelData:{},ModelType:t,browserTitle:"User Details",appendTo:"#stage",wrapper:!1,template:e,breadcrumbs:[{text:n.home,href:i.internalRoutes.content},{text:n.users,href:i.internalRoutes.users}],rivetsConfig:{binders:[r]}}}),define("mixins/handleRowCLick",[],function(){function e(e){e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||2==e.which||this.app.router.navigateTrigger(this.model.get("href"))}return{handleRowClick:e}}),define("userDetail/view",["grasshopperBaseView","userDetail/options","resources","constants","breadcrumbWorker","underscore","mixins/handleRowCLick"],function(e,t,n,i,r,o,s){function a(e){this.model.fetch().done(y.bind(this,e))}function l(){p.call(this)}function d(){this.model.toggle("saving"),u.call(this,{})}function c(){this.model.toggle("saving"),u.call(this,{close:!0})}function u(e){this.model.save().done(m.bind(this,e)).fail(v.bind(this))}function h(){return this.displayModal({header:n.warning,msg:n.user.selfLockWarning})}function f(e){e.stopPropagation(),this.model.toggle("enabled"),this.model.trigger("change:enabled"),this.saveUser()}function p(){var e=this;this.model.on("change:enabled",function(){e.model.get("userIsChangingTheirProfile")&&"false"===e.model.get("enabled").toString()&&h.call(e).fail(function(){e.model.set("enabled",e.model.previous("enabled"))})})}function m(e,t){this.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.user.successfullyUpdated}),e.close?this.app.router.navigateTrigger(i.internalRoutes.users):this.model.toggle("saving"),g.call(this,t)}function v(e){this.model.toggle("saving"),this.fireErrorModal(e.responseJSON.message)}function g(e){this.app.user.get("_id")===e._id&&this.app.user.set(e)}function y(e){r.userBreadcrumb.call(this,e)}function b(){this.app.router.navigateTrigger(i.internalRoutes.addUser)}return e.extend({defaultOptions:t,beforeRender:a,afterRender:l,saveUser:d,saveAndClose:c,toggleEnabled:f,addNewUser:b}).extend(s)}),define("UserModel",["grasshopperModel","masseuse","resources","constants"],function(e,t,n,i){var r=t.ComputedProperty;return e.extend({idAttribute:"_id",defaults:{username:!1,role:!1,enabled:!1,email:!1,loggedIn:new r(["enabled"],function(e){return e}),href:new r(["_id"],function(e){return i.internalRoutes.user+"/"+e})}})}),define("text!views/header/headerView.html",[],function(){return'<div>\n\n    <div id="topbar" class="contain-to-grid sticky">\n        <div id="top-nav">\n            <ul class="pull-right">\n                <li>\n                    <a data-rv-href="model:userModel->href">\n                        <img data-rv-src="model:userModel->email | gravatarUrl 24" class="gravatar-img">\n                        <span data-rv-text="model:resources->user->loggedInAs | spaceAfter"></span>\n                        <span>{{model:userModel->displayName | spaceAfter}}</span>\n                    </a>\n                </li>\n                <li>\n                    <a id="logOutButton" data-rv-href="model:constants->internalRoutes->logout" data-rv-show="model:userModel->loggedIn">\n                        {{model:resources->log_out}}\n                    </a>\n                </li>\n                <li>\n                    <a id="logInButton" data-rv-href="model:constants->internalRoutes->login" data-rv-hide="model:userModel->loggedIn">\n                        {{model:resources->log_in}}\n                    </a>\n                </li>\n            </ul>\n\n        </div>\n    </div>\n\n    <div id="headerbar">\n        <div class="container">\n\n            <div class="row">\n                <div class="large-12 columns">\n                    <a data-rv-href="model:constants->internalRoutes->content" class="brand">{{model:resources->siteName}}</a>\n\n                    <a class="btn-navbar" data-toggle="collapse" data-target=".nav-collapse" data-rv-on-click="view.toogleNavigation">\n                        <i class="fa fa-align-justify"></i>\n                    </a>\n\n                    <div class="nav-collapse">\n                        <ul id="main-nav" class="nav pull-right">\n\n                            <li class="nav-item" data-rv-show="model:userModel->role | includes admin reader editor">\n                                <a id="items" class="nav-item-link" data-rv-href="model:constants->internalRoutes->content">\n                                    <i class="fa fa-th"></i>\n                                    <span>{{model:resources->content}}</span>\n                                </a>\n                            </li>\n\n                            <li class="nav-item" data-rv-show="model:userModel->role | includes admin editor">\n                                <a id="contentTypes" class="nav-item-link" data-rv-href="model:constants->internalRoutes->contentTypes">\n                                    <i class="fa fa-cogs"></i>\n                                    <span>{{model:resources->types}}</span>\n                                </a>\n                            </li>\n\n                            <li class="nav-item" data-rv-show="model:userModel->role | equals admin">\n                                <a id="users" class="nav-item-link" data-rv-href="model:constants->internalRoutes->users">\n                                    <i class="fa fa-user"></i>\n                                    <span>{{model:resources->users}}</span>\n                                </a>\n                            </li>\n\n                            <li class="nav-item"\n                                data-rv-show="model:userModel->role | includes admin reader editor author">\n                                <a id="sysInfo" class="nav-item-link"\n                                   data-rv-href="model:constants->internalRoutes->sysInfo">\n                                    <i class="fa fa-info"></i>\n                                    <span>{{model:resources->sysInfo}}</span>\n                                </a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n                </div>\n            </div>\n\n        </div>\n    </div>\n\n</div>'}),define("headerViewModel",["masseuse","resources","constants"],function(e,t,n){var i=e.MasseuseModel;return i.extend({defaults:{resources:t,constants:n}})}),define("headerViewConfig",["text!views/header/headerView.html","headerViewModel","formatters"],function(e,t,n){return{name:"headerView",modelData:{},ModelType:t,appendTo:"#header",wrapper:!1,template:e,events:{},listeners:[],rivetsConfig:{formatters:[n]}}}),define("headerView",["grasshopperBaseView","headerViewConfig","jquery","constants"],function(e,t,n,i){function r(e){e.preventDefault(),n("#main-nav").slideToggle("fast")}function o(e){var t="#"+e.split("/")[0];switch(t){case i.internalRoutes.user:case i.internalRoutes.users:case i.internalRoutes.addUser:this.setActive("#users");break;case i.internalRoutes.items:case i.internalRoutes.item:this.setActive("#items");break;case i.internalRoutes.contentTypes:this.setActive("#contentTypes");break;case i.internalRoutes.sysInfo:this.setActive("#sysInfo");break;default:this.setActive("#items")}}function s(e){n(".nav-item-link").removeClass("active"),n(e).addClass("active")}return e.extend({defaultOptions:t,toogleNavigation:r,checkHeaderTab:o,setActive:s})}),define("text!views/masthead/mastheadView.html",[],function(){return'<div class="container">\n    <div class="row">\n        <div class="small-12 columns clearfix">\n\n            <div id="breadcrumbs" class="left">\n                <i class="fa fa-file"></i>\n                <span data-rv-breadcrumb="model:breadcrumbs"></span>\n            </div>\n\n            <div class="right" id="mastheadButtons"></div>\n\n        </div>\n    </div>\n</div>'}),define("mastheadViewModel",["grasshopperModel"],function(e){return e.extend({defaults:{}})}),define("mastheadViewBinders",["jquery","underscore"],function(e,t){function n(n,i){var r=e(n);r.empty(),t.each(t.initial(i),function(e){r.append("<a href="+e.href+">"+e.text+" / </a>")}),r.append("<span>"+t.last(i).text+"</span>")}return{breadcrumb:n}}),define("mastheadViewConfig",["text!views/masthead/mastheadView.html","mastheadViewModel","resources","mastheadViewBinders"],function(e,t,n,i){return{name:"mastheadView",modelData:{},ModelType:t,appendTo:"#masthead",wrapper:!1,template:e,listeners:[["channels.views","updateMastheadButtons","setButtons"],["channels.views","updateMastheadBreadcrumbs","setBreadcrumbs"]],defaultBreadcrumbs:[{text:n.home,href:"#"}],defaultMastheadButtons:[{text:n.mastheadButtons.createFolder,href:"#"}],rivetsConfig:{binders:[i]}}}),define("mastheadView",["grasshopperBaseView","mastheadViewConfig","underscore","jquery"],function(e,t,n,i){function r(){this.setBreadcrumbs()}function o(){i("#masthead").scrollToFixed()}function s(e){e&&e.model.has("breadcrumbs")?this.model.set("breadcrumbs",n.flatten(n.clone(e.model.get("breadcrumbs")))):e&&e.breadcrumbs?this.model.set("breadcrumbs",e.breadcrumbs):this.model.set("breadcrumbs",this.defaultBreadcrumbs)}return e.extend({defaultOptions:t,beforeRender:r,afterRender:o,setBreadcrumbs:s})}),define("text!views/userIndex/userIndexView.html",[],function(){return'<div>\n    <div class="row">\n        <div class="small-12 columns">\n            <table width="100%">\n                <thead>\n                <tr>\n                    <th width=\'200\'>{{model:resources->name}}</th>\n                    <th>{{model:resources->login}}</th>\n                    <th>{{model:resources->role}}</th>\n                    <th width=\'200\'>{{model:resources->email}}</th>\n                    <th width=\'200\' style=\'text-align: center\'>{{model:resources->actions}}</th>\n                </tr>\n                </thead>\n                <tbody id="userIndexTable">\n                    <tr data-rv-each-user="model:users:" data-rv-new-user-detail-row="user"></tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n\n    <section data-rv-move-to="view.mastheadButtonsSelector">\n        <ul class="button-group radius right">\n\n            <li>\n                <a data-rv-on-click="view.addNewUser" class="button tiny">\n                    {{model:resources->mastheadButtons->addNewUser}}\n                </a>\n            </li>\n\n        </ul>\n    </section>\n</div>'}),define("userIndexViewModel",["grasshopperModel","resources","constants","grasshopperCollection","userDetail/model"],function(e,t,n,i,r){function o(){e.prototype.initialize.apply(this,arguments),this.set("users",new(i.extend({model:r,url:function(){return n.api.users.url}})))}return e.extend({initialize:o,defaults:{resources:t}})}),define("text!views/userDetail/userDetailRow/template.html",[],function(){return'<td data-rv-on-click="view.handleRowClick">\n    <a data-rv-href="model:href">{{model:firstname | spaceAfter}}\n    {{model:lastname}}</a>\n</td>\n<td data-rv-on-click="view.handleRowClick">{{model:displayName}}</td>\n<td data-rv-on-click="view.handleRowClick">{{model:role | humanize}}</td>\n<td data-rv-on-click="view.handleRowClick">{{model:email}}</td>\n<td align="center" data-rv-on-click="view.handleRowClick">\n    <a data-rv-href="model:href">\n        <i class="fa fa-edit"></i>\n    </a>\n    <a data-rv-show="model:enabled" data-rv-on-click="view.toggleEnabled">\n        <i class="fa fa-unlock"></i>\n    </a>\n    <a data-rv-hide="model:enabled" data-rv-on-click="view.toggleEnabled">\n        <i class="fa fa-lock"></i>\n    </a>\n</td>\n\n'}),define("userDetailRow/options",["userDetail/options","jquery","text!views/userDetail/userDetailRow/template.html"],function(e,t,n){return t.extend(!0,{},e,{template:n})}),define("userDetailRow/view",["userDetail/view","userDetailRow/options"],function(e,t){function n(){}return e.extend({defaultOptions:t,beforeRender:n})
}),define("userIndexViewConfig",["text!views/userIndex/userIndexView.html","userIndexViewModel","resources","constants","userDetailRow/view","appBinders"],function(e,t,n,i,r,o){return{name:"userIndexView",modelData:{},ModelType:t,browserTitle:"Users",appendTo:"#stage",wrapper:!1,template:e,events:{"change #limitDropdown":"changeLimit"},listeners:[],breadcrumbs:[{text:n.home,href:i.internalRoutes.content},{text:n.users,href:i.internalRoutes.users}],rivetsConfig:{binders:[o],childViewBinders:{"user-detail-row":r}},permissions:["admin"]}}),define("userIndexView",["jquery","grasshopperBaseView","userIndexViewConfig","constants"],function(e,t,n,i){function r(e){this.model.get("users").fetch().done(e.resolve)}function o(){this.app.router.navigateTrigger(i.internalRoutes.addUser)}return t.extend({defaultOptions:n,beforeRender:r,addNewUser:o})}),define("text!views/addUser/template.html",[],function(){return'<div id="addUser" class="row">\n    <div class="small-12 columns">\n\n        <fieldset>\n            <legend>\n                <h3>\n                    {{model:resources->user->addNewUser}}\n                </h3>\n            </legend>\n\n            <div class="row">\n                <div class="large-12 small-centered columns">\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="firstName" class="right inline">{{model:resources->user->attributeTitles->firstName | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="firstName" type="text" data-rv-value="model:firstname" data-rv-placeholder="model:resources->user->attributeTitles->firstName"/>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="lastName" class="right inline">{{model:resources->user->attributeTitles->lastName | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="lastName" type="text" data-rv-value="model:lastname" data-rv-placeholder="model:resources->user->attributeTitles->lastName"/>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="displayName" class="right inline">{{model:resources->user->attributeTitles->displayName | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="displayName" type="text" data-rv-value="model:displayName" data-rv-placeholder="model:resources->user->attributeTitles->displayName"/>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="role" class="right inline">{{model:resources->user->attributeTitles->role | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <select id="role" data-rv-value="model:role | humanize">\n                                <option data-rv-each-role="model:resources->user->roles" data-rv-text="role | humanize"></option>\n                            </select>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="email" class="right inline">{{model:resources->user->attributeTitles->email | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="email" type="text" data-rv-value="model:email" data-rv-placeholder="model:resources->user->attributeTitles->email"/>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="username" class="right inline">{{model:resources->user->attributeTitles->username | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="username" type="text" data-rv-value="model:identities->basic->username" data-rv-placeholder="model:resources->user->attributeTitles->username"/>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="password" class="right inline">{{model:resources->user->attributeTitles->password | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="password" type="password" data-rv-value="model:identities->basic->password" data-rv-placeholder="model:resources->user->attributeTitles->password"/>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="large-12 small-centered columns">\n                    <button data-rv-on-click="view.saveUser" class="button tiny radius right">{{model:resources->save}}</button>\n                </div>\n            </div>\n\n        </fieldset>\n\n    </div>\n\n    <section data-rv-move-to="view.mastheadButtonsSelector">\n        <ul class="button-group radius right">\n\n            <li>\n                <a data-rv-on-click="view.addNewUser" class="button tiny">\n                    {{model:resources->mastheadButtons->addNewUser}}\n                </a>\n            </li>\n\n        </ul>\n    </section>\n</div>'}),define("addUser/model",["grasshopperModel","resources","constants"],function(e,t,n){return e.extend({defaults:{resources:t},url:n.api.newUser.url})}),define("addUser/options",["text!views/addUser/template.html","addUser/model","resources","constants","appBinders"],function(e,t,n,i,r){return{name:"addUser",ModelType:t,browserTitle:"Add New User",modelData:{},appendTo:"#stage",wrapper:!1,template:e,events:{},listeners:[],mastheadButtons:[],breadcrumbs:[{text:n.home,href:i.internalRoutes.content},{text:n.users,href:i.internalRoutes.users}],permissions:["admin"],rivetsConfig:{binders:[r]}}}),define("addUser/view",["grasshopperBaseView","addUser/options","resources","breadcrumbWorker"],function(e,t,n,i){function r(e){l.call(this,e)}function o(){this.model.save().success(s.bind(this)).error(a.bind(this))}function s(){this.app.router.navigateTrigger("users"),this.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.user.newUserAdded})}function a(e){this.fireErrorModal(e.responseJSON.message)}function l(e){i.userBreadcrumb.call(this,e,!0)}function d(){this.app.router.displayAddUser()}return e.extend({defaultOptions:t,beforeRender:r,saveUser:o,addNewUser:d})}),define("text!views/contentBrowse/contentBrowseView.html",[],function(){return'<div class="row contentBrowse">\n    <div class="large-12 columns">\n        <dl class="tabs" data-tab>\n            <dd class="active" id="contentTab">\n                <a href="#panel2-1">\n                    <p class="title">\n                        <i class="fa fa-list-alt"></i>\n                        {{model:resources->content | spaceBefore}}\n                    </p>\n                </a>\n            </dd>\n            <dd data-rv-hide="model:inRoot" id="filesTab">\n                <a href="#panel2-2">\n                    <p class="title">\n                        <i class="fa fa-paperclip"></i>\n                        {{model:resources->fileIndex->files | spaceBefore}}\n                    </p>\n                </a>\n            </dd>\n        </dl>\n\n        <div id="contentSearch" data-rv-unless="model:inRoot">\n            <input class="contentSearchInput" type="text" placeholder="Search by content label " data-rv-value="model:contentSearchValue" data-rv-on-keyup="view.searchContent"/>\n            <span class="contentSearchIcon fa fa-search"></span>\n        </div>\n\n        <div class="tabs-content">\n            <div class="content active" id="panel2-1">\n                <div id="table-loading-overlay">\n                    <img class="loading-overlay-image" src="themes/img/loading-spinner-horizontal.gif">\n                </div>\n                <table class="content-table">\n                    <thead>\n                        <tr>\n                            <th>{{model:resources->label}}</th>\n                            <th>{{model:resources->type}}</th>\n                            <th>{{model:resources->contentBrowse->modified}}</th>\n                            <th style="text-align: center; width: 10%;">{{model:resources->actions}}</th>\n                        </tr>\n                    </thead>\n                    <tbody id="contentBrowseTable">\n                        <!--Nodes Come First-->\n                        <tr class="nodeDetailRow" data-rv-each-node="model:childNodes:" data-rv-new-node-detail-row="node"></tr>\n\n                        <!--Then Content-->\n                        <tr data-rv-unless="model:childContent.length | greaterThan 0">\n                            <td colspan="4" data-rv-unless="model:inRoot">\n                                {{model:resources->node->emptyContent}}\n                                <span>\n                                    <a data-rv-on-click="view.createContent">\n                                        {{model:resources->node->clickToAdd}}\n                                    </a>\n                                </span>\n                            </td>\n                        </tr>\n                        <tr class="contentDetailRow" data-rv-each-content="model:childContent.models" data-rv-new-content-detail-row="content"></tr>\n                    </tbody>\n                </table>\n\n                <section data-rv-if="model:childContent.total | isGreaterThan 25" data-rv-new-pagination-view="model:childContent"></section>\n\n            </div>\n            <div class="content" id="panel2-2" data-rv-hide="model:inRoot">\n                <div id="assetIndex">\n\n                    <table class="content-table">\n                        <thead>\n                            <tr>\n                                <th>{{model:resources->fileIndex->fileName}}</th>\n                                <th>{{model:resources->fileIndex->size}}</th>\n                                <th>{{model:resources->fileIndex->modified}}</th>\n                                <th style="text-align: center; width: 15%;">{{model:resources->actions}}</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n\n                            <tr data-rv-unless="model:childAssets.length | greaterThan 0">\n                                <td colspan="4">\n                                    {{model:resources->asset->emptyNode}}\n                                    <span>\n                                        <a data-rv-on-click="view.createAssets">\n                                            {{model:resources->asset->clickToAdd}}\n                                        </a>\n                                    </span>\n                                </td>\n                            </tr>\n\n                            <tr class="assetDetailRow" data-rv-new-asset-detail-row="asset" data-rv-each-asset="model:childAssets:"></tr>\n\n                        </tbody>\n                    </table>\n                    <!--Built from assetIndex-->\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <section data-rv-move-to="view.mastheadButtonsSelector">\n        <ul class="button-group radius right">\n\n            <li data-rv-unless="model:inRoot">\n                <a data-rv-on-click="view.createContent" class="button tiny">\n                    {{model:resources->mastheadButtons->createContent}}\n                </a>\n            </li>\n\n            <li data-rv-unless="model:inRoot">\n                <a data-rv-on-click="view.createAssets" class="button tiny">\n                    {{model:resources->mastheadButtons->uploadFile}}\n                </a>\n            </li>\n\n            <li>\n                <a data-rv-on-click="view.createFolder" class="button tiny"\n                   data-rv-show="view.hasCreateFolderPermission">\n                    {{model:resources->mastheadButtons->createFolder}}\n                </a>\n            </li>\n\n            <li data-rv-unless="model:inRoot">\n                <a class="button tiny dropdown" id="actionsDropdown" data-dropdown="drop">\n                    {{model:resources->mastheadButtons->actions}}\n                </a>\n\n                <ul id="drop" class="f-dropdown" data-dropdown-content>\n                    <li data-rv-on-click="view.editNodeName">\n                        <a>\n                            {{model:resources->mastheadButtons->editNodeName}}\n                        </a>\n                    </li>\n\n                    <li data-rv-on-click="view.editNodeContentTypes">\n                        <a>\n                            {{model:resources->mastheadButtons->editNodeContentTypes}}\n                        </a>\n                    </li>\n\n                    <li data-rv-on-click="view.deleteNode">\n                        <a>\n                            {{model:resources->mastheadButtons->deleteNode}}\n                        </a>\n                    </li>\n                </ul>\n            </li>\n\n        </ul>\n    </section>\n</div>\n\n'}),define("paginatedCollection",["grasshopperModel","grasshopperCollection","constants","underscore","jquery","api"],function(e,t,n,i,r,o){function s(e,t,n,i){return n=parseInt(n,10)||1,i=i||!1,i?this.skip=e>=1&&n>=e?e:1:this.skip+=this.skip+e>=1&&this.skip+e<=n?e:0,this.query(t)}function a(e,t){return this.limit=parseInt(e,10)?e:n.pagination.defaultAllLimit,this.query(t)}function l(e){this.skip=i.isUndefined(this.contentSearchValue)||this.contentSearchValue==e?this.skip:n.pagination.defaultSkip,this.contentSearchValue=e||"",this.limit=parseInt(this.limit,10)?this.limit:n.pagination.defaultAllLimit;var t=new r.Deferred,s={filters:[{key:"virtual.label",cmp:"%",value:e||""}],nodes:[this.nodeId],options:{limit:parseInt(this.limit,10),skip:(parseInt(this.skip,10)-1)*this.limit}};return r("#panel2-1").addClass("spinner-loading"),o.makeQuery(s).done(function(e){this.reset(e.results),this.total=e.total,this.skip=parseInt(this.skip,10),this.trigger("paginatedCollection:query"),r("#panel2-1").removeClass("spinner-loading"),t.resolve()}.bind(this)),t.promise()}return t.extend({model:e,nodeId:"",query:l,searchQuery:i.throttle(l,n.contentSearchThrottle),doSkip:s,setLimit:a,total:0})}),define("nodeDetailViewModel",["grasshopperModel","resources","masseuse","constants"],function(e,t,n,i){var r=n.ComputedProperty;return e.extend({idAttribute:"_id",defaults:{resources:t,href:new r(["_id"],function(e){return i.internalRoutes.nodeDetail.replace(":id",e)})},urlRoot:i.api.node.url})}),define("contentDetailViewModel",["grasshopperModel","resources","constants","masseuse","helpers","underscore","jquery","backbone"],function(e,t,n,i,r,o,s,a){function l(){var e=a.Model.prototype.toJSON.apply(this);return f(s.extend(!0,{},o.pick(e,["fields","meta","_id"])))}function d(e,t){return t.smartParse===!0?void c(e,this,""):t.parse===!1?o.omit(e,["fields"]):e}function c(e,t,n){var i,r,s;for(i in e)r=e[i],s=n.length>0?n+"."+i:i,o.isObject(r)?c(r,t,s):t.set(s,r)}function u(){this.get("isNew")?this.set("label",t.newWord+" "+this.get("schema.label")):this.set("label",this.get("fields."+this.get("meta.labelfield")))}var h=i.ComputedProperty,f=r.cleanCollection;return e.extend({idAttribute:"_id",defaults:function(){return{resources:t,href:new h(["_id"],function(e){return n.internalRoutes.contentDetail.replace(":id",e)}),label:"",fields:{},saving:!1}},urlRoot:n.api.content.url,toJSON:l,parse:d,resetContentLabel:u})}),define("contentBrowseViewModel",["grasshopperModel","resources","constants","grasshopperCollection","paginatedCollection","nodeDetailViewModel","contentDetailViewModel","assetDetailViewModel","underscore"],function(e,t,n,i,r,o,s,a,l){function d(){var e=this;this.set("childNodes",new(i.extend({model:o,url:function(){return n.api.nodesChildren.url.replace(":id",e.get("nodeId"))}}))),this.set("childContent",new(r.extend({model:s,url:function(){return n.api.nodesContent.url.replace(":id",e.get("nodeId"))},limit:parseInt(this.get("limit")||n.pagination.defaultLimit,10),skip:parseInt(this.get("skip")||n.pagination.defaultSkip,10),nodeId:this.get("nodeId")}))),this.set("childAssets",new(i.extend({model:function(t,n){return new a(l.extend(t,{nodeId:e.get("nodeId")}),n)},url:function(){return n.api.assets.url.replace(":id",e.get("nodeId"))}})))}return e.extend({initialize:d,idAttribute:"nodeId",defaults:{resources:t,constants:n},urlRoot:n.api.node.url})}),define("text!views/nodeDetail/nodeDetailView.html",[],function(){return'<td data-rv-on-click="view.handleRowClick"><i class="fa fa-folder"></i> <a data-rv-href="model:href">{{model:label |\n    spaceBefore}}</a></td>\n<td data-rv-on-click="view.handleRowClick">--</td>\n<td data-rv-on-click="view.handleRowClick">{{model:modified | existsOr --}}</td>\n<td data-rv-on-click="view.handleRowClick" align="center">\n    <a data-rv-on-click="view.editNodeName"><i class="fa fa-edit"></i></a>\n    <a data-rv-on-click="view.prepareToEditContentTypes"><i class="fa fa-tasks"></i></a>\n    <a data-rv-on-click="view.prepareToDeleteNode"><i class="fa fa-trash-o"></i></a>\n</td>'}),define("nodeDetailViewConfig",["text!views/nodeDetail/nodeDetailView.html","nodeDetailViewModel"],function(e,t){return{name:"nodeDetailView",ModelType:t,appendTo:"#stage",wrapper:!1,template:e,permissions:["admin","reader","editor"]}}),define("nodeWorker",["api","jquery","resources","contentTypeWorker","underscore","constants"],function(e,t,n,i,r,o){function s(n){var i=new t.Deferred;return e.getNodesChildren(n).done(i.resolve).fail(i.reject),i.promise()}function a(){var e=this,n=new t.Deferred;return t.when(c.call(this),this.model.fetch()).then(function(t){e.model.set("label",t.data),u.call(e).done(n.resolve)}),n.promise()}function l(){p.call(this).then(m.bind(this)).then(v.bind(this))}function d(){b.call(this).done(w.bind(this))}function c(){return this.displayModal({header:n.node.editName,type:"input",data:this.model.get("label")})}function u(){var e=new t.Deferred;return this.model.save().done(h.bind(this,e)).fail(f.bind(this,e)),e.promise()}function h(e){this.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.node.successfullyUpdated}),e.resolve()}function f(e){this.fireErrorModal(n.node.errorUpdated),e.reject()}function p(){return i.getAvailableContentTypes(this.model.get("allowedTypes"))}function m(e){return this.displayModal({header:n.contentType.editContentTypes,type:"checkbox",data:e})}function v(e){var t=r.where(e.data,{checked:!0}),n=r.map(t,function(e){return r.pick(e,"label","helpText","_id")});this.model.set("allowedTypes",n),this.model.save().done(g.bind(this)).fail(y.bind(this))}function g(){this.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.contentType.contentTypeAdded})}function y(e){this.fireErrorModal(e)}function b(){return this.displayModal({header:n.warning,msg:n.node.deletionWarning})}function w(){var e=this;this.model.fetch().then(function(){e.model.destroy().done(x.bind(e)).fail(T.bind(e))})}function x(){C.call(this),this.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.node.successfullyDeletedPre+this.model.get("label")+n.node.successfullyDeletedPost})}function T(){this.fireErrorModal(n.node.errorDeleted+this.model.get("label"))}function C(){var e=this.model.get("parent");this.app.router.navigateTrigger(e&&e._id?o.internalRoutes.nodeDetail.replace(":id",e._id):o.internalRoutes.content)}return{getNodeForTree:s,editName:a,editContentTypes:l,deleteNode:d}}),define("mixins/handleRowClick",[],function(){function e(e){e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||2==e.which||this.app.router.navigateTrigger(this.model.get("href"))}return{handleRowClick:e}}),define("nodeDetailView",["grasshopperBaseView","nodeDetailViewConfig","nodeWorker","mixins/handleRowClick"],function(e,t,n,i){function r(){this.model.isNew()&&this.model.save().done(l.bind(this))}function o(e){e.stopPropagation(),n.deleteNode.call(this)}function s(e){e.stopPropagation(),n.editName.call(this)}function a(e){e.stopPropagation(),this.editContentTypes()}function l(){n.editContentTypes.call(this)}return e.extend({defaultOptions:t,afterRender:r,prepareToDeleteNode:o,prepareToEditContentTypes:a,editNodeName:s,editContentTypes:l}).extend(i)}),define("text!views/contentDetail/contentDetailView.html",[],function(){return'<div id="contentEdit">\n    <div class="row">\n        <div class="large-12 columns">\n            <fieldset>\n                <legend class="legendLabel">{{model:label}}</legend>\n\n                <div data-rv-each-field="model:schema->fields">\n                    <div data-rv-fieldwrapper="field"></div>\n                </div>\n\n            </fieldset>\n        </div>\n    </div>\n\n    <div class="row">\n        <div class="large-12 small-centered columns">\n            <ul class="button-group radius right">\n                <li>\n                    <a class="button tiny" data-rv-on-click="view.saveContent | preventDefault" data-rv-disabled="model:saving" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                        {{model:resources->save}}\n                    </a>\n                </li>\n\n                <li>\n                    <a class="button tiny" data-rv-on-click="view.saveAndClose | preventDefault" data-rv-disabled="model:saving" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                        {{model:resources->saveAndClose}}\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n\n\n    <section data-rv-move-to="view.mastheadButtonsSelector">\n        <ul class="button-group radius right">\n\n            <li>\n                <a class="button tiny" data-rv-on-click="view.saveContent | preventDefault" data-rv-disabled="model:saving" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                    {{model:resources->save}}\n                </a>\n            </li>\n\n            <li>\n                <a class="button tiny" data-rv-on-click="view.saveAndClose | preventDefault" data-rv-disabled="model:saving" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                    {{model:resources->saveAndClose}}\n                </a>\n            </li>\n\n        </ul>\n    </section>\n</div>'}),define("text!views/contentDetail/_contentDetailRow.html",[],function(){return'<tr>\n    <td data-rv-on-click="view.handleRowClick"><a data-rv-href="model:href">{{model:label}}</a></td>\n    <td data-rv-on-click="view.handleRowClick">{{model:meta->typelabel}}</td>\n    <td data-rv-on-click="view.handleRowClick">{{model:meta->lastmodified | prettyDate | existsOr --}}</td>\n    <td data-rv-on-click="view.handleRowClick" align="center" ><a data-rv-on-click="view.deleteContent"><i class="fa fa-trash-o"></i></a></td>\n</tr>'}),define("contentDetailViewConfig",["text!views/contentDetail/contentDetailView.html","text!views/contentDetail/_contentDetailRow.html","contentDetailViewModel","appBinders","resources","constants"],function(e,t,n,i,r,o){return{name:"contentDetail",ModelType:n,browserTitle:"Content",modelData:{},appendTo:"#stage",wrapper:!1,template:e,events:{},listeners:[],breadcrumbs:[{text:r.home,href:o.internalRoutes.content}],permissions:["admin","reader","editor"],rivetsConfig:{binders:[i]}}}),define("contentDetailView",["grasshopperBaseView","contentDetailViewConfig","resources","jquery","api","breadcrumbWorker","constants","mixins/handleRowClick"],function(e,t,n,i,r,o,s,a){function l(e){this.model.get("isNew")?S.call(this,e):d.call(this,e)}function d(e){"contentDetailRow"===this.name?u.call(this,e):c.call(this,e)}function c(e){_.call(this).done(S.bind(this,e)).fail(D.bind(this,e))}function u(e){this.model.resetContentLabel.call(this.model),e.resolve()}function h(){this.$el.foundation(),F.call(this)}function f(e){e.stopPropagation(),p.call(this).then(m.bind(this))}function p(){return this.displayModal({header:n.warning,msg:n.contentItem.deletionWarning})}function m(){this.model.destroy({success:g.bind(this),error:v.bind(this)})}function v(e){this.fireErrorModal(n.contentItem.errorDeleted+e.get("label"))}function g(e){this.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.contentItem.successfullyDeletedPre+e.get("label")+n.contentItem.successfullyDeletedPost})}function y(){w.call(this,{})}function b(){w.call(this,{close:!0})}function w(e){this.model.toggle("saving"),this.model.save({smartParse:!0}).done(x.bind(this,e)).fail(C.bind(this))}function x(e){this.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.contentItem.successfullySaved}),T.call(this),e.close?this.app.router.navigateTrigger(s.internalRoutes.nodeDetail.replace(":id",this.model.get("meta.node"))):(this.model.toggle("saving"),this.app.router.navigateNinja(s.internalRoutes.contentDetail.replace(":id",this.model.get("_id"))),o.resetBreadcrumb.call(this),this.model.resetContentLabel(),E.call(this))}function T(){this.model.get("isNew")&&this.model.set("isNew",!1)}function C(e){this.model.toggle("saving"),this.fireErrorModal(k(e))}function k(e){return e.responseJSON.message?e.responseJSON.message:n.contentItem.failedToSave}function _(){return this.model.fetch()}function D(e){this.fireErrorModal(n.contentItem.failedToFetch),e.reject()}function S(e){r.getContentType(this.model.get("meta.type")).done(M.bind(this,e)).fail(A.bind(this,e))}function M(e,t){this.model.set("schema",t),this.model.resetContentLabel(),E.call(this,e)}function A(e){this.fireErrorModal(n.contentItem.failedToFetchContentsContentType),e.reject()}function E(e){o.contentBreadcrumb.call(this,e)}function F(){var e=this;this.model.on("change:fields",function(){e.channels.views.trigger("contentFieldsChange",e.model.get("fields"))})}return e.extend({defaultOptions:t,beforeRender:l,afterRender:h,deleteContent:f,saveContent:y,saveAndClose:b}).extend(a)}),define("text!views/contentDetail/contentDetailRow/template.html",[],function(){return'<td data-rv-on-click="view.handleRowClick"><a data-rv-href="model:href">{{model:label}}</a></td>\n<td data-rv-on-click="view.handleRowClick">{{model:meta->typelabel}}</td>\n<td data-rv-on-click="view.handleRowClick">{{model:meta->lastmodified | prettyDate | existsOr --}}</td>\n<td data-rv-on-click="view.handleRowClick" align="center" ><a data-rv-on-click="view.deleteContent"><i class="fa fa-trash-o"></i></a></td>'}),define("contentDetailRowViewConfig",["text!views/contentDetail/contentDetailRow/template.html","contentDetailViewModel"],function(e,t){return{name:"contentDetailRow",ModelType:t,wrapper:!1,template:e,permissions:["admin","reader","editor"]}}),define("contentDetailRowView",["contentDetailView","contentDetailRowViewConfig"],function(e,t){return e.extend({defaultOptions:t})}),define("text!views/assetDetail/assetDetailView.html",[],function(){return'<td data-rv-on-click="view.handleRowClick"><a>{{model:fileName}}</a></td>\n<td data-rv-on-click="view.handleRowClick">{{model:size | prettyFileSize}}</td>\n<td data-rv-hide="model:fileData" data-rv-on-click="view.handleRowClick">{{model:lastmodified | prettyDate}}</td>\n<td data-rv-hide="model:fileData" align="center" data-rv-on-click="view.handleRowClick">\n    <a data-rv-on-click="view.editAsset">\n        <i class="fa fa-edit"></i>\n    </a>\n    <a data-rv-href="model:url" download data-rv-stop-propagation>\n        <i class="fa fa-download"></i>\n    </a>\n    <a data-rv-on-click="view.prepareToDeleteAsset">\n        <i class="fa fa-trash-o"></i>\n    </a>\n</td>\n\n\n<td data-rv-hide="model:uploadError" data-rv-show="model:fileData" colspan="2">\n    <div class="progress">\n        <span id="uploadProgressMeter" class="meter" data-rv-width="model:progressWidth"></span>\n    </div>\n</td>\n\n<td data-rv-show="model:uploadError" align="left">\n    {{model:resources->asset->uploadAssetError | spaceAfter}}\n</td>\n\n<td data-rv-show="model:uploadError" id="uploadError">\n\n    <ul class="button-group radius" style="display: inline-block;">\n        <li>\n            <a data-rv-on-click="view.postNewAsset" class="button alert tiny">\n                {{model:resources->retry}}\n            </a>\n        </li>\n        <li>\n            <a data-rv-on-click="view.cancelUpload" class="button alert tiny">\n                {{model:resources->cancel}}\n            </a>\n        </li>\n    </ul>\n\n</td>'}),define("assetDetailViewConfig",["text!views/assetDetail/assetDetailView.html","assetDetailViewModel"],function(e,t){return{name:"assetDetailView",ModelType:t,appendTo:"#stage",wrapper:!1,template:e}}),define("assetDetailView",["grasshopperBaseView","assetDetailViewConfig","resources","api","assetWorker"],function(e,t,n,i,r){function o(){this.model.has("fileData")&&d.call(this)}function s(e){e.stopPropagation(),this.displayModal({header:this.model.get("fileName"),type:"image",data:this.model.get("url")})}function a(e){e.stopPropagation(),this.displayModal({header:n.warning,msg:n.asset.deletionWarning}).done(u.bind(this))}function l(e){var t=this;e.stopPropagation(),p.call(this).done(function(e){m.call(t,e.data).done(v.bind(t,e.data)).fail(g.bind(this))})}function d(){r.postNewAsset(this.model.get("nodeId"),this.model.get("fileData")).done(b.bind(this)).fail(w.bind(this)).progress(y.bind(this))}function c(){this.remove()}function u(){this.model.destroy().done(h.bind(this)).fail(f.bind(this))}function h(){this.displayTemporaryAlertBox({header:n.success,msg:n.asset.successfullyDeletedPre+this.model.get("fileName")+n.asset.successfullyDeletedPost,style:"success"})}function f(){this.fireErrorModal(n.asset.errorDeleted+this.model.get("fileName"))}function p(){return this.displayModal({msg:n.asset.editFileName,type:"input",data:this.model.get("fileName")})}function m(e){return i.renameAsset(this.model.urlRoot(),this.model.get("fileName"),e)}function v(e){var t=this;this.model.set("fileName",e),this.model.fetch().done(function(){t.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.asset.editNameSuccess})})}function g(){this.fireErrorModal(n.asset.editNameFail)}function y(e){this.model.set("progressWidth",e)}function b(e){var t=this;this.model.fetch().done(function(){t.model.unset("fileData")}),this.displayTemporaryAlertBox({header:n.success,style:"success",msg:e})}function w(){this.model.set("uploadError",!0),y.call(this,0),this.fireErrorModal(n.asset.uploadAssetError)}return e.extend({defaultOptions:t,afterRender:o,handleRowClick:s,prepareToDeleteAsset:a,editAsset:l,cancelUpload:c})}),define("text!views/pagination/template.html",[],function(){return'<div id="paginator">\n    <ul class="pagination pagination-limit">\n        <li class="pagination-item" data-rv-each-size="model:constants->pagination->defaultPageSize">\n            <a class="pagination-item-link" data-rv-on-click="view.setLimit" data-rv-text="size"></a>\n        </li>\n    </ul>\n    <ul class="pagination pagination-skip">\n        <li class="pagination-item">\n            <a class="pagination-item-link" data-rv-on-click="view.prev">&lt;prev</a>\n        </li>\n        <li class="pagination-item" data-rv-each-number="model:pageNumbers">\n            <a class="pagination-item-link" data-rv-if="number.isVisible" data-rv-on-click="view.goToPage">..</a>\n            <a class="pagination-item-link" data-rv-unless="number.isShowDot" data-rv-addClass="number.isCurrent" data-rv-on-click="view.goToPage" data-rv-text="number.linkTo"></a>\n        </li>\n        <li class="pagination-item">\n            <a class="pagination-item-link" data-rv-on-click="view.next">next&gt;</a>\n        </li>\n    </ul>\n</div>'
}),define("pagination/model",["masseuse","resources","constants"],function(e,t,n){function i(e,t,n){for(var i=0,s=[];t>i;)s.push({isShowDot:n?!1:r(e-1,i,t-1),linkTo:i+1,isCurrent:e-1===i?"active":"",isVisible:n?!1:r(e-1,i,t-1)&&o(e-1,i,t-1)}),i+=1;return s}function r(e,t,n){switch(!0){case 0===e&&(e+1===t||e+2===t):return!1;case e===n&&(e-1===t||e-2===t):return!1;case e===t||e+1===t||e-1===t||0===t||t===n:return!1;default:return!0}}function o(e,t,n){switch(!0){case 0===e&&(e+1===t||e+2===t||e+3===t):return!0;case e===n&&(e-1===t||e-2===t||e-3===t):return!0;case e===t||e+1===t||e+2===t||e-1===t||e-2===t||0===t||t===n:return!0;default:return!1}}var s=e.MasseuseModel;return s.extend({defaults:{constants:n,resources:t,pageNumbers:e.ComputedProperty(["limit","total","currentPage"],function(e,t,r){var o=t%e===0?t/e:parseInt(t/e,10)+1,s=[];return s=o<n.pagination.defaultPagesLimit?i(r,o,!0):i(r,o)},!0)}})}),define("pagination/options",["text!views/pagination/template.html","pagination/model"],function(e,t){return{name:"paginationView",modelData:{},ModelType:t,wrapper:!1,template:e,events:{},listeners:[]}}),define("paginationWorker",["constants"],function(e){function t(t,n,i){var r=this.app.router.getCurrentBreadcrumb();t=t===e.pagination.defaultAllLimit?"all":t,-1!==r.indexOf("/limit")&&(r=r.slice(0,r.indexOf("/limit"))),r+=i?"/limit/"+t+"/skip/"+n+"/query/"+i:"/limit/"+t+"/skip/"+n,this.app.router.navigateNinja(r)}return{setUrl:t}}),define("pagination/view",["grasshopperBaseView","pagination/options","paginationWorker","constants","jquery"],function(e,t,n,i,r){function o(){f.call(this),s.call(this),a.call(this),this.listenTo(this.collection,"paginatedCollection:query",s.bind(this)),this.listenTo(this.collection,"paginatedCollection:query",f.bind(this))}function s(){this.model.set({limit:this.collection.limit,total:this.collection.total,currentPage:this.collection.skip},!0)}function a(){this.collection.limit>this.collection.total||"all"===this.collection.total?r(".pagination-skip").addClass("hidden"):r(".pagination-skip").removeClass("hidden")}function l(e,t){e.preventDefault();var r=this.model.get("contentSearchValue");this.model.set("limit",t.size),this.collection.skip=i.pagination.defaultSkip,this.collection.setLimit(t.size,r).done(n.setUrl.bind(this,t.size,this.collection.skip,r),a.call(this),f(e))}function d(e,t){e.preventDefault(),h.call(this,t.number.linkTo,!0)}function c(e){e.preventDefault();var t=this.collection.total,n=this.collection.limit,i=t%n===0?t/n:parseInt(t/n,10)+1;this.collection.skip+1>i?!1:h.call(this,1)}function u(e){e.preventDefault(),this.collection.skip-1<=0?!1:h.call(this,-1)}function h(e,t){var i=this.collection.contentSearchValue,r=this.model.get("pageNumbers").length;t=t||!1,this.collection.doSkip(e,i,r,t).done(this.model.set("currentPage",this.collection.skip),n.setUrl.bind(this,this.collection.limit,this.collection.skip,i))}function f(e){var t=r(".pagination-limit");t.find(".pagination-item-link").removeClass("active"),e?r(e.currentTarget).addClass("active"):t.find(".pagination-item-link:contains("+this.collection.limit+")").addClass("active")}return e.extend({defaultOptions:t,afterRender:o,goToPage:d,next:c,prev:u,setLimit:l})}),define("contentBrowseViewConfig",["text!views/contentBrowse/contentBrowseView.html","resources","contentBrowseViewModel","constants","appBinders","nodeDetailView","contentDetailRowView","assetDetailView","pagination/view"],function(e,t,n,i,r,o,s,a,l){return{name:"contentBrowseView",ModelType:n,browserTitle:"Content",appendTo:"#stage",wrapper:!1,template:e,listeners:[["channels.views","activateTab","activateTab"],["channels.views","nodeAdded","addNewNode"],["channels.views","assetAdded","addNewAsset"]],events:{},breadcrumbs:[{text:t.home,href:i.internalRoutes.content}],permissions:["admin","reader","editor"],rivetsConfig:{instaUpdate:!0,binders:[r],childViewBinders:{"node-detail-row":o,"content-detail-row":s,"asset-detail-row":a,"pagination-view":l}}}}),define("addFolderViewModel",["grasshopperModel","resources"],function(e,t){return e.extend({defaults:{resources:t}})}),define("addFolderViewConfig",["addFolderViewModel"],function(e){return{name:"addFolderView",ModelType:e,modelData:{},listeners:[],events:{},permissions:["admin","editor"]}}),define("contentBrowseView",["grasshopperBaseView","contentBrowseViewConfig","jquery","paginationWorker","underscore","breadcrumbWorker","constants","nodeWorker","addFolderViewConfig"],function(e,t,n,i,r,o,s,a,l){function d(e){n.when(h.call(this),this.model.fetch(),this.model.get("childNodes").fetch(),f.call(this)).done(e.resolve,u.bind(this)).fail(e.reject)}function c(){this.$el.foundation()}function u(){this.model.get("inRoot")||this.model.get("childAssets").fetch()}function h(){var e=new n.Deferred;return o.contentBrowse.call(this,e),e.promise()}function f(){return this.model.get("inRoot")?void 0:this.searchContent()}function p(e){n("#"+e+" a").click()}function m(){this.app.router.navigateTrigger(s.internalRoutes.addContent.replace(":id",this.model.get("nodeId")))}function v(){this.app.router.navigateTrigger(s.internalRoutes.createAssets.replace(":id",this.model.get("nodeId")))}function g(){this.app.router.navigateTrigger(s.internalRoutes.createFolder.replace(":id",this.model.get("nodeId")))}function y(e){this.model.get("childNodes").add({label:e,parent:this.model.get("nodeId")})}function b(e){this.model.get("childAssets").add(e)}function w(){a.editName.call(this).done(o.resetBreadcrumb.bind(this),h.bind(this)),_.call()}function x(){a.editContentTypes.call(this),_.call()}function T(){a.deleteNode.call(this),_.call()}function C(e){var t,o;return r.isUndefined(e)||r.isUndefined(s.controlKeyCodeMap[e.keyCode])?(t=this.model.get("childContent"),o=n.trim(this.model.get("contentSearchValue")),k.call(this),void t.searchQuery(o).done(i.setUrl.bind(this,t.limit,t.skip,o),k.bind(this,!0))):!1}function k(e){var t=this.$(".contentSearchIcon");e?(t.removeClass("fa-refresh fa-spin"),t.addClass("fa-search")):(t.removeClass("fa-search"),t.addClass("fa-refresh fa-spin"))}function _(){n("#actionsDropdown").click()}function D(){var e=this.app.user?this.app.user.get("role"):void 0;return r.contains(l.permissions,e)}return e.extend({defaultOptions:t,beforeRender:d,afterRender:c,activateTab:p,createContent:m,createAssets:v,createFolder:g,addNewNode:y,addNewAsset:b,editNodeName:w,editNodeContentTypes:x,deleteNode:T,searchContent:C,hasCreateFolderPermission:D})}),define("text!views/contentTypeIndex/contentTypeIndexView.html",[],function(){return'<div>\n    <div class="row">\n        <div class="large-12 columns">\n            <table width="100%">\n                <thead>\n                    <tr>\n                        <th style="width: 85%;">{{model:resources->name}}</th>\n                        <th style="text-align: center;">{{model:resources->actions}}</th>\n                    </tr>\n                </thead>\n                <tbody id="contentTypeIndexTable">\n                    <tr data-rv-each-type="model:contentTypes:" data-rv-new-content-type-detail-row="type"></tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n\n    <section data-rv-move-to="view.mastheadButtonsSelector">\n        <ul class="button-group radius right">\n\n            <li>\n                <a data-rv-on-click="view.newContentType" class="button tiny">\n                    {{model:resources->mastheadButtons->addContentType}}\n                </a>\n            </li>\n\n        </ul>\n    </section>\n</div>'}),define("contentTypeDetailViewModel",["grasshopperModel","resources","constants","masseuse","plugins","underscore"],function(e,t,n,i,r,o){function s(){var t=e.prototype.toJSON.apply(this);return o.omit(t,[])}function a(e){var n;return o.isEmpty(e.label)&&(n=t.contentType.validation.mustHaveLabel),n||o.each(e.fields,function(i){o.isEmpty(i.label)&&(n=t.contentType.validation.fieldsMustHaveLabel),o.isEmpty(i._id)&&(n=t.contentType.validation.fieldsMustHaveIds),o.where(e.fields,{_id:i._id}).length>1&&(n=t.contentType.validation.fieldsMustBeUnique)}),n?n:void 0}function l(){var e=o.first(this.attributes.fields).type,t=o.findWhere(r.fields,{type:e}).config,n=o.result(t,"modelData");return"string"===n.dataType}var d=i.ComputedProperty;return e.extend({idAttribute:"_id",defaults:{resources:t,plugins:r.fields,href:new d(["_id"],function(e){return n.internalRoutes.contentTypes+"/"+e}),saving:!1},toJSON:s,validate:a,isFirstFieldDataTypeAString:l,urlRoot:n.api.contentTypes.url})}),define("contentTypeIndexViewModel",["grasshopperModel","resources","constants","grasshopperCollection","contentTypeDetailViewModel"],function(e,t,n,i,r){function o(){this.set("contentTypes",new(i.extend({model:r,comparator:function(e){return e.get("label").toLowerCase()},url:function(){return n.api.contentTypes.url}})))}return e.extend({defaults:{resources:t},url:n.api.contentTypes.url,initialize:o})}),define("text!views/contentTypeDetail/contentTypeDetailView.html",[],function(){return'<div id="contentTypeDetailView">\n    <div class="row">\n        <div class="large-12 columns">\n\n            <h4>{{model:resources->summary | withColon}}</h4>\n            <hr>\n\n            <div class="row">\n                <div class="small-2 columns">\n                    <label for="title" class="right inline">{{model:resources->title | withColon}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <input type="text" id="title" data-rv-value="model:label">\n                </div>\n\n            </div>\n\n            <div class="row contentTypeDetailTextField">\n                <div class="small-2 columns">\n                    <label for="helpText" class="right inline">{{model:resources->contentType->helpText | withColon}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <textarea id="helpText" data-rv-value="model:helpText" style="max-width: 100%;"></textarea>\n                </div>\n            </div>\n\n            <div class="row contentTypeDetailTextField">\n                <div class="small-2 columns">\n                    <label for="description" class="right inline">{{model:resources->contentType->description | withColon}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <textarea id="description" data-rv-value="model:description" style="max-width: 100%;"></textarea>\n                </div>\n            </div>\n\n\n            <div class="row paddingTop20">\n                <div class="small-6 columns ">\n                    <h4>{{model:resources->contentType->fields | withColon}}</h4>\n                </div>\n\n                <div class="small-6 columns">\n                    <select class="contentTypesDropdownSelect right">\n                        <option data-rv-value="">\n\n                        </option>\n                        <option data-rv-each-field="model:plugins" data-rv-value="field.name">\n                                {{field.name}}\n                        </option>\n                    </select>\n                </div>\n\n            </div>\n\n            <table width="100%" style="margin-bottom: 0; table-layout: fixed;">\n                <thead>\n                    <tr>\n                        <th style="width: 30%;">{{model:resources->name | spaceBefore}}</th>\n                        <th>{{model:resources->contentType->fieldType}}</th>\n                        <th>{{model:resources->multiple}}</th>\n                        <th style="text-align: center;">{{model:resources->actions}}</th>\n                    </tr>\n                </thead>\n            </table>\n\n            <section id="contentTypeFieldAccordion">\n\n                <div data-rv-each-field="collection:" data-rv-sortIndex="index | prepend sort">\n\n                    <div data-rv-fieldaccordion="field"></div>\n\n                </div>\n\n            </section>\n\n        </div>\n    </div>\n    <div class="row">\n        <div class="large-12 columns">\n            <ul class="button-group radius right">\n\n                <li>\n                    <a class="button tiny" data-rv-on-click="view.saveContentType" data-rv-disabled="model:saving" style="margin-top: 20px;" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                        {{model:resources->save}}\n                    </a>\n                </li>\n\n                <li>\n                    <a class="button tiny" data-rv-on-click="view.saveAndClose" data-rv-disabled="model:saving" style="margin-top: 20px;" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                        {{model:resources->saveAndClose}}\n                    </a>\n                </li>\n\n            </ul>\n        </div>\n    </div>\n\n\n    <section data-rv-move-to="view.mastheadButtonsSelector">\n        <div class="button-bar">\n            <ul class="button-group radius">\n\n                <li>\n                    <a data-rv-on-click="view.newContentType" class="button tiny">\n                        {{model:resources->mastheadButtons->addContentType}}\n                    </a>\n                </li>\n\n            </ul>\n\n            <ul class="button-group radius">\n\n                <li>\n                    <a data-rv-on-click="view.saveContentType" data-rv-disabled="model:saving" class="button tiny" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                        {{model:resources->save}}\n                    </a>\n                </li>\n\n                <li>\n                    <a data-rv-on-click="view.saveAndClose" data-rv-disabled="model:saving" class="button tiny" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                        {{model:resources->saveAndClose}}\n                    </a>\n                </li>\n\n            </ul>\n        </div>\n    </section>\n</div>'}),define("text!views/contentTypeDetail/_contentTypeDetailRow.html",[],function(){return""}),define("text!views/contentTypeDetail/fieldAccordion/template.html",[],function(){return'<div class="row accordionHeader fieldAccordion" data-rv-modelid="model.cid">\n    <div class="small-12 columns">\n        <table style="margin-bottom: 0; table-layout: fixed;">\n            <tbody>\n                <tr>\n                    <td style="width: 30%;"><i class="fa fa-sort"></i>{{model:label | existsOr -- | spaceBefore}}</td>\n                    <td data-rv-readable-type-name="model"></td>\n                    <td>{{model:min}}min / {{model:max}}max</td>\n                    <td style="text-align: center;">\n                        <span data-rv-on-click="view.removeThisField">\n                           <i class="fa fa-trash-o"></i>\n                        </span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n\n<div data-rv-id="model.cid" class="accordionContent">\n\n    <div class="row">\n        <div class="large-12 small-centered columns">\n\n            <div class="row">\n                <div class="small-2 columns">\n                    <label for="_id" class="right inline">{{model:resources->id}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <input type="text" id="_id" placeholder="_id" data-rv-value="model:_id">\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-2 columns">\n                    <label for="label" class="right inline">{{model:resources->name}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <input type="text" id="label" data-rv-placeholder="model:resources->name" data-rv-value="model:label">\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-2 columns">\n                    <label data-rv-for="model.cid  | prepend type" class="right inline">{{model:resources->type}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <select data-rv-id="model.cid  | prepend type" data-rv-value="model:type" >\n                        <option data-rv-each-plugin="model:plugins" data-rv-value="plugin.type" data-rv-text="plugin.name"></option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-2 columns">\n                    <label data-rv-for="model.cid  | prepend helpText" class="right inline">{{model:resources->helpText}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <textarea data-rv-id="model.cid  | prepend helpText" data-rv-value="model:helpText" style="max-width: 100%;"></textarea>\n                </div>\n            </div>\n\n            <div class="row" data-rv-if="model:dataType | equals string">\n                <div class="small-2 columns">\n                    <label data-rv-for="model.cid  | prepend defaultValue" class="right inline">{{model:resources->defaultValue}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <input data-rv-type="model:defaultValueType | existsOr text" data-rv-id="model.cid  | prepend defaultValue" data-rv-checked="model:defaultValue" data-rv-value="model:defaultValue">\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-2 columns">\n                    <label data-rv-for="model.cid  | prepend multi" class="right inline">{{model:resources->allowMultiple}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <input data-rv-id="model.cid  | prepend multi" type="checkbox" data-rv-checked="model:multi" class="align-10px">\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-2 columns">\n                    <label data-rv-for="model.cid  | prepend validation" class="right inline">Validation</label>\n                </div>\n                <div class="small-10 columns">\n                    <input data-rv-id="model.cid  | prepend validation" type="checkbox" data-rv-checked="model:hasValidation" class="align-10px">\n                </div>\n            </div>\n\n        </div>\n    </div>\n\n    <div class="row" data-rv-show="model:multi">\n        <fieldset>\n            <legend>\n                {{model:resources->allowMultipleSettings}}\n            </legend>\n            <div class="row">\n                <div class="small-2 columns">\n                    <label data-rv-for="model.cid  | prepend min" class="right inline">{{model:resources->minimum}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <input data-rv-id="model.cid  | prepend min" min="0" type="number" data-rv-value="model:min | asNumber">\n                </div>\n            </div>\n            <div class="row">\n                <div class="small-2 columns">\n                    <label data-rv-for="model.cid  | prepend max" class="right inline">{{model:resources->maximum}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <input data-rv-id="model.cid  | prepend max" min="1" type="number" data-rv-value="model:max | asNumber">\n                </div>\n            </div>\n        </fieldset>\n    </div>\n\n    <div class="row" data-rv-show="model:hasValidation">\n        <fieldset>\n            <legend>\n                Validation\n            </legend>\n            <div class="row">\n\n                <div class="small-2 columns">\n                    <label data-rv-for="model.cid  | prepend possibleValidations" class="right inline">{{model:resources->contentType->addValidationType | withColon}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <select data-rv-id="model.cid  | prepend possibleValidations" data-rv-value="model:selectedValidation" >\n                        <option disabled selected>{{model:resources->contentType->selectOption}}</option>\n                        <option data-rv-each-validationtype="model:validationTypes" data-rv-value="validationtype" data-rv-text="validationtype"></option>\n                    </select>\n                </div>\n\n\n\n                <table width="100%" style="margin-bottom: 0; table-layout: fixed;">\n                    <thead>\n                        <tr>\n                            <th style="width: 15%;">{{model:resources->type}}</th>\n                            <th style="width: 70%;">{{model:resources->options}}</th>\n                            <th style="text-align: center;">{{model:resources->actions}}</th>\n                        </tr>\n                    </thead>\n                    <tbody data-rv-hide="model:validationCollection: | collectionHasLength">\n                        <tr>\n                            <td colspan="3">\n                                {{model:resources->contentType->thisFieldHasNoValidation}}\n                            </td>\n                        </tr>\n                    </tbody>\n                    <tbody>\n                        <tr data-rv-each-validationmodel="model:validationCollection:">\n                            <td style="width: 15%;">\n                                {{validationmodel:type | humanize | spaceBefore}}\n                            </td>\n                            <td data-rv-validationform="validationmodel" style="width: 70%;">\n                                <!--Built Dynamically from the validation views-->\n                            </td>\n                            <td style="text-align: center;">\n                                <span data-rv-on-click="view.removeValidationRule">\n                                   <i class="fa fa-trash-o"></i>\n                                </span>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n\n            </div>\n        </fieldset>\n    </div>\n\n    <div class="row" data-rv-show="model:options">\n        <fieldset>\n            <legend>\n                <span data-rv-readable-type-name="model"></span>\n                <span>{{model:resources->options}}</span>\n            </legend>\n            <div data-rv-fieldform="model"></div>\n        </fieldset>\n    </div>\n\n</div>\n'}),define("fieldAccordionBinders",["underscore","masseuse","plugins","require","jquery"],function(e,t,n,i,r){function o(e){return e?e.charAt(0).toUpperCase()+e.slice(1):void 0}return{fieldform:{bind:function(){},unbind:function(){this.viewInstance.remove()},routine:function(i,r){var o=this,s=e.find(n.fields,{type:r.get("type")}),a=s.view,l=s.config;o.viewInstance&&(o.model.view.removeChild(this.viewInstance),o.viewInstance.remove()),e.each(l.modelData,function(e,t){r.has(t)||r.set(t,e,{silent:!0})}),o.viewInstance=new a(l,{modelData:{options:t.ProxyProperty("options",r),inSetup:!0},template:l.setupTemplate,mastheadButtons:o.model.view.mastheadButtons,appendTo:i}),o.model.view.addChild(o.viewInstance)},publishes:!0},validationform:{bind:function(){},unbind:function(){this.viewInstance.remove()},routine:function(e,t){var n=this;this.viewInstance&&(this.model.view.removeChild(this.viewInstance),this.viewInstance.remove()),t.get("type")&&i(["validation"+o(t.get("type"))],function(i){n.viewInstance=new i({model:t,appendTo:e}),n.model.view.addChild(n.viewInstance)})}},"readable-type-name":function(t,n){var i=n.get("type"),o=n.get("plugins"),s=e.findWhere(o,{type:i}).name;r(t).text(s)}}}),define("fieldAccordionConfig",["text!views/contentTypeDetail/fieldAccordion/template.html","fieldAccordionBinders"],function(e,t){return{name:"fieldAccordion",modelData:{},wrapper:!1,template:e,events:{},listeners:[["model","change:type","changeFieldType"],["model","change:selectedValidation","addValidationRule"]],rivetsConfig:{binders:[t]}}}),define("fieldAccordionView",["grasshopperBaseView","fieldAccordionConfig","underscore","resources"],function(e,t,n,i){function r(){s.call(this)}function o(e,t){var n=this.model.get("plugins"),i=this.model.previousAttributes().type,r=l.call(this,n,i),o=l.call(this,n,t);o!==r?d.call(this).done(a.bind(this,t)).fail(c.bind(this,i)):a.call(this,t)}function s(){var e=this.model.get("validation");e&&this.model.get("validationCollection").reset(e),e&&e.length>0&&this.model.toggle("hasValidation")}function a(e){var t=n.result(n.findWhere(this.model.get("plugins"),{type:e}).config,"modelData"),i=this.model.pick("label","min","max","multi","helpText","validation","_id"),r=this.parent.collection.indexOf(this.model),o=this.model;n.extend(t,i),this.parent.collection.remove(o),this.parent.collection.add(t,{at:r}),this.parent.refreshAccordion(),this.parent.openSpecificAccordion(r)}function l(e,t){return n.findWhere(e,{type:t}).config.modelData.dataType}function d(){return this.displayModal({header:i.warning,msg:i.contentType.switchingBetweenSimpleAndComplexTypesWarning})}function c(e){this.model.set("type",e,{silent:!0})}function u(){var e=this.model.get("selectedValidation");this.model.get("validationCollection").add({type:e}),this.model.set("selectedValidation",i.contentType.selectOption,{silent:!0})}function h(e,t){e.stopPropagation(),f.call(this).done(p.bind(this,t))}function f(){return this.displayModal({header:i.warning,msg:i.validationViews.deletionWarning})}function p(e){this.model.get("validationCollection").remove(e.validationmodel)}function m(e){var t=this;e.stopPropagation(),this.displayModal({header:i.warning,msg:i.contentType.removeFieldWarning}).done(function(){t.parent.collection.remove(t.model),t.parent.collection.reset(t.parent.collection.models),t.parent.refreshAccordion()})}return e.extend({defaultOptions:t,afterRender:r,changeFieldType:o,addValidationRule:u,removeValidationRule:h,removeThisField:m})}),define("contentTypeDetailBinders",["fieldAccordionView"],function(e){return{fieldaccordion:{bind:function(){},unbind:function(){this.viewInstance.remove()},routine:function(t,n){this.viewInstance&&(this.model.view.removeChild(this.viewInstance),this.viewInstance.remove()),this.viewInstance=new e({appendTo:t,model:n}),this.model.view.addChild(this.viewInstance)}}}}),define("contentTypeDetailFormatters",[],function(){function e(e){return e.length}function t(e){return e?"Yes":"No"}function n(e){return e?"on":"off"}function i(e){return"on"===e?!0:!1}return{collectionHasLength:e,booleanToYesNo:t,radioToBoolean:{read:n,publish:i}}}),define("validationTypes",[],function(){return["required","alpha","alpha_numeric","number","email","url","date","regex","unique"]}),define("fieldAccordionValidationCollection",["grasshopperCollection","grasshopperModel","resources"],function(e,t,n){return e.extend({model:t.extend({defaults:{resources:n}})})}),define("fieldAccordionModel",["grasshopperModel","resources","plugins","masseuse","underscore","validationTypes","fieldAccordionValidationCollection","helpers"],function(e,t,n,i,r,o,s,a){function l(){this.on("change:label",d,this),c.call(this),u.call(this),this.on("change:min",u,this),this.on("change:max",u,this),this.get("validationCollection").on("change add remove",this.updateValidationRulesOnModel,this)}function d(e,t){return t&&!e.get("_id")&&e.set("_id",t.toLowerCase().trim().replace(/[\s]+/g,"-").replace(/[^-a-zA-Z0-9._~]/g,"")),""}function c(){var e=this.get("min"),t=this.get("max");this.set("multi",t>1||1!==e)}function u(){var e=this.get("min"),t=this.get("max");e>=t&&this.set("max",e)}function h(){this.set("validation",a.cleanCollection(this.get("validationCollection").toJSON()))}var f=i.ComputedProperty;return e.extend({initialize:l,updateValidationRulesOnModel:h,defaults:function(){return{_id:"",multi:!1,resources:t,plugins:n.fields,validation:[],validationCollection:new s,hasValidation:!1,validationTypes:o,dataType:new f(["type"],function(e){return e?r.findWhere(this.get("plugins"),{type:e}).config.modelData.dataType:void 0})}}})}),define("contentTypeDetailViewFieldsCollection",["backbone","fieldAccordionModel","underscore"],function(e,t,n){return e.Collection.extend({model:t,toJSON:function(){var t=e.Collection.prototype.toJSON.apply(this);return n.map(t,function(e){return n.pick(e,"label","max","min","options","type","validation","_id","helpText","defaultValue","dataType")})}})}),define("contentTypeDetailViewConfig",["text!views/contentTypeDetail/contentTypeDetailView.html","text!views/contentTypeDetail/_contentTypeDetailRow.html","contentTypeDetailViewModel","appBinders","contentTypeDetailBinders","formatters","resources","constants","contentTypeDetailFormatters","contentTypeDetailViewFieldsCollection"],function(e,t,n,i,r,o,s,a,l,d){return{name:"contentTypeDetail",ModelType:n,modelData:{},browserTitle:"Content Types",appendTo:"#stage",wrapper:!1,template:e,breadcrumbs:[{text:s.home,href:a.internalRoutes.content},{text:s.contentTypes,href:a.internalRoutes.contentTypes}],permissions:["admin","editor","reader"],rivetsConfig:{formatters:[o,l],binders:[i,r]},collection:new d}}),define("contentTypeDetailView",["grasshopperBaseView","contentTypeDetailViewConfig","resources","api","underscore","jquery","breadcrumbWorker","plugins","constants","mixins/handleRowClick"],function(e,t,n,i,r,o,s,a,l,d){function c(e){this.model.has("label")||this.model.isNew()?this.model.isNew()?f.call(this,e):e.resolve():this.model.fetch().done(h.bind(this,e)).fail(e.reject)}function u(){this.$el.foundation(),O.call(this),F.call(this)}function h(e){this.collection.reset(this.model.get("fields")),E.call(this,e,!1)}function f(e){var t=r.clone(r.findWhere(a.fields,{type:"textbox"}).config.modelData);t._id="title",t.label="Title",this.collection.reset(t),E.call(this,e,!0)}function p(e){e.stopPropagation(),v.call(this).then(m.bind(this)).then(g.bind(this))}function m(e){var t;return e?(t=e>1?"pieces":"piece",t=e+" "+t,this.displayModal({header:n.warning,msg:n.contentType.deletionWarningWithAssociatedContent.replace(":count",t)})):this.displayModal({header:n.warning,msg:n.contentType.deletionWarningWithoutAssociatedContent})}function v(){var e=new o.Deferred;return i.getContentByContentType(this.model.get("_id")).done(function(t){e.resolve(t.total)}).fail(e.reject),e.promise()}function g(){this.model.destroy({success:y.bind(this),error:b.bind(this)})}function y(e){this.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.contentType.successfullyDeletedPre+e.get("label")+n.contentType.successfullyDeletedPost})}function b(e){this.fireErrorModal(n.contentType.errorDeleted+e.get("label"))}function w(){this.$("#contentTypeFieldAccordion").accordion({active:!1})}function x(){this.$("#contentTypeFieldAccordion").find('.accordionHeader[modelid="'+this.collection.last().cid+'"]').click()}function T(){this.$("#contentTypeFieldAccordion").accordion("refresh")}function C(e){this.$("#contentTypeFieldAccordion").find('.fieldAccordion[modelid="'+this.collection.at(e).cid+'"]').click()}function k(){D.call(this,{})}function _(){D.call(this,{close:!0})}function D(e){var t=this;this.model.toggle("saving"),this.model.set("fields",this.collection.toJSON()),S.call(this).done(function(){t.model.save().done(M.bind(t,e)).fail(A.bind(t))}).fail(function(){t.model.toggle("saving")})}function S(){var e=new o.Deferred;return this.model.isFirstFieldDataTypeAString()?e.resolve():this.displayModal({header:n.warning,msg:n.contentType.validation.firstFieldIsNotAStringWarning}).done(e.resolve).fail(e.reject),e.promise()}function M(e){this.collapseAccordion(),this.displayTemporaryAlertBox({header:n.success,msg:n.contentType.successfulSave,style:"success"}),e.close?this.app.router.navigateTrigger(l.internalRoutes.contentTypes):(this.model.toggle("saving"),this.app.router.navigateNinja(l.internalRoutes.contentTypeDetail.replace(":id",this.model.get("_id"))),s.resetBreadcrumb.call(this),E.call(this))
}function A(){this.model.toggle("saving"),this.fireErrorModal(this.model.validationError?this.model.validationError:n.contentType.failedSave)}function E(e,t){s.contentTypeBreadcrumb.call(this,e,t)}function F(){this.$contentTypePicker=o(".contentTypesDropdownSelect"),this.$contentTypePicker.select2({placeholder:n.contentType.addNewField}).on("change",j.bind(this))}function j(e){if(e.val&&""!==e.val){var t=r.find(this.model.get("plugins"),function(t){return e.val==t.name}),n=r.result(t.config,"modelData");this.collapseAccordion(),n.isNew=!0,this.collection.add(n),this.refreshAccordion(),x.call(this),this.$contentTypePicker.select2("val","")}}function O(){var e=this.$("#contentTypeFieldAccordion");e.accordion({header:".accordionHeader",icons:!1,active:!1,collapsible:!0,disabled:!1,heightStyle:"content"}).sortable({handle:".fieldAccordion",revert:!0,axis:"y",start:I.bind(this,e),stop:N.bind(this,e)})}function N(e){var t,n=[],i={},r=e.children(),s=r.length,a=this;for(e.find(".fieldAccordion").each(function(){n.push(a.collection.get(o(this).attr("modelid")))}),r.each(function(){i[o(this).attr("sortIndex")]=this}),t=0;s>t;++t)e.append(i["sort"+t]),e.accordion("refresh");this.collection.reset(n),I.call(this,e)}function I(e){e.accordion("option","disabled")?(e.accordion({disabled:!1}),e.accordion({active:!1}),e.accordion("refresh")):(e.accordion({disabled:!0}),e.accordion("refresh"))}function P(){this.model.isNew()?this.app.router.displayContentTypeDetail():this.app.router.navigateTrigger(l.internalRoutes.newContentType)}return e.extend({defaultOptions:t,beforeRender:c,afterRender:u,prepareToDeleteContentType:p,saveContentType:k,saveAndClose:_,newContentType:P,refreshAccordion:T,collapseAccordion:w,openSpecificAccordion:C}).extend(d)}),define("text!views/contentTypeDetail/contentTypeDetailRow/template.html",[],function(){return'<td data-rv-on-click="view.handleRowClick">\n    <a data-rv-href="model:href">\n        {{model:label}}\n    </a>\n</td>\n<td data-rv-on-click="view.handleRowClick" class="actions" align="center">\n    <a data-rv-href="model:href">\n        <i class="fa fa-edit"></i>\n    </a>\n    <a data-rv-on-click="view.prepareToDeleteContentType">\n        <i class="fa fa-trash-o"></i>\n    </a>\n</td>'}),define("contentTypeDetailRowConfig",["text!views/contentTypeDetail/contentTypeDetailRow/template.html","contentTypeDetailViewConfig","underscore"],function(e,t,n){return n.extend({},t,{name:"contentTypeDetailRow",template:e})}),define("contentTypeDetailRow",["contentTypeDetailView","contentTypeDetailRowConfig"],function(e,t){return e.extend({defaultOptions:t})}),define("contentTypeIndexViewConfig",["text!views/contentTypeIndex/contentTypeIndexView.html","contentTypeIndexViewModel","resources","constants","appBinders","contentTypeDetailRow"],function(e,t,n,i,r,o){return{name:"contentTypeIndexView",ModelType:t,browserTitle:"Content Types",appendTo:"#stage",wrapper:!1,template:e,listeners:[],events:{},breadcrumbs:[{text:n.home,href:i.internalRoutes.content},{text:n.contentTypes,href:i.internalRoutes.contentTypes}],permissions:["admin","editor"],rivetsConfig:{binders:[r],childViewBinders:{"content-type-detail-row":o}}}}),define("contentTypeIndexView",["grasshopperBaseView","contentTypeIndexViewConfig","constants"],function(e,t,n){function i(e){this.model.get("contentTypes").fetch().done(e.resolve)}function r(){this.app.router.navigateTrigger(n.internalRoutes.newContentType)}return e.extend({defaultOptions:t,beforeRender:i,newContentType:r})}),define("addFolderView",["grasshopperBaseView","addFolderViewConfig","resources"],function(e,t,n){function i(){r.call(this)}function r(){var e=this;this.displayModal({header:n.node.enterName,type:"input"}).done(function(t){s.call(e),o.call(e,t.data)}).always(a.bind(this))}function o(e){this.channels.views.trigger("nodeAdded",e)}function s(){this.channels.views.trigger("activateTab","contentTab")}function a(){this.app.router.removeThisRouteFromBreadcrumb(),this.app.router.navigateBack(),this.remove()}return e.extend({defaultOptions:t,afterRender:i})}),define("addContentViewModel",["grasshopperModel"],function(e){return e.extend({})}),define("addContentViewConfig",["addContentViewModel"],function(e){return{name:"addContent",ModelType:e,browserTitle:"Content",modelData:{},permissions:["admin","editor"]}}),define("addContentView",["grasshopperBaseView","addContentViewConfig","resources","contentTypeWorker"],function(e,t,n,i){function r(e){o.call(this,e)}function o(e){s.call(this,this.model.get("meta.node")).done(a.bind(this,e)).fail(p.bind(this,e))}function s(e){return i.getNodesContentTypes(e)}function a(e,t){var n=this,i=t.allowedTypes;if(i)switch(i.length){case 0:l.call(n,e);break;case 1:d.call(n,e,i[0]);break;default:c.call(n,i).done(function(t){u.call(n,e,t.selectedType)}).fail(function(){f.call(n,e)})}else l.call(n,e)}function l(e){this.displayModal({msg:n.contentType.noContentTypes,hideCancel:!0}).always(m.bind(this,e))}function d(e,t){this.model.set("meta.type",t._id),e.resolve(),h.call(this)}function c(e){return this.displayModal({header:n.contentType.selectContentType,data:e,type:"radio"})}function u(e,t){this.model.set("meta.type",t),e.resolve(),h.call(this)}function h(){var e={meta:this.model.get("meta"),isNew:!0};this.app.router.displayContentDetail(void 0,e)}function f(e){e.reject(),v.call(this)}function p(e){e.reject()}function m(e){e.reject(),v.call(this)}function v(e){this.app.router.removeThisRouteFromBreadcrumb(),this.app.router.navigateBack(e)}return e.extend({defaultOptions:t,beforeRender:r})}),define("addAssetsViewModel",["grasshopperModel","resources"],function(e,t){return e.extend({defaults:{resources:t}})}),define("addAssetsViewConfig",["addAssetsViewModel"],function(e){return{name:"addAssetsView",ModelType:e,modelData:{},listeners:[],events:{},permissions:["admin","editor"]}}),define("addAssetsView",["grasshopperBaseView","addAssetsViewConfig","underscore","resources"],function(e,t,n,i){function r(){o.call(this)}function o(){var e=this;this.displayModal({header:i.asset.uploadAssetModalMsg,type:"upload",data:{}}).done(function(t){e.channels.views.trigger("activateTab","filesTab"),n.each(t.files,function(t){a.call(e,t)}),s.call(e)}).fail(s.bind(this))}function s(e){this.app.router.removeThisRouteFromBreadcrumb(),this.app.router.navigateBack(e),this.remove()}function a(e){var t={fileName:e.name,size:e.size,lastmodified:e.lastModifiedDate,fileData:e,uploadError:!1};this.channels.views.trigger("assetAdded",t)}return e.extend({defaultOptions:t,afterRender:r})}),define("text!views/sysInfo/sysInfoView.html",[],function(){return'<div class="sysInfo_page">\n    <h1>Grasshopper Information</h1>\n\n    <div>\n        Grasshopper is released under the\n        <a href="https://github.com/Solid-Interactive/grasshopper-core-nodejs/blob/master/LICENSE">MIT license</a>\n        and has been sponsored by <a href="http://www.thinksolid.com/">Solid Interactive</a>. Further\n        <a href="http://solid-interactive.github.io/grasshopper-core-nodejs/documentation.html">documentation</a>\n        is available on the <a href="http://grasshopper.ws/">Grasshopper website</a>.<br/><br/>\n    </div>\n    <div class="sysInfo_versions">\n        <table>\n            <thead>\n            <tr>\n                <th width="50%">Package</th>\n                <th width="50%">Version</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr>\n                <td>grasshopper-admin</td>\n                <td>{{model:constants->version}}</td>\n            </tr>\n            <tr data-rv-each-component="model:apiVersions->components">\n                <td>{{component.name}}</td>\n                <td>{{component.version}}</td>\n            </tr>\n            </tbody>\n        </table>\n        <h2>Components:</h2>\n        <table>\n            <thead>\n            <tr>\n                <th width="50%">Package</th>\n                <th width="50%">Version</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr data-rv-each-lib="model:libraryVersions">\n                <td>{{lib.name}}</td>\n                <td>{{lib.version}}</td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n</div>'}),define("sysInfoViewConfig",["text!views/sysInfo/sysInfoView.html","resources","constants"],function(e,t,n){return{name:"sysInfoView",modelData:{},browserTitle:t.sysInfo,appendTo:"#stage",wrapper:!1,template:e,events:{},listeners:[],breadcrumbs:[{text:t.home,href:n.internalRoutes.content},{text:t.sysInfo,href:n.internalRoutes.sysInfo}]}}),define("sysInfoView",["grasshopperBaseView","sysInfoViewConfig","jquery","api","constants"],function(e,t,n,i,r){function o(e){this.model.set("constants",r),this.model.set("libraryVersions",JSON.parse(r.libraryVersions)),s.call(this).done(e.resolve)}function s(){var e=new n.Deferred,t=this;return i.getVersion().done(function(n){t.model.set("apiVersions",n),e.resolve()}),e.promise()}return e.extend({defaultOptions:t,beforeRender:o,constants:r})}),define("router",["jquery","backbone","underscore","masseuse","api","constants","helpers","grasshopperBaseView","login/view","loginWorker","logoutWorker","forbiddenView","alertBoxView","modalView","modalViewConfig","resources","userDetail/view","UserModel","headerView","mastheadView","userIndexView","addUser/view","contentBrowseView","contentDetailView","contentTypeIndexView","contentTypeDetailView","addFolderView","addContentView","addAssetsView","sysInfoView"],function(e,t,n,i,r,o,s,a,l,d,c,u,h,f,p,m,v,g,y,b,w,x,T,C,k,_,D,S,M,A){function E(){this.goLogout()}function F(){var i=new e.Deferred,r=this;return i.done(function(){var e=t.history.getFragment();e!==n.last(r.breadcrumb)&&(r.breadcrumb.push(e),r.headerView.checkHeaderTab(e))}),d.userIsStillValidUser.call(this,i),i.promise()}function j(){return this.breadcrumb&&this.breadcrumb.length>1}function O(){this.breadcrumb.pop()}function N(){return n.last(this.breadcrumb)}function I(e){"0"===e?(e=null,this.breadcrumb.unshift(o.internalRoutes.content.replace("#",""))):this.breadcrumb.unshift(o.internalRoutes.nodeDetail.replace(":id",e).replace("#","")),this.displayContentBrowse(e)}function P(e,t,n){t=t||{},t.trigger=!0,this.navigate(e,t,n)}function R(e,t){t=t||{},t.replace=!0,this.navigate(e,t)}function V(e,t){t=t||{},t.deferred=!0,this.navigate(e,t)}function B(e){e?this.navigateTrigger(this.breadcrumb[this.breadcrumb.length-1]):this.navigateNinja(this.breadcrumb[this.breadcrumb.length-1])}function L(e,n,i){ut instanceof t.View&&ut.hideAlertBox.call(ut),i&&this.beforeRouting(),t.Router.prototype.navigate.apply(this,arguments)}function q(){ft.prototype.initialize.apply(this,arguments),a.prototype.channels.addChannel("views"),a.prototype.app={router:this,user:this.user},a.prototype.displayAlertBox=$,a.prototype.displayTemporaryAlertBox=G,a.prototype.hideAlertBox=J,a.prototype.displayModal=X,a.prototype.hideModal=Z}function H(t,n,i){var r=new e.Deferred,o=new t(n);return n=n||{},ut&&ut.name===n.name&&!i?r.resolve(ut).promise():(o.on(a.beforeRenderDone,function(){ut&&ut.remove(),ut=o,e("#mastheadButtons").empty()}),o.start().done(function(){r.resolve(o),s.browserTitles.setBrowserTitle(o.browserTitle)}).fail(function(){r.reject()}),r.promise())}function W(){this.headerView=new y({modelData:{userModel:this.user}}),this.headerView.start(),this.mastheadView=new b,this.mastheadView.start()}function z(){this.headerView&&this.mastheadView&&(this.headerView.remove(),this.mastheadView.remove(),this.headerView=null,this.mastheadView=null)}function U(){c.doLogout.call(this).done(this.navigate.bind(this,"login",{trigger:!0},!0))}function Y(e){e?(pt.set("authToken","Google "+e),this.navigateTrigger("#items")):this.loadMainContent(l)}function $(e){var t=new h({modelData:e});t.start()}function G(e){e.temporary=!0,this.displayAlertBox(e)}function J(){this.channels.views.trigger("hideAlertBoxes")}function X(t){var n=new e.Deferred,i=new f({modelData:{header:t.header?t.header:null,msg:t.msg,data:t.data?t.data:null,hideCancel:!!t.hideCancel,hideConfirm:!!t.hideConfirm},type:t.type?t.type:null,$deferred:n});return this.hideModal(),i.start(),a.prototype.modalView=i,n.promise()}function Z(){a.prototype.modalView&&a.prototype.modalView.remove&&a.prototype.modalView.remove()}function K(){this.navigateTrigger("items")}function Q(e){"admin"===this.user.get("role")||this.user.get("_id")===e?this.loadMainContent(v,{modelData:{_id:e,userModel:this.user}}):this.navigateTrigger("forbidden")}function et(e,t){this.loadMainContent(w,{modelData:{pageNumber:e,pageLimit:t}})}function tt(){this.loadMainContent(x)}function nt(){this.loadMainContent(A)}function it(e,t,n,i){this.loadMainContent(T,{modelData:{nodeId:e?e:"0",inRoot:!e,limit:t?t:o.pagination.defaultLimit,skip:n?n:o.pagination.defaultSkip,contentSearchValue:i?i:""}})}function rt(e,t){this.loadMainContent(C,{modelData:n.extend({},t,{_id:e})})}function ot(){this.loadMainContent(k)}function st(e){this.loadMainContent(_,{modelData:{_id:e}})}function at(e){this.userHasBreadcrumbs()||I.call(this,e);var t=new D({modelData:{nodeId:e?e:null}});t.start()}function lt(e){this.userHasBreadcrumbs()||I.call(this,e),this.loadMainContent(S,{modelData:{meta:{node:e}}})}function dt(e){this.userHasBreadcrumbs()||I.call(this,e);var t=new M({modelData:{nodeId:e}});t.start()}function ct(){this.loadMainContent(u)}var ut,ht,ft=i.MasseuseRouter,pt=s.localStorage,mt=new g;return ht=ft.extend({routes:{"login(/:token)":"displayLogin",logout:"goLogout","users(/page/:pageNumber/show/:pageLimit)":"displayUserIndex","user/:id":"displayUserDetail",sysinfo:"displaySysinfo",addUser:"displayAddUser",contentTypes:"displayContentTypeIndex","contentTypes/new":"displayContentTypeDetail","contentTypes(/:id)":"displayContentTypeDetail","items/nodeid/:nodeId/createAssets":"displayCreateAssets","items/nodeid/:nodeId/createFolder":"displayCreateFolder","items/nodeid/:nodeId/createContent":"displayCreateContent","items(/nodeid/:nodeId/limit/:limit)":"displayContentBrowse","items(/nodeid/:nodeId/limit/:limit/skip/:skip)":"displayContentBrowse","items(/nodeid/:nodeId/limit/:limit/skip/:skip/query/:query)":"displayContentBrowse","items(/nodeid/:nodeId)":"displayContentBrowse","item/:id":"displayContentDetail",forbidden:"displayForbidden","*path":"goHome"},breadcrumb:[],user:mt,initialize:q,startHeader:W,removeHeader:z,onRouteFail:E,beforeRouting:F,excludeFromBeforeRouting:["login(/:token)","logout"],userHasBreadcrumbs:j,removeThisRouteFromBreadcrumb:O,getCurrentBreadcrumb:N,navigateTrigger:P,navigateNinja:R,navigateDeferred:V,navigateBack:B,loadMainContent:H,goHome:K,displayLogin:Y,goLogout:U,navigate:L,displayUserIndex:et,displayUserDetail:Q,displaySysinfo:nt,displayAddUser:tt,displayContentBrowse:it,displayContentDetail:rt,displayContentTypeIndex:ot,displayContentTypeDetail:st,displayCreateFolder:at,displayCreateContent:lt,displayCreateAssets:dt,displayForbidden:ct})}),define("ajaxCounterWorker",["jquery","underscore","constants"],function(e,t,n){function i(e,t){var n=t.type.toLowerCase(),i=t.url.toLowerCase();return"get"==n&&/\/node\/[^\/]+\/assets\/.+/.test(i)?!1:!0}function r(){e.ajaxSetup({beforeSend:function(t,r){if(i(t,r)){o++;var s=new e.Deferred,a=function(){o>0&&e("body").addClass("spinner-loading")},l=function(){0>=o&&e("body").removeClass("spinner-loading")};s.then(a),setTimeout(function(){s.resolve()},n.timeouts.showSpinnerLoadingTimeout),t.always(function(){o--,s.reject(),l()})}}})}var o=0;return{setupCounter:r}}),function(e,t,n,i){function r(e){var t,n=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=e,!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return r.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return r.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return r.prototype.onTouchStart.apply(n,arguments)},this.onTouchMove=function(){return r.prototype.onTouchMove.apply(n,arguments)},this.onTouchEnd=function(){return r.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return r.prototype.onTouchCancel.apply(n,arguments)},r.notNeeded(e)||(this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,i){var r=Node.prototype.removeEventListener;"click"===t?r.call(e,t,n.hijacked||n,i):r.call(e,t,n,i)},e.addEventListener=function(t,n,i){var r=Node.prototype.addEventListener;"click"===t?r.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):r.call(e,t,n,i)}),"function"==typeof e.onclick&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null))}function o(e){return("string"==typeof e||e instanceof String)&&(e=e.replace(/^[\\/'"]+|(;\s?})+|[\\/'"]+$/g,"")),e}0===e("head").has(".foundation-mq-small").length&&e("head").append('<meta class="foundation-mq-small">'),0===e("head").has(".foundation-mq-medium").length&&e("head").append('<meta class="foundation-mq-medium">'),0===e("head").has(".foundation-mq-large").length&&e("head").append('<meta class="foundation-mq-large">'),0===e("head").has(".foundation-mq-xlarge").length&&e("head").append('<meta class="foundation-mq-xlarge">'),0===e("head").has(".foundation-mq-xxlarge").length&&e("head").append('<meta class="foundation-mq-xxlarge">'),r.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,r.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),r.prototype.deviceIsIOS4=r.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r.prototype.deviceIsIOSWithBadTarget=r.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),r.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},r.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},r.prototype.sendClick=function(e,i){var r,o;n.activeElement&&n.activeElement!==e&&n.activeElement.blur(),o=i.changedTouches[0],r=n.createEvent("MouseEvents"),r.initMouseEvent("click",!0,!0,t,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),r.forwardedTouchEvent=!0,e.dispatchEvent(r)},r.prototype.focus=function(e){var t;this.deviceIsIOS&&e.setSelectionRange?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},r.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},r.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},r.prototype.onTouchStart=function(e){var n,i,r;if(e.targetTouches.length>1)return!0;if(n=this.getTargetElementFromEventTarget(e.target),i=e.targetTouches[0],this.deviceIsIOS){if(r=t.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!this.deviceIsIOS4){if(i.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(n)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=n,this.touchStartX=i.pageX,this.touchStartY=i.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},r.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},r.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},r.prototype.findControl=function(e){return e.control!==i?e.control:e.htmlFor?n.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},r.prototype.onTouchEnd=function(e){var i,r,o,s,a,l=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.lastClickTime=e.timeStamp,r=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(a=e.changedTouches[0],l=n.elementFromPoint(a.pageX-t.pageXOffset,a.pageY-t.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),o=l.tagName.toLowerCase(),"label"===o){if(i=this.findControl(l)){if(this.focus(l),this.deviceIsAndroid)return!1;l=i}}else if(this.needsFocus(l))return e.timeStamp-r>100||this.deviceIsIOS&&t.top!==t&&"input"===o?(this.targetElement=null,!1):(this.focus(l),this.deviceIsIOS4&&"select"===o||(this.targetElement=null,e.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(s=l.fastClickScrollParent,s&&s.fastClickLastScrollTop!==s.scrollTop)?!0:(this.needsClick(l)||(e.preventDefault(),this.sendClick(l,e)),!1)},r.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},r.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},r.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},r.prototype.destroy=function(){var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},r.notNeeded=function(e){var i;if("undefined"==typeof t.ontouchstart)return!0;if(/Chrome\/[0-9]+/.test(navigator.userAgent)){if(!r.prototype.deviceIsAndroid)return!0;if(i=n.querySelector("meta[name=viewport]"),i&&-1!==i.content.indexOf("user-scalable=no"))return!0}return"none"===e.style.msTouchAction?!0:!1},r.attach=function(e){return new r(e)},"undefined"!=typeof define&&define.amd?define("foundation",[],function(){return r}):"undefined"!=typeof module&&module.exports?(module.exports=r.attach,module.exports.FastClick=r):t.FastClick=r,"undefined"!=typeof r&&r.attach(n.body);var s=function(t,i){return"string"==typeof t?e(i?i.querySelectorAll(t):n.querySelectorAll(t)):e(t,i)};t.matchMedia=t.matchMedia||function(e){var t,n=e.documentElement,i=n.firstElementChild||n.firstChild,r=e.createElement("body"),o=e.createElement("div");return o.id="mq-test-1",o.style.cssText="position:absolute;top:-100em",r.style.background="none",r.appendChild(o),function(e){return o.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',n.insertBefore(r,i),t=42===o.offsetWidth,n.removeChild(r),{matches:t,media:e}}}(n),function(){function e(){n&&(o(e),jQuery.fx.tick())}for(var n,i=0,r=["webkit","moz"],o=t.requestAnimationFrame,s=t.cancelAnimationFrame;i<r.length&&!o;i++)o=t[r[i]+"RequestAnimationFrame"],s=s||t[r[i]+"CancelAnimationFrame"]||t[r[i]+"CancelRequestAnimationFrame"];o?(t.requestAnimationFrame=o,t.cancelAnimationFrame=s,jQuery.fx.timer=function(t){t()&&jQuery.timers.push(t)&&!n&&(n=!0,e())},jQuery.fx.stop=function(){n=!1}):(t.requestAnimationFrame=function(e){var n=(new Date).getTime(),r=Math.max(0,16-(n-i)),o=t.setTimeout(function(){e(n+r)},r);return i=n+r,o},t.cancelAnimationFrame=function(e){clearTimeout(e)})}(jQuery),t.Foundation={name:"Foundation",version:"5.0.0",media_queries:{small:s(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:s(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:s(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:s(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:s(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:e("<style></style>").appendTo("head")[0].sheet,init:function(e,t,n,i,r){var o=[e,n,i,r],a=[];if(this.rtl=/rtl/i.test(s("html").attr("dir")),this.scope=e||this.scope,t&&"string"==typeof t&&!/reflow/i.test(t))this.libs.hasOwnProperty(t)&&a.push(this.init_lib(t,o));else for(var l in this.libs)a.push(this.init_lib(l,t));return e},init_lib:function(e,t){return this.libs.hasOwnProperty(e)?(this.patch(this.libs[e]),t&&t.hasOwnProperty(e)?this.libs[e].init.apply(this.libs[e],[this.scope,t[e]]):this.libs[e].init.apply(this.libs[e],t)):function(){}},patch:function(e){e.scope=this.scope,e.data_options=this.lib_methods.data_options,e.bindings=this.lib_methods.bindings,e.S=s,e.rtl=this.rtl},inherit:function(e,t){for(var n=t.split(" "),i=n.length-1;i>=0;i--)this.lib_methods.hasOwnProperty(n[i])&&(this.libs[e.name][n[i]]=this.lib_methods[n[i]])},random_str:function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));for(var n="",i=0;e>i;i++)n+=t[Math.floor(Math.random()*t.length)];return n},libs:{},lib_methods:{throttle:function(e,t){var n=null;return function(){var i=this,r=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(i,r)},t)}},data_options:function(t){function n(e){return!isNaN(e-0)&&null!==e&&""!==e&&e!==!1&&e!==!0}function i(t){return"string"==typeof t?e.trim(t):t}var r,o,s,a,l={},d=t.data("options");if("object"==typeof d)return d;for(s=(d||":").split(";"),a=s.length,r=a-1;r>=0;r--)o=s[r].split(":"),/true/i.test(o[1])&&(o[1]=!0),/false/i.test(o[1])&&(o[1]=!1),n(o[1])&&(o[1]=parseInt(o[1],10)),2===o.length&&o[0].length>0&&(l[i(o[0])]=i(o[1]));return l},delay:function(e,t){return setTimeout(e,t)},empty:function(e){if(e.length&&e.length>0)return!1;if(e.length&&0===e.length)return!0;for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0},register_media:function(t,n){Foundation.media_queries[t]===i&&(e("head").append('<meta class="'+n+'">'),Foundation.media_queries[t]=o(e("."+n).css("font-family")))},addCustomRule:function(e,t){if(t===i)Foundation.stylesheet.insertRule(e,Foundation.stylesheet.cssRules.length);else{var n=Foundation.media_queries[t];n!==i&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[t]+"{ "+e+" }")}},loaded:function(e,t){function n(){t(e[0])}function i(){if(this.one("load",n),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var e=this.attr("src"),t=e.match(/\?/)?"&":"?";t+="random="+(new Date).getTime(),this.attr("src",e+t)}}return e.attr("src")?void(e[0].complete||4===e[0].readyState?n():i.call(e)):void n()},bindings:function(t,n){var i=this,r=!s(this).data(this.name+"-init");return"string"==typeof t?this[t].call(this):void(s(this.scope).is("[data-"+this.name+"]")?(s(this.scope).data(this.name+"-init",e.extend({},this.settings,n||t,this.data_options(s(this.scope)))),r&&this.events(this.scope)):s("[data-"+this.name+"]",this.scope).each(function(){var r=!s(this).data(i.name+"-init");s(this).data(i.name+"-init",e.extend({},i.settings,n||t,i.data_options(s(this)))),r&&i.events(this)}))}}},e.fn.foundation=function(){var e=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(e)),this})}}(jQuery,this,this.document),function(e){Foundation.libs.alert={name:"alert",version:"5.0.0",settings:{animation:"fadeOut",speed:300,callback:function(){}},init:function(e,t,n){this.bindings(t,n)},events:function(){e(this.scope).off(".alert").on("click.fndtn.alert","[data-alert] a.close",function(t){var n=e(this).closest("[data-alert]"),i=n.data("alert-init");t.preventDefault(),n[i.animation](i.speed,function(){e(this).trigger("closed").remove(),i.callback()})})},reflow:function(){}}}(jQuery,this,this.document),define("alerts",["foundation"],function(){}),function(e,t){Foundation.libs.dropdown={name:"dropdown",version:"5.0.0",settings:{active_class:"open",is_hover:!1,opened:function(){},closed:function(){}},init:function(e,t,n){Foundation.inherit(this,"throttle"),this.bindings(t,n)},events:function(){var n=this;e(this.scope).off(".dropdown").on("click.fndtn.dropdown","[data-dropdown]",function(t){var i=e(this).data("dropdown-init");t.preventDefault(),(!i.is_hover||Modernizr.touch)&&n.toggle(e(this))}).on("mouseenter.fndtn.dropdown","[data-dropdown], [data-dropdown-content]",function(){var t=e(this);if(clearTimeout(n.timeout),t.data("dropdown"))var i=e("#"+t.data("dropdown")),r=t;else{var i=t;r=e("[data-dropdown='"+i.attr("id")+"']")}var o=r.data("dropdown-init");o.is_hover&&n.open.apply(n,[i,r])}).on("mouseleave.fndtn.dropdown","[data-dropdown], [data-dropdown-content]",function(){var t=e(this);n.timeout=setTimeout(function(){if(t.data("dropdown")){var i=t.data("dropdown-init");i.is_hover&&n.close.call(n,e("#"+t.data("dropdown")))}else{var r=e('[data-dropdown="'+e(this).attr("id")+'"]'),i=r.data("dropdown-init");i.is_hover&&n.close.call(n,t)}}.bind(this),150)}).on("click.fndtn.dropdown",function(t){var i=e(t.target).closest("[data-dropdown-content]");if(!e(t.target).data("dropdown")&&!e(t.target).parent().data("dropdown"))return!e(t.target).data("revealId")&&i.length>0&&(e(t.target).is("[data-dropdown-content]")||e.contains(i.first()[0],t.target))?void t.stopPropagation():void n.close.call(n,e("[data-dropdown-content]"))}).on("opened.fndtn.dropdown","[data-dropdown-content]",this.settings.opened).on("closed.fndtn.dropdown","[data-dropdown-content]",this.settings.closed),e(t).off(".dropdown").on("resize.fndtn.dropdown",n.throttle(function(){n.resize.call(n)},50)).trigger("resize")},close:function(t){var n=this;t.each(function(){e(this).hasClass(n.settings.active_class)&&(e(this).css(Foundation.rtl?"right":"left","-99999px").removeClass(n.settings.active_class),e(this).trigger("closed"))})},open:function(e,t){this.css(e.addClass(this.settings.active_class),t),e.trigger("opened")},toggle:function(t){var n=e("#"+t.data("dropdown"));0!==n.length&&(this.close.call(this,e("[data-dropdown-content]").not(n)),n.hasClass(this.settings.active_class)?this.close.call(this,n):(this.close.call(this,e("[data-dropdown-content]")),this.open.call(this,n,t)))},resize:function(){var t=e("[data-dropdown-content].open"),n=e("[data-dropdown='"+t.attr("id")+"']");t.length&&n.length&&this.css(t,n)},css:function(n,i){var r=n.offsetParent(),o=i.offset();if(o.top-=r.offset().top,o.left-=r.offset().left,this.small())n.css({position:"absolute",width:"95%","max-width":"none",top:o.top+i.outerHeight()}),n.css(Foundation.rtl?"right":"left","2.5%");else{if(!Foundation.rtl&&e(t).width()>n.outerWidth()+i.offset().left){var s=o.left;n.hasClass("right")&&n.removeClass("right")}else{n.hasClass("right")||n.addClass("right");var s=o.left-(n.outerWidth()-i.outerWidth())}n.attr("style","").css({position:"absolute",top:o.top+i.outerHeight(),left:s})}return n},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches
},off:function(){e(this.scope).off(".fndtn.dropdown"),e("html, body").off(".fndtn.dropdown"),e(t).off(".fndtn.dropdown"),e("[data-dropdown-content]").off(".fndtn.dropdown"),this.settings.init=!1},reflow:function(){}}}(jQuery,this,this.document),define("dropdown",["foundation"],function(){}),function(e){Foundation.libs.tab={name:"tab",version:"5.0.1",settings:{active_class:"active"},init:function(e,t,n){this.bindings(t,n)},events:function(){e(this.scope).off(".tab").on("click.fndtn.tab","[data-tab] > dd > a",function(t){t.preventDefault();var n=e(this).parent(),i=e("#"+this.href.split("#")[1]),r=n.siblings(),o=n.closest("[data-tab]").data("tab-init");n.addClass(o.active_class),r.removeClass(o.active_class),i.siblings().removeClass(o.active_class).end().addClass(o.active_class)})},off:function(){},reflow:function(){}}}(jQuery,this,this.document),define("tabs",["foundation"],function(){}),function(e){Foundation.libs.tooltip={name:"tooltip",version:"5.0.0",settings:{additional_inheritable_classes:[],tooltip_class:".tooltip",append_to:"body",touch_close_text:"Tap To Close",disable_for_touch:!1,tip_template:function(e,t){return'<span data-selector="'+e+'" class="'+Foundation.libs.tooltip.settings.tooltip_class.substring(1)+'">'+t+'<span class="nub"></span></span>'}},cache:{},init:function(e,t,n){this.bindings(t,n)},events:function(){var t=this;Modernizr.touch?e(this.scope).off(".tooltip").on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip","[data-tooltip]",function(n){var i=e.extend({},t.settings,t.data_options(e(this)));i.disable_for_touch||(n.preventDefault(),e(i.tooltip_class).hide(),t.showOrCreateTip(e(this)))}).on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip",this.settings.tooltip_class,function(t){t.preventDefault(),e(this).fadeOut(150)}):e(this.scope).off(".tooltip").on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip","[data-tooltip]",function(n){var i=e(this);/enter|over/i.test(n.type)?t.showOrCreateTip(i):("mouseout"===n.type||"mouseleave"===n.type)&&t.hide(i)})},showOrCreateTip:function(e){var t=this.getTip(e);return t&&t.length>0?this.show(e):this.create(e)},getTip:function(t){var n=this.selector(t),i=null;return n&&(i=e('span[data-selector="'+n+'"]'+this.settings.tooltip_class)),"object"==typeof i?i:!1},selector:function(e){var t=e.attr("id"),n=e.attr("data-tooltip")||e.attr("data-selector");return(t&&t.length<1||!t)&&"string"!=typeof n&&(n="tooltip"+Math.random().toString(36).substring(7),e.attr("data-selector",n)),t&&t.length>0?t:n},create:function(t){var n=e(this.settings.tip_template(this.selector(t),e("<div></div>").html(t.attr("title")).html())),i=this.inheritable_classes(t);n.addClass(i).appendTo(this.settings.append_to),Modernizr.touch&&n.append('<span class="tap-to-close">'+this.settings.touch_close_text+"</span>"),t.removeAttr("title").attr("title",""),this.show(t)},reposition:function(t,n,i){var r,o,s,a,l;if(n.css("visibility","hidden").show(),r=t.data("width"),o=n.children(".nub"),s=o.outerHeight(),a=o.outerHeight(),l=function(e,t,n,i,r,o){return e.css({top:t?t:"auto",bottom:i?i:"auto",left:r?r:"auto",right:n?n:"auto",width:o?o:"auto"}).end()},l(n,t.offset().top+t.outerHeight()+10,"auto","auto",t.offset().left,r),this.small())l(n,t.offset().top+t.outerHeight()+10,"auto","auto",12.5,e(this.scope).width()),n.addClass("tip-override"),l(o,-s,"auto","auto",t.offset().left);else{var d=t.offset().left;Foundation.rtl&&(d=t.offset().left+t.offset().width-n.outerWidth()),l(n,t.offset().top+t.outerHeight()+10,"auto","auto",d,r),n.removeClass("tip-override"),i&&i.indexOf("tip-top")>-1?l(n,t.offset().top-n.outerHeight(),"auto","auto",d,r).removeClass("tip-override"):i&&i.indexOf("tip-left")>-1?l(n,t.offset().top+t.outerHeight()/2-2.5*s,"auto","auto",t.offset().left-n.outerWidth()-s,r).removeClass("tip-override"):i&&i.indexOf("tip-right")>-1&&l(n,t.offset().top+t.outerHeight()/2-2.5*s,"auto","auto",t.offset().left+t.outerWidth()+s,r).removeClass("tip-override")}n.css("visibility","visible").hide()},small:function(){return matchMedia(Foundation.media_queries.small).matches},inheritable_classes:function(t){var n=["tip-top","tip-left","tip-bottom","tip-right","noradius"].concat(this.settings.additional_inheritable_classes),i=t.attr("class"),r=i?e.map(i.split(" "),function(t){return-1!==e.inArray(t,n)?t:void 0}).join(" "):"";return e.trim(r)},show:function(e){var t=this.getTip(e);this.reposition(e,t,e.attr("class")),t.fadeIn(150)},hide:function(e){var t=this.getTip(e);t.fadeOut(150)},reload:function(){var t=e(this);return t.data("fndtn-tooltips")?t.foundationTooltips("destroy").foundationTooltips("init"):t.foundationTooltips("init")},off:function(){e(this.scope).off(".fndtn.tooltip"),e(this.settings.tooltip_class).each(function(t){e("[data-tooltip]").get(t).attr("title",e(this).text())}).remove()},reflow:function(){}}}(jQuery,this,this.document),define("tooltip",["foundation"],function(){}),function(e,t,n){Foundation.libs.abide={name:"abide",version:"5.0.0",settings:{focus_on_invalid:!0,timeout:1e3,patterns:{alpha:/[a-zA-Z]+/,alpha_numeric:/[a-zA-Z0-9]+/,integer:/-?\d+/,number:/-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?/,password:/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,url:/(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/,datetime:/([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))/,time:/(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}/,dateISO:/\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/,month_day_year:/(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.](19|20)\d\d/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/}},timer:null,init:function(e,t,n){this.bindings(t,n)},events:function(t){{var n=this,i=e(t).attr("novalidate","novalidate");i.data("abide-init")}i.off(".abide").on("submit.fndtn.abide validate.fndtn.abide",function(t){var i=/ajax/i.test(e(this).attr("data-abide"));return n.validate(e(this).find("input, textarea, select").get(),t,i)}).find("input, textarea, select").off(".abide").on("blur.fndtn.abide change.fndtn.abide",function(e){n.validate([this],e)}).on("keydown.fndtn.abide",function(t){var i=e(this).closest("form").data("abide-init");clearTimeout(n.timer),n.timer=setTimeout(function(){n.validate([this],t)}.bind(this),i.timeout)})},validate:function(t,n,i){for(var r=this.parse_patterns(t),o=r.length,s=e(t[0]).closest("form"),a=/submit/.test(n.type),l=0;o>l;l++)if(!r[l]&&(a||i))return this.settings.focus_on_invalid&&t[l].focus(),s.trigger("invalid"),e(t[l]).closest("form").attr("data-invalid",""),!1;return(a||i)&&s.trigger("valid"),s.removeAttr("data-invalid"),i?!1:!0},parse_patterns:function(e){for(var t=e.length,n=[],i=t-1;i>=0;i--)n.push(this.pattern(e[i]));return this.check_validation_and_apply_styles(n)},pattern:function(e){var t=e.getAttribute("type"),n="string"==typeof e.getAttribute("required");if(this.settings.patterns.hasOwnProperty(t))return[e,this.settings.patterns[t],n];var i=e.getAttribute("pattern")||"";return this.settings.patterns.hasOwnProperty(i)&&i.length>0?[e,this.settings.patterns[i],n]:i.length>0?[e,new RegExp(i),n]:(i=/.*/,[e,i,n])},check_validation_and_apply_styles:function(t){for(var n=t.length,i=[],r=n-1;r>=0;r--){var o=t[r][0],s=t[r][2],a=o.value,l=o.getAttribute("data-equalto"),d="radio"===o.type,c=s?o.value.length>0:!0;d&&s?i.push(this.valid_radio(o,s)):l&&s?i.push(this.valid_equal(o,s)):t[r][1].test(a)&&c||!s&&o.value.length<1?(e(o).removeAttr("data-invalid").parent().removeClass("error"),i.push(!0)):(e(o).attr("data-invalid","").parent().addClass("error"),i.push(!1))}return i},valid_radio:function(t){for(var i=t.getAttribute("name"),r=n.getElementsByName(i),o=r.length,s=!1,a=0;o>a;a++)r[a].checked&&(s=!0);for(var a=0;o>a;a++)s?e(r[a]).removeAttr("data-invalid").parent().removeClass("error"):e(r[a]).attr("data-invalid","").parent().addClass("error");return s},valid_equal:function(t){var i=n.getElementById(t.getAttribute("data-equalto")).value,r=t.value,o=i===r;return o?e(t).removeAttr("data-invalid").parent().removeClass("error"):e(t).attr("data-invalid","").parent().addClass("error"),o}}}(jQuery,this,this.document),define("abide",["foundation"],function(){}),window.Modernizr=function(e,t,n){function i(e){b.cssText=e}function r(e,t){return i(C.join(e+";")+(t||""))}function o(e,t){return typeof e===t}function s(e,t){return!!~(""+e).indexOf(t)}function a(e,t){for(var i in e){var r=e[i];if(!s(r,"-")&&b[r]!==n)return"pfx"==t?r:!0}return!1}function l(e,t,i){for(var r in e){var s=t[e[r]];if(s!==n)return i===!1?e[r]:o(s,"function")?s.bind(i||t):s}return!1}function d(e,t,n){var i=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+_.join(i+" ")+i).split(" ");return o(t,"string")||o(t,"undefined")?a(r,t):(r=(e+" "+D.join(i+" ")+i).split(" "),l(r,t,n))}function c(){p.input=function(n){for(var i=0,r=n.length;r>i;i++)E[n[i]]=!!(n[i]in w);return E.list&&(E.list=!(!t.createElement("datalist")||!e.HTMLDataListElement)),E}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),p.inputtypes=function(e){for(var i,r,o,s=0,a=e.length;a>s;s++)w.setAttribute("type",r=e[s]),i="text"!==w.type,i&&(w.value=x,w.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(r)&&w.style.WebkitAppearance!==n?(v.appendChild(w),o=t.defaultView,i=o.getComputedStyle&&"textfield"!==o.getComputedStyle(w,null).WebkitAppearance&&0!==w.offsetHeight,v.removeChild(w)):/^(search|tel)$/.test(r)||(i=/^(url|email)$/.test(r)?w.checkValidity&&w.checkValidity()===!1:w.value!=x)),A[e[s]]=!!i;return A}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var u,h,f="2.8.3",p={},m=!0,v=t.documentElement,g="modernizr",y=t.createElement(g),b=y.style,w=t.createElement("input"),x=":)",T={}.toString,C=" -webkit- -moz- -o- -ms- ".split(" "),k="Webkit Moz O ms",_=k.split(" "),D=k.toLowerCase().split(" "),S={svg:"http://www.w3.org/2000/svg"},M={},A={},E={},F=[],j=F.slice,O=function(e,n,i,r){var o,s,a,l,d=t.createElement("div"),c=t.body,u=c||t.createElement("body");if(parseInt(i,10))for(;i--;)a=t.createElement("div"),a.id=r?r[i]:g+(i+1),d.appendChild(a);return o=["&#173;",'<style id="s',g,'">',e,"</style>"].join(""),d.id=g,(c?d:u).innerHTML+=o,u.appendChild(d),c||(u.style.background="",u.style.overflow="hidden",l=v.style.overflow,v.style.overflow="hidden",v.appendChild(u)),s=n(d,e),c?d.parentNode.removeChild(d):(u.parentNode.removeChild(u),v.style.overflow=l),!!s},N=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t)&&n(t).matches||!1;var i;return O("@media "+t+" { #"+g+" { position: absolute; } }",function(t){i="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),i},I=function(){function e(e,r){r=r||t.createElement(i[e]||"div"),e="on"+e;var s=e in r;return s||(r.setAttribute||(r=t.createElement("div")),r.setAttribute&&r.removeAttribute&&(r.setAttribute(e,""),s=o(r[e],"function"),o(r[e],"undefined")||(r[e]=n),r.removeAttribute(e))),r=null,s}var i={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),P={}.hasOwnProperty;h=o(P,"undefined")||o(P.call,"undefined")?function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")}:function(e,t){return P.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=j.call(arguments,1),i=function(){if(this instanceof i){var r=function(){};r.prototype=t.prototype;var o=new r,s=t.apply(o,n.concat(j.call(arguments)));return Object(s)===s?s:o}return t.apply(e,n.concat(j.call(arguments)))};return i}),M.flexbox=function(){return d("flexWrap")},M.flexboxlegacy=function(){return d("boxDirection")},M.canvas=function(){var e=t.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},M.canvastext=function(){return!(!p.canvas||!o(t.createElement("canvas").getContext("2d").fillText,"function"))},M.webgl=function(){return!!e.WebGLRenderingContext},M.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:O(["@media (",C.join("touch-enabled),("),g,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},M.geolocation=function(){return"geolocation"in navigator},M.postmessage=function(){return!!e.postMessage},M.websqldatabase=function(){return!!e.openDatabase},M.indexedDB=function(){return!!d("indexedDB",e)},M.hashchange=function(){return I("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},M.history=function(){return!(!e.history||!history.pushState)},M.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},M.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},M.rgba=function(){return i("background-color:rgba(150,255,150,.5)"),s(b.backgroundColor,"rgba")},M.hsla=function(){return i("background-color:hsla(120,40%,100%,.5)"),s(b.backgroundColor,"rgba")||s(b.backgroundColor,"hsla")},M.multiplebgs=function(){return i("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(b.background)},M.backgroundsize=function(){return d("backgroundSize")},M.borderimage=function(){return d("borderImage")},M.borderradius=function(){return d("borderRadius")},M.boxshadow=function(){return d("boxShadow")},M.textshadow=function(){return""===t.createElement("div").style.textShadow},M.opacity=function(){return r("opacity:.55"),/^0.55$/.test(b.opacity)},M.cssanimations=function(){return d("animationName")},M.csscolumns=function(){return d("columnCount")},M.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return i((e+"-webkit- ".split(" ").join(t+e)+C.join(n+e)).slice(0,-e.length)),s(b.backgroundImage,"gradient")},M.cssreflections=function(){return d("boxReflect")},M.csstransforms=function(){return!!d("transform")},M.csstransforms3d=function(){var e=!!d("perspective");return e&&"webkitPerspective"in v.style&&O("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),e},M.csstransitions=function(){return d("transition")},M.fontface=function(){var e;return O('@font-face {font-family:"font";src:url("https://")}',function(n,i){var r=t.getElementById("smodernizr"),o=r.sheet||r.styleSheet,s=o?o.cssRules&&o.cssRules[0]?o.cssRules[0].cssText:o.cssText||"":"";e=/src/i.test(s)&&0===s.indexOf(i.split(" ")[0])}),e},M.generatedcontent=function(){var e;return O(["#",g,"{font:0/0 a}#",g,':after{content:"',x,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},M.video=function(){var e=t.createElement("video"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(i){}return n},M.audio=function(){var e=t.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(i){}return n},M.localstorage=function(){try{return localStorage.setItem(g,g),localStorage.removeItem(g),!0}catch(e){return!1}},M.sessionstorage=function(){try{return sessionStorage.setItem(g,g),sessionStorage.removeItem(g),!0}catch(e){return!1}},M.webworkers=function(){return!!e.Worker},M.applicationcache=function(){return!!e.applicationCache},M.svg=function(){return!!t.createElementNS&&!!t.createElementNS(S.svg,"svg").createSVGRect},M.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==S.svg},M.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(T.call(t.createElementNS(S.svg,"animate")))},M.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(T.call(t.createElementNS(S.svg,"clipPath")))};for(var R in M)h(M,R)&&(u=R.toLowerCase(),p[u]=M[R](),F.push((p[u]?"":"no-")+u));return p.input||c(),p.addTest=function(e,t){if("object"==typeof e)for(var i in e)h(e,i)&&p.addTest(i,e[i]);else{if(e=e.toLowerCase(),p[e]!==n)return p;t="function"==typeof t?t():t,"undefined"!=typeof m&&m&&(v.className+=" "+(t?"":"no-")+e),p[e]=t}return p},i(""),y=w=null,function(e,t){function n(e,t){var n=e.createElement("p"),i=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function i(){var e=y.elements;return"string"==typeof e?e.split(" "):e}function r(e){var t=g[e[m]];return t||(t={},v++,e[m]=v,g[v]=t),t}function o(e,n,i){if(n||(n=t),c)return n.createElement(e);i||(i=r(n));var o;return o=i.cache[e]?i.cache[e].cloneNode():p.test(e)?(i.cache[e]=i.createElem(e)).cloneNode():i.createElem(e),!o.canHaveChildren||f.test(e)||o.tagUrn?o:i.frag.appendChild(o)}function s(e,n){if(e||(e=t),c)return e.createDocumentFragment();n=n||r(e);for(var o=n.frag.cloneNode(),s=0,a=i(),l=a.length;l>s;s++)o.createElement(a[s]);return o}function a(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return y.shivMethods?o(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(y,t.frag)}function l(e){e||(e=t);var i=r(e);return!y.shivCSS||d||i.hasCSS||(i.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),c||a(e,i),e}var d,c,u="3.7.0",h=e.html5||{},f=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,m="_html5shiv",v=0,g={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",d="hidden"in e,c=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){d=!0,c=!0}}();var y={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:u,shivCSS:h.shivCSS!==!1,supportsUnknownElements:c,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:l,createElement:o,createDocumentFragment:s};e.html5=y,l(t)}(this,t),p._version=f,p._prefixes=C,p._domPrefixes=D,p._cssomPrefixes=_,p.mq=N,p.hasEvent=I,p.testProp=function(e){return a([e])},p.testAllProps=d,p.testStyles=O,p.prefixed=function(e,t,n){return t?d(e,t,n):d(e,"pfx")},v.className=v.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(m?" js "+F.join(" "):""),p}(this,this.document),define("modernizr",function(){}),function(e,t){function n(t,n){var r,o,s,a=t.nodeName.toLowerCase();return"area"===a?(r=t.parentNode,o=r.name,t.href&&o&&"map"===r.nodeName.toLowerCase()?(s=e("img[usemap=#"+o+"]")[0],!!s&&i(s)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var r=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"@VERSION",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,r,o=e(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(o.css("zIndex"),10),!isNaN(r)&&0!==r))return r;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,i){function r(t,n,i,r){return e.each(o,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var o="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?a["inner"+i].call(this):this.each(function(){e(this).css(s,r(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?a["outer"+i].call(this,t):this.each(function(){e(this).css(s,r(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var r,o=e.ui[t].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(e,t,n){var i,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return t[i]>0?!0:(t[i]=1,r=t[i]>0,t[i]=0,r)}})}(jQuery),define("jqueryui",["jquery"],function(e){return function(){var t;return t||e.jquery}}(this)),function(e,t){var n=0,i=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(o){}r(t)},e.widget=function(t,n,i){var r,o,s,a,l={},d=t.split(".")[0];t=t.split(".")[1],r=d+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[d]=e[d]||{},o=e[d][t],s=e[d][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),a=new n,a.options=e.widget.extend({},a.options),e.each(i,function(t,i){return e.isFunction(i)?void(l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}()):void(l[t]=i)}),s.prototype=e.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix||t:t},l,{constructor:s,namespace:d,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete o._childConstructors):n._childConstructors.push(s),e.widget.bridge(t,s)},e.widget.extend=function(n){for(var r,o,s=i.call(arguments,1),a=0,l=s.length;l>a;a++)for(r in s[a])o=s[a][r],s[a].hasOwnProperty(r)&&o!==t&&(n[r]=e.isPlainObject(o)?e.isPlainObject(n[r])?e.widget.extend({},n[r],o):e.widget.extend({},o):o);return n},e.widget.bridge=function(n,r){var o=r.prototype.widgetFullName||n;e.fn[n]=function(s){var a="string"==typeof s,l=i.call(arguments,1),d=this;return s=!a&&l.length?e.widget.extend.apply(null,[s].concat(l)):s,this.each(a?function(){var i,r=e.data(this,o);return r?e.isFunction(r[s])&&"_"!==s.charAt(0)?(i=r[s].apply(r,l),i!==r&&i!==t?(d=i&&i.jquery?d.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+s+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+s+"'")}:function(){var t=e.data(this,o);t?t.option(s||{})._init():e.data(this,o,new r(s,this))}),d}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var r,o,s,a=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(a={},r=n.split("."),n=r.shift(),r.length){for(o=a[n]=e.widget.extend({},this.options[n]),s=0;s<r.length-1;s++)o[r[s]]=o[r[s]]||{},o=o[r[s]];if(n=r.pop(),1===arguments.length)return o[n]===t?null:o[n];o[n]=i}else{if(1===arguments.length)return this.options[n]===t?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,s){function a(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?o[s]:s).apply(o,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),d=l[1]+o.eventNamespace,c=l[2];c?r.delegate(c,d,a):n.bind(d,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,s=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var s,a=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),s=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),s&&e.effects&&e.effects.effect[a]?i[t](r):a!==t&&i[a]?i[a](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}})}(jQuery),define("widgetFactory",["jqueryui"],function(e){return function(){var t;return t||e.jquery}}(this)),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"@VERSION",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)
}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,o="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return r&&!o&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),define("mouseInteraction",["jqueryui","widgetFactory"],function(e){return function(){var t;return t||e.jquery}}(this)),function(e){function t(e,t,n){return e>t&&t+n>e}function n(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"@VERSION",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||n(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=null,r=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,o.widgetName+"-item")===o?(i=e(this),!1):void 0}),e.data(t.target,o.widgetName+"-item")===o&&(i=e(t.target)),i&&(!this.options.handle||n||(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(r=!0)}),r))?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,n,i){var r,o,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",s.cursor),this.storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(o)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,r,o,s=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(t.pageY-e(document).scrollTop()<s.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed)),t.pageX-e(document).scrollLeft()<s.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],r=i.item[0],o=this._intersectsWithPointer(i),o&&i.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==r&&!e.contains(this.placeholder[0],r)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],r):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=this.placeholder.offset(),o=this.options.axis,s={};o&&"x"!==o||(s.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(s.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=e.left,s=o+e.width,a=e.top,l=a+e.height,d=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||i+d>a&&l>i+d,h="y"===this.options.axis||t+c>o&&s>t+c,f=u&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?f:o<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&a<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var n="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=n&&i,o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return r?this.floating?s&&"right"===s||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(e){var n=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:r&&("down"===r&&n||"up"===r&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function n(){a.push(this)}var i,r,o,s,a=[],l=[],d=this._connectWith();if(d&&t)for(i=d.length-1;i>=0;i--)for(o=e(d[i]),r=o.length-1;r>=0;r--)s=e.data(o[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&l.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(n);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,r,o,s,a,l,d,c=this.items,u=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(r=e(h[n]),i=r.length-1;i>=0;i--)o=e.data(r[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(n=u.length-1;n>=0;n--)for(s=u[n][1],a=u[n][0],i=0,d=a.length;d>i;i++)l=e(a[i]),l.data(this.widgetName+"-item",s),c.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,r,o;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=r.outerWidth(),i.height=r.outerHeight()),o=r.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+i+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(r)}):"img"===i&&r.attr("src",t.currentItem.attr("src")),n||r.css("visibility","hidden"),r},update:function(e,r){(!n||i.forcePlaceholderSize)&&(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(i){var r,o,s,a,l,d,c,u,h,f,p=null,m=null;for(r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(p&&e.contains(this.containers[r].element[0],p.element[0]))continue;p=this.containers[r],m=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",i,this._uiHash(this)),this.containers[r].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",i,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(s=1e4,a=null,f=p.floating||n(this.currentItem),l=f?"left":"top",d=f?"width":"height",c=this.positionAbs[l]+this.offset.click[l],o=this.items.length-1;o>=0;o--)e.contains(this.containers[m].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!f||t(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(u=this.items[o].item.offset()[l],h=!1,Math.abs(u-c)>Math.abs(u+this.items[o][d]-c)&&(h=!0,u+=this.items[o][d]),Math.abs(u-c)<s&&(s=Math.abs(u-c),a=this.items[o],this.direction=h?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;a?this._rearrange(i,a,null,!0):this._rearrange(i,null,this.containers[m].element,!0),this._trigger("change",i,this._uiHash()),this.containers[m]._trigger("change",i,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",i,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],n=e(r.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(t){var n,i,r=this.options,o=t.pageX,s=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((s-this.originalPageY)/r.grid[1])*r.grid[1],s=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,i=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){function n(e,t,n){return function(i){n._trigger(e,i,t._uiHash(t))}}this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||r.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;i<r.length;i++)r[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;i<r.length;i++)r[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),define("sortable",["jqueryui","widgetFactory","mouseInteraction"],function(e){return function(){var t;return t||e.jquery}}(this)),function(e){var t=0,n={},i={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"@VERSION",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),void("disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var n=e.ui.keyCode,i=this.headers.length,r=this.headers.index(t.target),o=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:o=this.headers[(r+1)%i];break;case n.LEFT:case n.UP:o=this.headers[(r-1+i)%i];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:o=this.headers[0];break;case n.END:o=this.headers[i-1]}o&&(e(t.target).attr("tabIndex",-1),e(o).attr("tabIndex",0),o.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var n,i=this.options,r=i.heightStyle,o=this.element.parent(),s=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var n=e(this),i=n.attr("id"),r=n.next(),o=r.attr("id");i||(i=s+"-header-"+t,n.attr("id",i)),o||(o=s+"-panel-"+t,r.attr("id",o)),n.attr("aria-controls",o),r.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===r?(n=o.height(),this.element.siblings(":visible").each(function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(n-=t.outerHeight(!0))}),this.headers.each(function(){n-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===r&&(n=0,this.headers.next().each(function(){n=Math.max(n,e(this).css("height","").height())
}).height(n))},_activate:function(t){var n=this._findActive(t)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,i=this.active,r=e(t.currentTarget),o=r[0]===i[0],s=o&&n.collapsible,a=s?e():r.next(),l=i.next(),d={oldHeader:i,oldPanel:l,newHeader:s?e():r,newPanel:a};t.preventDefault(),o&&!n.collapsible||this._trigger("beforeActivate",t,d)===!1||(n.active=s?!1:this.headers.index(r),this.active=o?e():r,this._toggle(d),i.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),o||(r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),r.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var n=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=i,this.options.animate?this._animate(n,i,t):(i.hide(),n.show(),this._toggleComplete(t)),i.attr({"aria-hidden":"true"}),i.prev().attr("aria-selected","false"),n.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):n.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),n.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,r){var o,s,a,l=this,d=0,c=e.length&&(!t.length||e.index()<t.index()),u=this.options.animate||{},h=c&&u.down||u,f=function(){l._toggleComplete(r)};return"number"==typeof h&&(a=h),"string"==typeof h&&(s=h),s=s||h.easing||u.easing,a=a||h.duration||u.duration,t.length?e.length?(o=e.show().outerHeight(),t.animate(n,{duration:a,easing:s,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(i,{duration:a,easing:s,complete:f,step:function(e,n){n.now=Math.round(e),"height"!==n.prop?d+=n.now:"content"!==l.options.heightStyle&&(n.now=Math.round(o-t.outerHeight()-d),d=0)}})):t.animate(n,a,s,f):e.animate(i,a,s,f)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),define("accordion",["jqueryui","widgetFactory"],function(e){return function(){var t;return t||e.jquery}}(this)),function(e){e.isScrollToFixed=function(t){return!!e(t).data("ScrollToFixed")},e.ScrollToFixed=function(t,n){function i(){T.trigger("preUnfixed.ScrollToFixed"),c(),T.trigger("unfixed.ScrollToFixed"),D=-1,C=T.offset().top,k=T.offset().left,v.options.offsets&&(k+=T.offset().left-T.position().left),-1==_&&(_=k),g=T.css("position"),x=!0,-1!=v.options.bottom&&(T.trigger("preFixed.ScrollToFixed"),l(),T.trigger("fixed.ScrollToFixed"))}function r(){var e=v.options.limit;return e?"function"==typeof e?e.apply(T):e:0}function o(){return"fixed"===g}function s(){return"absolute"===g}function a(){return!(o()||s())}function l(){o()||(S.css({display:T.css("display"),width:T.outerWidth(!0),height:T.outerHeight(!0),"float":T.css("float")}),cssOptions={"z-index":v.options.zIndex,position:"fixed",top:-1==v.options.bottom?h():"",bottom:-1==v.options.bottom?"":v.options.bottom,"margin-left":"0px"},v.options.dontSetWidth||(cssOptions.width=T.width()),T.css(cssOptions),T.addClass(v.options.baseClassName),v.options.className&&T.addClass(v.options.className),g="fixed")}function d(){var e=r(),t=k;v.options.removeOffsets&&(t="",e-=C),cssOptions={position:"absolute",top:e,left:t,"margin-left":"0px",bottom:""},v.options.dontSetWidth||(cssOptions.width=T.width()),T.css(cssOptions),g="absolute"}function c(){a()||(D=-1,S.css("display","none"),T.css({"z-index":w,width:"",position:y,left:"",top:b,"margin-left":""}),T.removeClass("scroll-to-fixed-fixed"),v.options.className&&T.removeClass(v.options.className),g=null)}function u(e){e!=D&&(T.css("left",k-e),D=e)}function h(){var e=v.options.marginTop;return e?"function"==typeof e?e.apply(T):e:0}function f(){if(e.isScrollToFixed(T)){var t=x;x?a()&&(C=T.offset().top,k=T.offset().left):i();var n=e(window).scrollLeft(),f=e(window).scrollTop(),g=r();v.options.minWidth&&e(window).width()<v.options.minWidth?a()&&t||(m(),T.trigger("preUnfixed.ScrollToFixed"),c(),T.trigger("unfixed.ScrollToFixed")):v.options.maxWidth&&e(window).width()>v.options.maxWidth?a()&&t||(m(),T.trigger("preUnfixed.ScrollToFixed"),c(),T.trigger("unfixed.ScrollToFixed")):-1==v.options.bottom?g>0&&f>=g-h()?s()&&t||(m(),T.trigger("preAbsolute.ScrollToFixed"),d(),T.trigger("unfixed.ScrollToFixed")):f>=C-h()?(o()&&t||(m(),T.trigger("preFixed.ScrollToFixed"),l(),D=-1,T.trigger("fixed.ScrollToFixed")),u(n)):a()&&t||(m(),T.trigger("preUnfixed.ScrollToFixed"),c(),T.trigger("unfixed.ScrollToFixed")):g>0?f+e(window).height()-T.outerHeight(!0)>=g-(h()||-p())?o()&&(m(),T.trigger("preUnfixed.ScrollToFixed"),"absolute"===y?d():c(),T.trigger("unfixed.ScrollToFixed")):(o()||(m(),T.trigger("preFixed.ScrollToFixed"),l()),u(n),T.trigger("fixed.ScrollToFixed")):u(n)}}function p(){return v.options.bottom?v.options.bottom:0}function m(){var e=T.css("position");T.trigger("absolute"==e?"postAbsolute.ScrollToFixed":"fixed"==e?"postFixed.ScrollToFixed":"postUnfixed.ScrollToFixed")}var v=this;v.$el=e(t),v.el=t,v.$el.data("ScrollToFixed",v);var g,y,b,w,x=!1,T=v.$el,C=0,k=0,_=-1,D=-1,S=null,M=function(){T.is(":visible")&&(x=!1,f())},A=function(){window.requestAnimationFrame?requestAnimationFrame(f):f()},E=function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1};v.init=function(){v.options=e.extend({},e.ScrollToFixed.defaultOptions,n),w=T.css("z-index"),v.$el.css("z-index",v.options.zIndex),S=e("<div />"),g=T.css("position"),y=T.css("position"),b=T.css("top"),a()&&v.$el.after(S),e(window).bind("resize.ScrollToFixed",M),e(window).bind("scroll.ScrollToFixed",A),"ontouchmove"in window&&e(window).bind("touchmove.ScrollToFixed",f),v.options.preFixed&&T.bind("preFixed.ScrollToFixed",v.options.preFixed),v.options.postFixed&&T.bind("postFixed.ScrollToFixed",v.options.postFixed),v.options.preUnfixed&&T.bind("preUnfixed.ScrollToFixed",v.options.preUnfixed),v.options.postUnfixed&&T.bind("postUnfixed.ScrollToFixed",v.options.postUnfixed),v.options.preAbsolute&&T.bind("preAbsolute.ScrollToFixed",v.options.preAbsolute),v.options.postAbsolute&&T.bind("postAbsolute.ScrollToFixed",v.options.postAbsolute),v.options.fixed&&T.bind("fixed.ScrollToFixed",v.options.fixed),v.options.unfixed&&T.bind("unfixed.ScrollToFixed",v.options.unfixed),v.options.spacerClass&&S.addClass(v.options.spacerClass),T.bind("resize.ScrollToFixed",function(){S.height(T.height())}),T.bind("scroll.ScrollToFixed",function(){T.trigger("preUnfixed.ScrollToFixed"),c(),T.trigger("unfixed.ScrollToFixed"),f()}),T.bind("detach.ScrollToFixed",function(t){E(t),T.trigger("preUnfixed.ScrollToFixed"),c(),T.trigger("unfixed.ScrollToFixed"),e(window).unbind("resize.ScrollToFixed",M),e(window).unbind("scroll.ScrollToFixed",A),T.unbind(".ScrollToFixed"),S.remove(),v.$el.removeData("ScrollToFixed")}),M()},v.init()},e.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3,baseClassName:"scroll-to-fixed-fixed"},e.fn.scrollToFixed=function(t){return this.each(function(){new e.ScrollToFixed(this,t)})}}(jQuery),define("scrollToFixed",["jquery"],function(e){return function(){var t;return t||e.jquery}}(this)),function(e){"undefined"==typeof e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var n=e([0]),i=-1,r=this.length;++i<r&&(n.context=n[0]=this[i])&&t.call(n[0],i,n)!==!1;);return this}})}(jQuery),function(e,t){function n(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function i(e){function t(e){return L[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function r(e,t){for(var n=0,i=t.length;i>n;n+=1)if(s(e,t[n]))return n;return-1}function o(){var t=e(B);t.appendTo("body");var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function s(e,n){return e===n?!0:e===t||n===t?!1:null===e||null===n?!1:e.constructor===String?e+""==n+"":n.constructor===String?n+""==e+"":!1}function a(t,n){var i,r,o;if(null===t||t.length<1)return[];for(i=t.split(n),r=0,o=i.length;o>r;r+=1)i[r]=e.trim(i[r]);return i}function l(e){return e.outerWidth(!1)-e.width()}function d(n){var i="keyup-change-value";n.on("keydown",function(){e.data(n,i)===t&&e.data(n,i,n.val())}),n.on("keyup",function(){var r=e.data(n,i);r!==t&&n.val()!==r&&(e.removeData(n,i),n.trigger("keyup-change"))})}function c(n){n.on("mousemove",function(n){var i=V;(i===t||i.x!==n.pageX||i.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function u(e,n,i){i=i||t;var r;return function(){var t=arguments;window.clearTimeout(r),r=window.setTimeout(function(){n.apply(i,t)},e)}}function h(e,t){var n=u(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){r(e.target,t.get())>=0&&n(e)})}function f(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],i=e.val().length;e.focus();var r=n.offsetWidth>0||n.offsetHeight>0;r&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&(t=n.createTextRange(),t.collapse(!1),t.select()))},0)}function p(t){t=e(t)[0];var n=0,i=0;if("selectionStart"in t)n=t.selectionStart,i=t.selectionEnd-n;else if("selection"in document){t.focus();var r=document.selection.createRange();i=document.selection.createRange().text.length,r.moveStart("character",-t.value.length),n=r.text.length-i}return{offset:n,length:i}}function m(e){e.preventDefault(),e.stopPropagation()}function v(e){e.preventDefault(),e.stopImmediatePropagation()}function g(t){if(!I){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);I=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),I.attr("class","select2-sizer"),e("body").append(I)}return I.text(t.val()),I.width()}function y(t,n,i){var r,o,s=[];r=e.trim(t.attr("class")),r&&(r=""+r,e(r.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&s.push(this)})),r=e.trim(n.attr("class")),r&&(r=""+r,e(r.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(o=i(this),o&&s.push(o))})),t.attr("class",s.join(" "))}function b(e,t,n,r){var o=i(e.toUpperCase()).indexOf(i(t.toUpperCase())),s=t.length;return 0>o?void n.push(r(e)):(n.push(r(e.substring(0,o))),n.push("<span class='select2-match'>"),n.push(r(e.substring(o,o+s))),n.push("</span>"),void n.push(r(e.substring(o+s,e.length))))}function w(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function x(n){var i,r=null,o=n.quietMillis||100,s=n.url,a=this;return function(l){window.clearTimeout(i),i=window.setTimeout(function(){var i=n.data,o=s,d=n.transport||e.fn.select2.ajaxDefaults.transport,c={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},u=e.extend({},e.fn.select2.ajaxDefaults.params,c);i=i?i.call(a,l.term,l.page,l.context):null,o="function"==typeof o?o.call(a,l.term,l.page,l.context):o,r&&"function"==typeof r.abort&&r.abort(),n.params&&(e.isFunction(n.params)?e.extend(u,n.params.call(a)):e.extend(u,n.params)),e.extend(u,{url:o,dataType:n.dataType,data:i,success:function(e){var t=n.results(e,l.page,l);l.callback(t)},error:function(e,t,n){var i={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};l.callback(i)}}),r=d.call(a,u)},o)}}function T(t){var n,i,r=t,o=function(e){return""+e.text};e.isArray(r)&&(i=r,r={results:i}),e.isFunction(r)===!1&&(i=r,r=function(){return i});var s=r();return s.text&&(o=s.text,e.isFunction(o)||(n=s.text,o=function(e){return e[n]})),function(t){var n,i=t.term,s={results:[]};return""===i?void t.callback(r()):(n=function(r,s){var a,l;if(r=r[0],r.children){a={};for(l in r)r.hasOwnProperty(l)&&(a[l]=r[l]);a.children=[],e(r.children).each2(function(e,t){n(t,a.children)}),(a.children.length||t.matcher(i,o(a),r))&&s.push(a)}else t.matcher(i,o(r),r)&&s.push(r)},e(r().results).each2(function(e,t){n(t,s.results)}),void t.callback(s))}}function C(n){var i=e.isFunction(n);return function(r){var o=r.term,s={results:[]},a=i?n(r):n;e.isArray(a)&&(e(a).each(function(){var e=this.text!==t,n=e?this.text:this;(""===o||r.matcher(o,n))&&s.results.push(e?this:{id:this,text:this})}),r.callback(s))}}function k(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(n+" must be a string, function, or falsy value")}function _(t,n){if(e.isFunction(t)){var i=Array.prototype.slice.call(arguments,2);return t.apply(n,i)}return t}function D(t){var n=0;return e.each(t,function(e,t){t.children?n+=D(t.children):n++}),n}function S(e,n,i,r){var o,a,l,d,c,u=e,h=!1;if(!r.createSearchChoice||!r.tokenSeparators||r.tokenSeparators.length<1)return t;for(;;){for(a=-1,l=0,d=r.tokenSeparators.length;d>l&&(c=r.tokenSeparators[l],a=e.indexOf(c),!(a>=0));l++);if(0>a)break;if(o=e.substring(0,a),e=e.substring(a+c.length),o.length>0&&(o=r.createSearchChoice.call(this,o,n),o!==t&&null!==o&&r.id(o)!==t&&null!==r.id(o))){for(h=!1,l=0,d=n.length;d>l;l++)if(s(r.id(o),r.id(n[l]))){h=!0;break}h||i(o)}}return u!==e?e:void 0}function M(){var t=this;e.each(arguments,function(e,n){t[n].remove(),t[n]=null})}function A(t,n){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}if(window.Select2===t){var E,F,j,O,N,I,P,R,V={x:0,y:0},E={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case E.LEFT:case E.RIGHT:case E.UP:case E.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case E.SHIFT:case E.CTRL:case E.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},B="<div class='select2-measure-scrollbar'></div>",L={"":"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"AA",:"AE",:"AE",:"AE",:"AO",:"AU",:"AV",:"AV",:"AY","":"B",:"B",:"B",:"B",:"B",:"B",:"B",:"B","":"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C","":"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"DZ",:"DZ",:"Dz",:"Dz","":"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E","":"F",:"F",:"F",:"F",:"F","":"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G","":"G",:"G",:"G","":"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H","":"H","":"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I","":"J",:"J",:"J",:"J","":"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K","":"K","":"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"LJ",:"Lj","":"M",:"M",:"M",:"M",:"M",:"M",:"M","":"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N","":"N","":"N",:"NJ",:"Nj","":"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"OI",:"OO",:"OU","":"P",:"P",:"P",:"P",:"P",:"P",:"P",:"P",:"P","":"Q",:"Q",:"Q",:"Q",:"Q","":"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R","":"R",:"R","":"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S","":"S","":"S",:"S","":"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"TZ","":"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U","":"V",:"V",:"V",:"V",:"V",:"V",:"V",:"VY","":"W",:"W",:"W",:"W",:"W",:"W",:"W",:"W",:"W","":"X",:"X",:"X",:"X","":"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y","":"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z","":"Z",:"Z",:"Z","":"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"aa",:"ae",:"ae",:"ae",:"ao",:"au",:"av",:"av",:"ay","":"b",:"b",:"b",:"b",:"b",:"b",:"b",:"b","":"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c","":"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"dz",:"dz","":"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e","":"f",:"f",:"f",:"f",:"f","":"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g","":"g",:"g",:"g","":"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"hv","":"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i","":"j",:"j",:"j",:"j",:"j","":"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k","":"k","":"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"lj","":"m",:"m",:"m",:"m",:"m",:"m",:"m","":"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n","":"n","":"n",:"nj","":"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"oi",:"ou",:"oo","":"p",:"p",:"p",:"p",:"p",:"p",:"p",:"p",:"p","":"q",:"q",:"q",:"q",:"q","":"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r","":"r",:"r","":"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s","":"s",:"s",:"s","":"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"tz","":"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u","":"v",:"v",:"v",:"v",:"v",:"v",:"v",:"vy","":"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w","":"x",:"x",:"x",:"x","":"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y","":"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};P=e(document),N=function(){var e=1;return function(){return e++}}(),F=A(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,r,s=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+N()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e("body"),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(_(n.containerCss,this.opts.element)),this.container.addClass(_(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(_(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=i=this.container.find(s),this.search=r=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),c(this.results),this.dropdown.on("mousemove-filtered",s,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",s,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",s,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",s,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),h(80,this.results),this.dropdown.on("scroll-debounced",s,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&i.mousewheel(function(e,t,n,r){var o=i.scrollTop();r>0&&0>=o-r?(i.scrollTop(0),m(e)):0>r&&i.get(0).scrollHeight-i.scrollTop()+r<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),m(e))}),d(r),r.on("keyup-change input paste",this.bind(this.updateResults)),r.on("focus",function(){r.addClass("select2-focused")}),r.on("blur",function(){r.removeClass("select2-focused")}),this.dropdown.on("mouseup",s,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var a=n.element.prop("disabled");a===t&&(a=!1),this.enable(!a);var l=n.element.prop("readonly");l===t&&(l=!1),this.readonly(l),R=R||o(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,n=e.data("select2"),i=this;this.close(),e.length&&e[0].detachEvent&&e.each(function(){this.detachEvent("onpropertychange",i._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),M.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:s(e.attr("locked"),"locked")||s(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var i,r,o,l,d=this;if(i=n.element,"select"===i.get(0).tagName.toLowerCase()&&(this.select=r=n.element),r&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{populateResults:function(i,r,o){var s,a=this.opts.id,l=this.liveRegion;(s=function(i,r,c){var u,h,f,p,m,v,g,y,b,w;i=n.sortResults(i,r,o);var x=[];for(u=0,h=i.length;h>u;u+=1)f=i[u],m=f.disabled===!0,p=!m&&a(f)!==t,v=f.children&&f.children.length>0,g=e("<li></li>"),g.addClass("select2-results-dept-"+c),g.addClass("select2-result"),g.addClass(p?"select2-result-selectable":"select2-result-unselectable"),m&&g.addClass("select2-disabled"),v&&g.addClass("select2-result-with-children"),g.addClass(d.opts.formatResultCssClass(f)),g.attr("role","presentation"),y=e(document.createElement("div")),y.addClass("select2-result-label"),y.attr("id","select2-result-label-"+N()),y.attr("role","option"),w=n.formatResult(f,y,o,d.opts.escapeMarkup),w!==t&&(y.html(w),g.append(y)),v&&(b=e("<ul></ul>"),b.addClass("select2-result-sub"),s(f.children,b,c+1),g.append(b)),g.data("select2-data",f),x.push(g[0]);r.append(x),l.text(n.formatMatches(i.length))})(r,i,0)}},e.fn.select2.defaults,n),"function"!=typeof n.id&&(o=n.id,n.id=function(e){return e[o]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(r?(n.query=this.bind(function(e){var n,r,o,s={results:[],more:!1},a=e.term;o=function(t,n){var i;t.is("option")?e.matcher(a,t.text(),t)&&n.push(d.optionToData(t)):t.is("optgroup")&&(i=d.optionToData(t),t.children().each2(function(e,t){o(t,i.children)}),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==t&&n.length>0&&(r=this.getPlaceholderOption(),r&&(n=n.not(r))),n.each2(function(e,t){o(t,s.results)}),e.callback(s)}),n.id=function(e){return e.id}):"query"in n||("ajax"in n?(l=n.element.data("ajax-url"),l&&l.length>0&&(n.ajax.url=l),n.query=x.call(n.element,n.ajax)):"data"in n?n.query=T(n.data):"tags"in n&&(n.query=C(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,i){var r=[];e(a(t.val(),n.separator)).each(function(){var t={id:this,text:this},i=n.tags;e.isFunction(i)&&(i=i()),e(i).each(function(){return s(this.id,t.id)?(t=this,!1):void 0}),r.push(t)}),i(r)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,i=this.opts.element,r=this;i.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var e=i.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=i.prop("readonly");n===t&&(n=!1),this.readonly(n),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(_(this.opts.containerCssClass,this.opts.element)),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(_(this.opts.dropdownCssClass,this.opts.element))}),i.length&&i[0].attachEvent&&i.each(function(){this.attachEvent("onpropertychange",r._sync)}),n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n(function(t){e.each(t,r._sync)}),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var t,n,i,r,o,s=this.dropdown,a=this.container.offset(),l=this.container.outerHeight(!1),d=this.container.outerWidth(!1),c=s.outerHeight(!1),u=e(window),h=u.width(),f=u.height(),p=u.scrollLeft()+h,m=u.scrollTop()+f,v=a.top+l,g=a.left,y=m>=v+c,b=a.top-c>=u.scrollTop(),w=s.outerWidth(!1),x=p>=g+w,T=s.hasClass("select2-drop-above");T?(n=!0,!b&&y&&(i=!0,n=!1)):(n=!1,!y&&b&&(i=!0,n=!0)),i&&(s.hide(),a=this.container.offset(),l=this.container.outerHeight(!1),d=this.container.outerWidth(!1),c=s.outerHeight(!1),p=u.scrollLeft()+h,m=u.scrollTop()+f,v=a.top+l,g=a.left,w=s.outerWidth(!1),x=p>=g+w,s.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(o=e(".select2-results",s)[0],s.addClass("select2-drop-auto-width"),s.css("width",""),w=s.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:R.width),w>d?d=w:w=d,c=s.outerHeight(!1),x=p>=g+w):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(t=this.body.offset(),v-=t.top,g-=t.left),x||(g=a.left+this.container.outerWidth(!1)-w),r={left:g,width:d},n?(r.top=a.top-c,r.bottom="auto",this.container.addClass("select2-drop-above"),s.addClass("select2-drop-above")):(r.top=v,r.bottom="auto",this.container.removeClass("select2-drop-above"),s.removeClass("select2-drop-above")),r=e.extend(r,_(this.opts.dropdownCss,this.opts.element)),s.css(r)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),P.on("mousemove.select2Event",function(e){V.x=e.pageX,V.y=e.pageY}),!0):!1},opening:function(){var t,i=this.containerEventName,r="scroll."+i,o="resize."+i,s="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),t=e("#select2-drop-mask"),0==t.length&&(t=e(document.createElement("div")),t.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",function(i){n(t);var r,o=e("#select2-drop");
o.length>0&&(r=o.data("select2"),r.opts.selectOnBlur&&r.selectHighlighted({noFocus:!0}),r.close(),i.preventDefault(),i.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each(function(){e(this).on(o+" "+r+" "+s,function(){a.opened()&&a.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerEventName,n="scroll."+t,i="resize."+t,r="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(i).off(r)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),P.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return _(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,n,i,r,o,s,a,l,d=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return void d.scrollTop(0);t=this.findHighlightableChoices().find(".select2-result-label"),i=e(t[n]),l=(i.offset()||{}).top||0,r=l+i.outerHeight(!0),n===t.length-1&&(a=d.find("li.select2-more-results"),a.length>0&&(r=a.offset().top+a.outerHeight(!0))),o=d.offset().top+d.outerHeight(!0),r>o&&d.scrollTop(d.scrollTop()+(r-o)),s=l-d.offset().top,0>s&&"none"!=i.css("display")&&d.scrollTop(d.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){i+=t;var r=e(n[i]);if(r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var n,i,o=this.findHighlightableChoices();return 0===arguments.length?r(o.filter(".select2-highlighted")[0],o.get()):(t>=o.length&&(t=o.length-1),0>t&&(t=0),this.removeHighlight(),n=e(o[t]),n.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),i=n.data("select2-data"),void(i&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e,t=this.results,n=t.find("li.select2-more-results"),i=this.resultsPage+1,r=this,o=this.search.val(),s=this.context;0!==n.length&&(e=n.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:i,context:s,matcher:this.opts.matcher,callback:this.bind(function(e){r.opened()&&(r.opts.populateResults.call(this,t,e.results,{term:o,page:i,context:s}),r.postprocessResults(e,!1,!1),e.more===!0?(n.detach().appendTo(t).text(_(r.opts.formatLoadMore,r.opts.element,i+1)),window.setTimeout(function(){r.loadMoreIfNeeded()},10)):n.remove(),r.positionDropdown(),r.resultsPage=i,r.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})})))},tokenize:function(){},updateResults:function(n){function i(){d.removeClass("select2-active"),h.positionDropdown(),h.liveRegion.text(c.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?c.text():h.opts.formatMatches(c.find(".select2-result-selectable").length))}function r(e){c.html(e),i()}var o,a,l,d=this.search,c=this.results,u=this.opts,h=this,f=d.val(),p=e.data(this.container,"select2-last-term");if((n===!0||!p||!s(f,p))&&(e.data(this.container,"select2-last-term",f),n===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(o=this.data(),e.isArray(o)&&o.length>=m&&k(u.formatSelectionTooBig,"formatSelectionTooBig")))return void r("<li class='select2-selection-limit'>"+_(u.formatSelectionTooBig,u.element,m)+"</li>");if(d.val().length<u.minimumInputLength)return r(k(u.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+_(u.formatInputTooShort,u.element,d.val(),u.minimumInputLength)+"</li>":""),void(n&&this.showSearch&&this.showSearch(!0));if(u.maximumInputLength&&d.val().length>u.maximumInputLength)return void r(k(u.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+_(u.formatInputTooLong,u.element,d.val(),u.maximumInputLength)+"</li>":"");u.formatSearching&&0===this.findHighlightableChoices().length&&r("<li class='select2-searching'>"+_(u.formatSearching,u.element)+"</li>"),d.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=t&&null!=a&&d.val(a),this.resultsPage=1,u.query({element:u.element,term:d.val(),page:this.resultsPage,context:null,matcher:u.matcher,callback:this.bind(function(o){var a;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(o.hasError!==t&&k(u.formatAjaxError,"formatAjaxError"))return void r("<li class='select2-ajax-error'>"+_(u.formatAjaxError,u.element,o.jqXHR,o.textStatus,o.errorThrown)+"</li>");if(this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&""!==d.val()&&(a=this.opts.createSearchChoice.call(h,d.val(),o.results),a!==t&&null!==a&&h.id(a)!==t&&null!==h.id(a)&&0===e(o.results).filter(function(){return s(h.id(this),h.id(a))}).length&&this.opts.createSearchChoicePosition(o.results,a)),0===o.results.length&&k(u.formatNoMatches,"formatNoMatches"))return void r("<li class='select2-no-results'>"+_(u.formatNoMatches,u.element,d.val())+"</li>");c.empty(),h.opts.populateResults.call(this,c,o.results,{term:d.val(),page:this.resultsPage,context:null}),o.more===!0&&k(u.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+u.escapeMarkup(_(u.formatLoadMore,u.element,this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(o,n),i(),this.opts.element.trigger({type:"select2-loaded",items:o})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){f(this.search)},selectHighlighted:function(e){if(this._touchMoved)return void this.clearTouchMoved();var t=this.highlight(),n=this.results.find(".select2-highlighted"),i=n.closest(".select2-result").data("select2-data");i?(this.highlight(t),this.onSelect(i,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){function n(){var n,i,r,o,s,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==t)for(i=n.split(";"),o=0,s=i.length;s>o;o+=1)if(a=i[o].replace(/\s/g,""),r=a.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==r&&r.length>=1)return r[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=n.call(this);null!==i&&this.container.css("width",i)}}),j=A(F,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,i,r;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),n=this.search.get(0),n.createTextRange?(i=n.createTextRange(),i.collapse(!1),i.select()):n.setSelectionRange&&(r=this.search.val().length,n.setSelectionRange(r,r))),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),M.call(this,"selection","focusser")},initContainer:function(){var t,i,r=this.container,o=this.dropdown,s=N();this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=t=r.find(".select2-choice"),this.focusser=r.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+s),this.focusser.attr("aria-labelledby","select2-chosen-"+s),this.results.attr("id","select2-results-"+s),this.search.attr("aria-owns","select2-results-"+s),this.focusser.attr("id","s2id_autogen"+s),i=e("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(i.text()).attr("for",this.focusser.attr("id"));var a=this.opts.element.attr("title");this.opts.element.attr("title",a||i.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode){if(e.which===E.PAGE_UP||e.which===E.PAGE_DOWN)return void m(e);switch(e.which){case E.UP:case E.DOWN:return this.moveHighlight(e.which===E.UP?-1:1),void m(e);case E.ENTER:return this.selectHighlighted(),void m(e);case E.TAB:return void this.selectHighlighted({noFocus:!0});case E.ESC:return this.cancel(e),void m(e)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==E.TAB&&!E.isControl(e)&&!E.isFunctionKey(e)&&e.which!==E.ESC){if(this.opts.openOnEnter===!1&&e.which===E.ENTER)return void m(e);if(e.which==E.DOWN||e.which==E.UP||e.which==E.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void m(e)}return e.which==E.DELETE||e.which==E.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(e)):void 0}})),d(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),v(e),this.close(),this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(i){n(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(i)})),o.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){m(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var i=e.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var r=this.getPlaceholderOption();this.opts.element.val(r?r.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(n,e.search.val()))})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()===t?!1:(e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val()},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter(function(){return this.selected&&!this.disabled});t(n.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var r=n.val(),o=null;t.query({matcher:function(e,n,i){var a=s(r,t.id(i));return a&&(o=i),a},callback:e.isFunction(i)?function(){i(o)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var i=0,r=this;if(this.findHighlightableChoices().each2(function(e,t){return s(r.id(t.data("select2-data")),r.opts.element.val())?(i=e,!1):void 0}),n!==!1&&this.highlight(t===!0&&i>=0?i:0),t===!0){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(D(e.results)>=o)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),s(n,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var n,i,r=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),r.empty(),null!==e&&(n=this.opts.formatSelection(e,r,this.opts.escapeMarkup)),n!==t&&r.append(n),i=this.opts.formatSelectionCssClass(e,r),i!==t&&r.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,i=null,r=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return i=r.optionToData(t),!1}),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:o});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){r.opts.element.val(e?r.id(e):""),r.updateSelection(e),r.setPlaceholder(),n&&r.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,i=!1;return 0===arguments.length?(n=this.selection.data("select2-data"),n==t&&(n=null),n):(arguments.length>1&&(i=arguments[1]),void(e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:n})):this.clear(i)))}}),O=A(F,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){i.push(n.optionToData(t))}),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var r=a(n.val(),t.separator),o=[];t.query({matcher:function(n,i,a){var l=e.grep(r,function(e){return s(e,t.id(a))}).length;return l&&o.push(a),l},callback:e.isFunction(i)?function(){for(var e=[],n=0;n<r.length;n++)for(var a=r[n],l=0;l<o.length;l++){var d=o[l];if(s(a,t.id(d))){e.push(d),o.splice(l,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),M.call(this,"searchContainer","selection")},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+N()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var n=t.find(".select2-search-choice-focus"),i=n.prev(".select2-search-choice:not(.select2-locked)"),r=n.next(".select2-search-choice:not(.select2-locked)"),o=p(this.search);if(n.length&&(e.which==E.LEFT||e.which==E.RIGHT||e.which==E.BACKSPACE||e.which==E.DELETE||e.which==E.ENTER)){var s=n;return e.which==E.LEFT&&i.length?s=i:e.which==E.RIGHT?s=r.length?r:null:e.which===E.BACKSPACE?this.unselect(n.first())&&(this.search.width(10),s=i.length?i:r):e.which==E.DELETE?this.unselect(n.first())&&(this.search.width(10),s=r.length?r:null):e.which==E.ENTER&&(s=null),this.selectChoice(s),m(e),void(s&&s.length||this.open())}if((e.which===E.BACKSPACE&&1==this.keydowns||e.which==E.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void m(e);if(this.selectChoice(null),this.opened())switch(e.which){case E.UP:case E.DOWN:return this.moveHighlight(e.which===E.UP?-1:1),void m(e);case E.ENTER:return this.selectHighlighted(),void m(e);case E.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case E.ESC:return this.cancel(e),void m(e)}if(e.which!==E.TAB&&!E.isControl(e)&&!E.isFunctionKey(e)&&e.which!==E.BACKSPACE&&e.which!==E.ESC){if(e.which===E.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===E.PAGE_UP||e.which===E.PAGE_DOWN)&&m(e),e.which===E.ENTER&&m(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",n,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",n,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],i=[],o=this;e(t).each(function(){r(o.id(this),n)<0&&(n.push(o.id(this)),i.push(this))}),t=i,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,n){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,r,o=!n.locked,s=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=o?s:a,d=this.id(n),c=this.getVal();i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup),i!=t&&l.find("div").replaceWith("<div>"+i+"</div>"),r=this.opts.formatSelectionCssClass(n,l.find("div")),r!=t&&l.addClass(r),o&&l.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",n),l.insertBefore(this.searchContainer),c.push(d),this.setVal(c)},unselect:function(t){var n,i,o=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(n=t.data("select2-data")){var s=e.Event("select2-removing");if(s.val=this.id(n),s.choice=n,this.opts.element.trigger(s),s.isDefaultPrevented())return!1;for(;(i=r(this.id(n),o))>=0;)o.splice(i,1),this.setVal(o),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(e,t,n){var i=this.getVal(),o=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),a=this;o.each2(function(e,t){var n=a.id(t.data("select2-data"));r(n,i)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&n!==!1&&a.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&k(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+_(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var e,t,n,i,r,o=l(this.search);e=g(this.search)+10,t=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,r=n-(t-i)-o,e>r&&(r=n-o),40>r&&(r=n-o),0>=r&&(r=e),this.search.width(Math.floor(r))},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),a(e,this.opts.separator))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){r(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),n=0;n<t.length;n++)for(var i=0;i<e.length;i++)s(this.opts.id(t[n]),this.opts.id(e[i]))&&(t.splice(n,1),n>0&&n--,e.splice(i,1),i--);return{added:t,removed:e}},val:function(n,i){var r,o=this;if(0===arguments.length)return this.getVal();if(r=this.data(),r.length||(r=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:r}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(r,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,o.id);o.setVal(n),o.updateSelection(t),o.clearSearch(),i&&o.triggerChange(o.buildChangeDetails(r,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,n){var i,r,o=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(r=this.data(),t||(t=[]),i=e.map(t,function(e){return o.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(r,this.data())),void 0)}}),e.fn.select2=function(){var n,i,o,s,a,l=Array.prototype.slice.call(arguments,0),d=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],u=["val","data"],h={search:"externalSearch"};
return this.each(function(){if(0===l.length||"object"==typeof l[0])n=0===l.length?{}:e.extend({},l[0]),n.element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?a=n.element.prop("multiple"):(a=n.multiple||!1,"tags"in n&&(n.multiple=a=!0)),i=a?new window.Select2["class"].multi:new window.Select2["class"].single,i.init(n);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(r(l[0],d)<0)throw"Unknown method: "+l[0];if(s=t,i=e(this).data("select2"),i===t)return;if(o=l[0],"container"===o?s=i.container:"dropdown"===o?s=i.dropdown:(h[o]&&(o=h[o]),s=i[o].apply(i,l.slice(1))),r(l[0],c)>=0||r(l[0],u)>=0&&1==l.length)return!1}}),s===t?this:s},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,i){var r=[];return b(e.text,n.term,r,i),r.join("")},formatSelection:function(e,n,i){return e?i(e.text):t},sortResults:function(e){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},matcher:function(e,t){return i(""+t).toUpperCase().indexOf(i(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:S,escapeMarkup:w,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;return t&&e.opts.minimumResultsForSearch<0?!1:!0}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results"},formatSearching:function(){return"Searching"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:x,local:T,tags:C},util:{debounce:u,markMatch:b,escapeMarkup:w,stripDiacritics:i},"class":{"abstract":F,single:j,multi:O}}}}(jQuery),define("select2",["jquery"],function(e){return function(){var t;return t||e.jquery}}(this)),require.config({shim:{base64:{exports:"Base64"},alerts:{deps:["foundation"]},dropdown:{deps:["foundation"]},tabs:{deps:["foundation"]},tooltip:{deps:["foundation"]},abide:{deps:["foundation"]},foundation:{exports:"Foundation",deps:["jquery"]},jqueryui:{exports:"jquery",deps:["jquery"]},select2:{exports:"jquery",deps:["jquery"]},widgetFactory:{exports:"jquery",deps:["jqueryui"]},mouseInteraction:{exports:"jquery",deps:["jqueryui","widgetFactory"]},sortable:{exports:"jquery",deps:["jqueryui","widgetFactory","mouseInteraction"]},accordion:{exports:"jquery",deps:["jqueryui","widgetFactory"]},ckeditorAdapter:{exports:"jquery",deps:["jquery","ckeditor"]},scrollToFixed:{exports:"jquery",deps:["jquery"]},datetimepicker:{exports:"datetimepicker",deps:["jquery"]}},packages:[{name:"underscore",location:"vendor/lodash-amd/underscore"},{name:"masseuse",location:"vendor/masseuse/app"},{name:"helpers",location:"helpers"}],paths:{jquery:"vendor/jquery/dist/jquery",jqueryui:"vendor/jquery.ui/ui/jquery.ui.core",select2:"vendor/select2/select2",backbone:"vendor/backbone-amd/backbone",text:"vendor/requirejs-text/text",rivets:"vendor/rivets/dist/rivets",base64:"vendor/js-base64/base64",foundation:"vendor/foundation/js/foundation/foundation",modernizr:"vendor/modernizr/modernizr",ckeditor:"vendor/ckeditor/ckeditor",ckeditorAdapter:"vendor/ckeditor/adapters/jquery","svg-edit-embed-api":"vendor/svg-edit-2.7/embedapi",ace:"vendor/ace/lib/ace",moment:"vendor/moment/moment",scrollToFixed:"vendor/ScrollToFixed/jquery-scrolltofixed",datetimepicker:"vendor/datetimepicker/jquery.datetimepicker",sparkmd5:"vendor/sparkMD5/spark-md5",router:"router",alerts:"vendor/foundation/js/foundation/foundation.alert",dropdown:"vendor/foundation/js/foundation/foundation.dropdown",accordion:"vendor/jquery.ui/ui/jquery.ui.accordion",tabs:"vendor/foundation/js/foundation/foundation.tab",tooltip:"vendor/foundation/js/foundation/foundation.tooltip",abide:"vendor/foundation/js/foundation/foundation.abide",widgetFactory:"vendor/jquery.ui/ui/jquery.ui.widget",mouseInteraction:"vendor/jquery.ui/ui/jquery.ui.mouse",sortable:"vendor/jquery.ui/ui/jquery.ui.sortable",validationLibrary:"validation/validationLibrary",validationTypes:"validation/validationTypes",validationAlpha:"validation/views/alpha/view",validationAlphaConfig:"validation/views/alpha/config",validationAlphaModel:"validation/views/alpha/model",validationNumber:"validation/views/number/view",validationNumberConfig:"validation/views/number/config",validationNumberModel:"validation/views/number/model",validationAlphaNumeric:"validation/views/alphaNumeric/view",validationAlphaNumericConfig:"validation/views/alphaNumeric/config",validationAlphaNumericModel:"validation/views/alphaNumeric/model",validationDate:"validation/views/date/view",validationDateConfig:"validation/views/date/config",validationDateModel:"validation/views/date/model",validationDateFormatters:"validation/views/date/formatters",validationDatetime:"validation/views/datetime/view",validationDatetimeConfig:"validation/views/datetime/config",validationDatetimeModel:"validation/views/datetime/model",validationDatetimeFormatters:"validation/views/datetime/formatters",validationEmail:"validation/views/email/view",validationEmailConfig:"validation/views/email/config",validationEmailModel:"validation/views/email/model",validationRegex:"validation/views/regex/view",validationRegexConfig:"validation/views/regex/config",validationRegexModel:"validation/views/regex/model",validationUrl:"validation/views/url/view",validationUrlConfig:"validation/views/url/config",validationUrlModel:"validation/views/url/model",validationRequired:"validation/views/required/view",validationRequiredConfig:"validation/views/required/config",validationRequiredModel:"validation/views/required/model",mixins:"mixins",grasshopperBaseView:"views/grasshopperBaseView",addAssetsView:"views/addAssets/addAssetsView",addAssetsViewConfig:"views/addAssets/addAssetsViewConfig",addAssetsViewModel:"views/addAssets/addAssetsViewModel",addContentView:"views/addContent/addContentView",addContentViewConfig:"views/addContent/addContentViewConfig",addContentViewModel:"views/addContent/addContentViewModel",addFolderView:"views/addFolder/addFolderView",addFolderViewConfig:"views/addFolder/addFolderViewConfig",addFolderViewModel:"views/addFolder/addFolderViewModel",addUser:"views/addUser",alertBoxView:"views/alertBox/alertBoxView",alertBoxViewConfig:"views/alertBox/alertBoxViewConfig",alertBoxViewModel:"views/alertBox/alertBoxViewModel",assetDetailView:"views/assetDetail/assetDetailView",assetDetailViewConfig:"views/assetDetail/assetDetailViewConfig",assetDetailViewModel:"views/assetDetail/assetDetailViewModel",contentBrowseView:"views/contentBrowse/contentBrowseView",contentBrowseViewConfig:"views/contentBrowse/contentBrowseViewConfig",contentBrowseViewModel:"views/contentBrowse/contentBrowseViewModel",contentBrowseViewChildNodesCollection:"views/contentBrowse/childNodesCollection",contentDetailView:"views/contentDetail/contentDetailView",contentDetailViewConfig:"views/contentDetail/contentDetailViewConfig",contentDetailViewModel:"views/contentDetail/contentDetailViewModel",contentDetailRowView:"views/contentDetail/contentDetailRow/view",contentDetailRowViewConfig:"views/contentDetail/contentDetailRow/config",contentDetailRowViewModel:"views/contentDetail/contentDetailRow/model",contentTypeDetailView:"views/contentTypeDetail/contentTypeDetailView",contentTypeDetailViewConfig:"views/contentTypeDetail/contentTypeDetailViewConfig",contentTypeDetailViewModel:"views/contentTypeDetail/contentTypeDetailViewModel",contentTypeDetailViewFieldsCollection:"views/contentTypeDetail/contentTypeDetailViewFieldsCollection",contentTypeDetailRow:"views/contentTypeDetail/contentTypeDetailRow/view",contentTypeDetailRowConfig:"views/contentTypeDetail/contentTypeDetailRow/config",contentTypeDetailRowModel:"views/contentTypeDetail/contentTypeDetailRow/model",contentTypeIndexView:"views/contentTypeIndex/contentTypeIndexView",contentTypeIndexViewConfig:"views/contentTypeIndex/contentTypeIndexViewConfig",contentTypeIndexViewModel:"views/contentTypeIndex/contentTypeIndexViewModel",fieldAccordionView:"views/contentTypeDetail/fieldAccordion/view",fieldAccordionConfig:"views/contentTypeDetail/fieldAccordion/config",fieldAccordionModel:"views/contentTypeDetail/fieldAccordion/model",fieldAccordionBinders:"views/contentTypeDetail/fieldAccordion/binders",fieldAccordionValidationCollection:"views/contentTypeDetail/fieldAccordion/validationCollection",fileBrowserView:"views/fileBrowser/fileBrowserView",fileBrowserViewConfig:"views/fileBrowser/fileBrowserViewConfig",fileBrowserViewModel:"views/fileBrowser/fileBrowserViewModel",headerView:"views/header/headerView",headerViewConfig:"views/header/headerViewConfig",headerViewModel:"views/header/headerViewModel",login:"views/login",mastheadView:"views/masthead/mastheadView",mastheadViewConfig:"views/masthead/mastheadViewConfig",mastheadViewModel:"views/masthead/mastheadViewModel",mastheadViewBinders:"views/masthead/binders",modalView:"views/modal/modalView",modalViewConfig:"views/modal/modalViewConfig",modalViewModel:"views/modal/modalViewModel",modalViewBinders:"views/modal/binders",nodeDetailView:"views/nodeDetail/nodeDetailView",nodeDetailViewConfig:"views/nodeDetail/nodeDetailViewConfig",nodeDetailViewModel:"views/nodeDetail/nodeDetailViewModel",nodeTreeView:"views/nodeTree/nodeTreeView",nodeTreeViewConfig:"views/nodeTree/nodeTreeViewConfig",nodeTreeViewModel:"views/nodeTree/nodeTreeViewModel",nodeTreeViewBinders:"views/nodeTree/nodeTreeViewBinders",pagination:"views/pagination",pluginWrapperView:"views/pluginWrapper/pluginWrapperView",pluginWrapperViewConfig:"views/pluginWrapper/pluginWrapperViewConfig",pluginWrapperViewModel:"views/pluginWrapper/pluginWrapperViewModel",pluginWrapperViewCollection:"views/pluginWrapper/pluginCollection",userDetail:"views/userDetail",userDetailRow:"views/userDetail/userDetailRow",userIndexView:"views/userIndex/userIndexView",userIndexViewConfig:"views/userIndex/userIndexViewConfig",userIndexViewModel:"views/userIndex/userIndexViewModel",forbiddenView:"views/forbidden/forbiddenView",forbiddenViewConfig:"views/forbidden/forbiddenViewConfig",sysInfoView:"views/sysInfo/sysInfoView",sysInfoViewConfig:"views/sysInfo/sysInfoViewConfig",selfValidatingModel:"models/selfValidatingModel",UserModel:"models/userModel",grasshopperModel:"models/grasshopperModel",pluginSetupModel:"views/contentTypeDetail/pluginSetupModel",loginWorker:"workers/loginWorker",logoutWorker:"workers/logoutWorker",contentTypeWorker:"workers/contentTypeWorker",ajaxCounterWorker:"workers/ajaxCounterWorker",assetWorker:"workers/assetWorker",breadcrumbWorker:"workers/breadcrumbWorker",nodeWorker:"workers/nodeWorker",urlWorker:"workers/urlWorker",paginationWorker:"workers/paginationWorker",grasshopperCollection:"collections/grasshopperCollection",paginatedCollection:"collections/paginatedCollection",userCollection:"collections/userCollection",api:"api/api",plugins:"plugins",appBinders:"appBinders",pluginWrapperBinders:"views/pluginWrapper/pluginWrapperBinders",contentTypeDetailBinders:"views/contentTypeDetail/contentTypeDetailBinders",formatters:"formatters",contentTypeDetailFormatters:"views/contentTypeDetail/contentTypeDetailFormatters",resources:"resources",constants:"constants"}}),require(["backbone","underscore","jquery","router","constants","ajaxCounterWorker","alerts","dropdown","tabs","tooltip","abide","modernizr","sortable","accordion","scrollToFixed","select2","sparkmd5"],function(e,t,n,i,r,o){t.templateSettings={evaluate:/\[\[(.+?)\]\]/g,interpolate:/\[\[=(.+?)\]\]/g,escape:/\[\[-(.+?)\]\]/g},o.setupCounter(),n(document).foundation(),new i,e.history.start()}),define("main",function(){});
//# sourceMappingURL=main.js.map